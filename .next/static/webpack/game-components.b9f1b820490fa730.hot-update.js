"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("game-components",{

/***/ "(app-pages-browser)/./src/components/PVPGameScene.tsx":
/*!*****************************************!*\
  !*** ./src/components/PVPGameScene.tsx ***!
  \*****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PVPGameScene: function() { return /* binding */ PVPGameScene; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_useFrame_useThree_react_three_fiber__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! __barrel_optimize__?names=useFrame,useThree!=!@react-three/fiber */ \"(app-pages-browser)/./node_modules/@react-three/fiber/dist/events-776716bd.esm.js\");\n/* harmony import */ var _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/three-exports */ \"(app-pages-browser)/./src/utils/three-exports.ts\");\n/* harmony import */ var _dragon_DragonRenderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dragon/DragonRenderer */ \"(app-pages-browser)/./src/components/dragon/DragonRenderer.tsx\");\n/* harmony import */ var _contexts_MultiplayerContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/contexts/MultiplayerContext */ \"(app-pages-browser)/./src/contexts/MultiplayerContext.tsx\");\n/* harmony import */ var _core_Engine__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/core/Engine */ \"(app-pages-browser)/./src/core/Engine.ts\");\n/* harmony import */ var _ecs_World__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/ecs/World */ \"(app-pages-browser)/./src/ecs/World.ts\");\n/* harmony import */ var _ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/ecs/components/Transform */ \"(app-pages-browser)/./src/ecs/components/Transform.ts\");\n/* harmony import */ var _ecs_components_Movement__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/ecs/components/Movement */ \"(app-pages-browser)/./src/ecs/components/Movement.ts\");\n/* harmony import */ var _ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/ecs/components/Health */ \"(app-pages-browser)/./src/ecs/components/Health.ts\");\n/* harmony import */ var _ecs_components_Shield__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/ecs/components/Shield */ \"(app-pages-browser)/./src/ecs/components/Shield.ts\");\n/* harmony import */ var _ecs_components_Renderer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/ecs/components/Renderer */ \"(app-pages-browser)/./src/ecs/components/Renderer.ts\");\n/* harmony import */ var _ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/ecs/components/Collider */ \"(app-pages-browser)/./src/ecs/components/Collider.ts\");\n/* harmony import */ var _ecs_components_Tower__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/ecs/components/Tower */ \"(app-pages-browser)/./src/ecs/components/Tower.ts\");\n/* harmony import */ var _ecs_components_SummonedUnit__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/ecs/components/SummonedUnit */ \"(app-pages-browser)/./src/ecs/components/SummonedUnit.ts\");\n/* harmony import */ var _ecs_components_Interpolation__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/ecs/components/Interpolation */ \"(app-pages-browser)/./src/ecs/components/Interpolation.ts\");\n/* harmony import */ var _systems_RenderSystem__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/systems/RenderSystem */ \"(app-pages-browser)/./src/systems/RenderSystem.ts\");\n/* harmony import */ var _systems_ControlSystem__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @/systems/ControlSystem */ \"(app-pages-browser)/./src/systems/ControlSystem.ts\");\n/* harmony import */ var _systems_CameraSystem__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @/systems/CameraSystem */ \"(app-pages-browser)/./src/systems/CameraSystem.ts\");\n/* harmony import */ var _systems_ProjectileSystem__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @/systems/ProjectileSystem */ \"(app-pages-browser)/./src/systems/ProjectileSystem.ts\");\n/* harmony import */ var _systems_PhysicsSystem__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @/systems/PhysicsSystem */ \"(app-pages-browser)/./src/systems/PhysicsSystem.ts\");\n/* harmony import */ var _systems_CollisionSystem__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @/systems/CollisionSystem */ \"(app-pages-browser)/./src/systems/CollisionSystem.ts\");\n/* harmony import */ var _systems_CombatSystem__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @/systems/CombatSystem */ \"(app-pages-browser)/./src/systems/CombatSystem.ts\");\n/* harmony import */ var _systems_TowerSystem__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @/systems/TowerSystem */ \"(app-pages-browser)/./src/systems/TowerSystem.ts\");\n/* harmony import */ var _systems_SummonedUnitSystem__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @/systems/SummonedUnitSystem */ \"(app-pages-browser)/./src/systems/SummonedUnitSystem.ts\");\n/* harmony import */ var _systems_InterpolationSystem__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @/systems/InterpolationSystem */ \"(app-pages-browser)/./src/systems/InterpolationSystem.ts\");\n/* harmony import */ var _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @/components/dragon/weapons */ \"(app-pages-browser)/./src/components/dragon/weapons.ts\");\n/* harmony import */ var _components_weapons_Smite__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @/components/weapons/Smite */ \"(app-pages-browser)/./src/components/weapons/Smite.tsx\");\n/* harmony import */ var _components_weapons_DeathGraspProjectile__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @/components/weapons/DeathGraspProjectile */ \"(app-pages-browser)/./src/components/weapons/DeathGraspProjectile.tsx\");\n/* harmony import */ var _components_weapons_DeathGraspPull__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @/components/weapons/DeathGraspPull */ \"(app-pages-browser)/./src/components/weapons/DeathGraspPull.tsx\");\n/* harmony import */ var _components_managers_UnifiedProjectileManager__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @/components/managers/UnifiedProjectileManager */ \"(app-pages-browser)/./src/components/managers/UnifiedProjectileManager.tsx\");\n/* harmony import */ var _components_projectiles_BowPowershotManager__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @/components/projectiles/BowPowershotManager */ \"(app-pages-browser)/./src/components/projectiles/BowPowershotManager.tsx\");\n/* harmony import */ var _components_weapons_FrostNovaManager__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @/components/weapons/FrostNovaManager */ \"(app-pages-browser)/./src/components/weapons/FrostNovaManager.tsx\");\n/* harmony import */ var _components_weapons_StunManager__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @/components/weapons/StunManager */ \"(app-pages-browser)/./src/components/weapons/StunManager.tsx\");\n/* harmony import */ var _components_weapons_FrostNova__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @/components/weapons/FrostNova */ \"(app-pages-browser)/./src/components/weapons/FrostNova.tsx\");\n/* harmony import */ var _components_projectiles_CobraShotManager__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @/components/projectiles/CobraShotManager */ \"(app-pages-browser)/./src/components/projectiles/CobraShotManager.tsx\");\n/* harmony import */ var _components_projectiles_VenomEffect__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @/components/projectiles/VenomEffect */ \"(app-pages-browser)/./src/components/projectiles/VenomEffect.tsx\");\n/* harmony import */ var _components_ui_DebuffIndicator__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @/components/ui/DebuffIndicator */ \"(app-pages-browser)/./src/components/ui/DebuffIndicator.tsx\");\n/* harmony import */ var _components_weapons_FrozenEffect__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @/components/weapons/FrozenEffect */ \"(app-pages-browser)/./src/components/weapons/FrozenEffect.tsx\");\n/* harmony import */ var _components_weapons_StunnedEffect__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @/components/weapons/StunnedEffect */ \"(app-pages-browser)/./src/components/weapons/StunnedEffect.tsx\");\n/* harmony import */ var _components_pvp_OptimizedPVPManagers__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @/components/pvp/OptimizedPVPManagers */ \"(app-pages-browser)/./src/components/pvp/OptimizedPVPManagers.tsx\");\n/* harmony import */ var _utils_PVPObjectPool__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @/utils/PVPObjectPool */ \"(app-pages-browser)/./src/utils/PVPObjectPool.ts\");\n/* harmony import */ var _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @/utils/PVPStateBatcher */ \"(app-pages-browser)/./src/utils/PVPStateBatcher.ts\");\n/* harmony import */ var _components_weapons_DivineStormManager__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @/components/weapons/DivineStormManager */ \"(app-pages-browser)/./src/components/weapons/DivineStormManager.tsx\");\n/* harmony import */ var _components_weapons_DeflectShieldManager__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @/components/weapons/DeflectShieldManager */ \"(app-pages-browser)/./src/components/weapons/DeflectShieldManager.tsx\");\n/* harmony import */ var _components_ui_PlayerHealthBar__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @/components/ui/PlayerHealthBar */ \"(app-pages-browser)/./src/components/ui/PlayerHealthBar.tsx\");\n/* harmony import */ var _components_towers_TowerRenderer__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @/components/towers/TowerRenderer */ \"(app-pages-browser)/./src/components/towers/TowerRenderer.tsx\");\n/* harmony import */ var _components_SummonedUnitRenderer__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @/components/SummonedUnitRenderer */ \"(app-pages-browser)/./src/components/SummonedUnitRenderer.tsx\");\n/* harmony import */ var _core_DamageCalculator__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! @/core/DamageCalculator */ \"(app-pages-browser)/./src/core/DamageCalculator.ts\");\n/* harmony import */ var _components_environment_Environment__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! @/components/environment/Environment */ \"(app-pages-browser)/./src/components/environment/Environment.tsx\");\n/* harmony import */ var _components_projectiles_useBowPowershot__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! @/components/projectiles/useBowPowershot */ \"(app-pages-browser)/./src/components/projectiles/useBowPowershot.ts\");\n/* harmony import */ var _components_projectiles_ViperStingManager__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! @/components/projectiles/ViperStingManager */ \"(app-pages-browser)/./src/components/projectiles/ViperStingManager.tsx\");\n/* harmony import */ var _components_projectiles_BarrageManager__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! @/components/projectiles/BarrageManager */ \"(app-pages-browser)/./src/components/projectiles/BarrageManager.tsx\");\n/* harmony import */ var _utils_ExperienceSystem__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! @/utils/ExperienceSystem */ \"(app-pages-browser)/./src/utils/ExperienceSystem.ts\");\n/* __next_internal_client_entry_do_not_use__ PVPGameScene auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n// Import our ECS systems\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// PVP Reanimate Effect Component (standalone healing effect)\nconst PVPReanimateEffect = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1___default().memo(_s((param)=>{\n    let { position, onComplete } = param;\n    _s();\n    const [time, setTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const duration = 1.5;\n    (0,_barrel_optimize_names_useFrame_useThree_react_three_fiber__WEBPACK_IMPORTED_MODULE_54__.F)((_, delta)=>{\n        setTime((prev)=>{\n            const newTime = prev + delta;\n            if (newTime >= duration) {\n                onComplete();\n            }\n            return newTime;\n        });\n    });\n    const progress = time / duration;\n    const opacity = Math.sin(progress * Math.PI);\n    const scale = 1 + progress * 2;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"group\", {\n        position: position.toArray(),\n        children: [\n            [\n                ...Array(3)\n            ].map((_, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n                    position: [\n                        0,\n                        progress * 2 + i * 0.5,\n                        0\n                    ],\n                    rotation: [\n                        Math.PI / 2,\n                        0,\n                        time * 2\n                    ],\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"torusGeometry\", {\n                            args: [\n                                0.8 - i * 0.2,\n                                0.05,\n                                16,\n                                32\n                            ]\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 139,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshStandardMaterial\", {\n                            color: \"#60FF38\",\n                            emissive: \"#60FF38\",\n                            emissiveIntensity: 1.5,\n                            transparent: true,\n                            opacity: opacity * (1 - i * 0.2)\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 140,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, \"ring-\".concat(i), true, {\n                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                    lineNumber: 134,\n                    columnNumber: 9\n                }, undefined)),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n                scale: [\n                    scale,\n                    scale,\n                    scale\n                ],\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"sphereGeometry\", {\n                        args: [\n                            0.5,\n                            32,\n                            32\n                        ]\n                    }, void 0, false, {\n                        fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                        lineNumber: 152,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshStandardMaterial\", {\n                        color: \"#60FF38\",\n                        emissive: \"#60FF38\",\n                        emissiveIntensity: 2,\n                        transparent: true,\n                        opacity: opacity * 0.3\n                    }, void 0, false, {\n                        fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                        lineNumber: 153,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                lineNumber: 151,\n                columnNumber: 7\n            }, undefined),\n            [\n                ...Array(12)\n            ].map((_, i)=>{\n                const angle = i / 12 * Math.PI * 2;\n                const radius = 0.75 + progress;\n                const yOffset = progress * 2;\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n                    position: [\n                        Math.cos(angle + time * 2) * radius / 1.1,\n                        yOffset + Math.sin(time * 3 + i) * 0.5,\n                        Math.sin(angle + time * 2) * radius / 1.1\n                    ],\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"sphereGeometry\", {\n                            args: [\n                                0.095,\n                                8,\n                                8\n                            ]\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 177,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshStandardMaterial\", {\n                            color: \"#60FF38\",\n                            emissive: \"#60FF38\",\n                            emissiveIntensity: 2.5,\n                            transparent: true,\n                            opacity: opacity * 0.8\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 178,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, \"particle-\".concat(i), true, {\n                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                    lineNumber: 169,\n                    columnNumber: 11\n                }, undefined);\n            }),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pointLight\", {\n                color: \"#60FF38\",\n                intensity: 2 * opacity,\n                distance: 5,\n                decay: 2\n            }, void 0, false, {\n                fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                lineNumber: 190,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n        lineNumber: 131,\n        columnNumber: 5\n    }, undefined);\n}, \"wROh5MC9V94AyK3Z3hVMBmb0q9Q=\", false, function() {\n    return [\n        _barrel_optimize_names_useFrame_useThree_react_three_fiber__WEBPACK_IMPORTED_MODULE_54__.F\n    ];\n}));\n_c = PVPReanimateEffect;\nPVPReanimateEffect.displayName = \"PVPReanimateEffect\";\nfunction PVPGameScene() {\n    let { onDamageNumbersUpdate, onDamageNumberComplete, onCameraUpdate, onGameStateUpdate, onControlSystemUpdate, onExperienceUpdate } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    var _engineRef_current, _controlSystemRef_current, _controlSystemRef_current1;\n    _s1();\n    const { scene, camera, gl, size } = (0,_barrel_optimize_names_useFrame_useThree_react_three_fiber__WEBPACK_IMPORTED_MODULE_54__.D)();\n    const { players, towers, gameStarted, isInRoom, updatePlayerPosition, updatePlayerWeapon, updatePlayerHealth, broadcastPlayerAttack, broadcastPlayerAbility, broadcastPlayerAnimationState, broadcastPlayerDamage, broadcastPlayerEffect, broadcastPlayerDebuff, damageTower, socket } = (0,_contexts_MultiplayerContext__WEBPACK_IMPORTED_MODULE_4__.useMultiplayer)();\n    const engineRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const playerEntityRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const controlSystemRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const towerSystemRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const summonedUnitSystemRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const reanimateRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isInitialized = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const lastAnimationBroadcast = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const [playerPosition, setPlayerPosition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0.5, 0));\n    const [playerEntity, setPlayerEntity] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Create a ref for the Viper Sting manager that includes position and rotation\n    const viperStingParentRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        position: new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0.5, 0),\n        quaternion: {\n            x: 0,\n            y: 0,\n            z: 0,\n            w: 1\n        }\n    });\n    // Track server player to local ECS entity mapping for PVP damage\n    const serverPlayerEntities = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    // Track server tower to local ECS entity mapping\n    const serverTowerEntities = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    // Track server summoned unit to local ECS entity mapping\n    const serverSummonedUnitEntities = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    // Experience system state\n    const [playerExperience, setPlayerExperience] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [playerLevel, setPlayerLevel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1);\n    // Mana system state for weapons\n    const [currentMana, setCurrentMana] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(150);\n    const [maxMana, setMaxMana] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(150);\n    // Track current weapon for mana management\n    const [currentWeapon, setCurrentWeapon] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.BOW);\n    // PVP Reanimate Effect Management\n    const [pvpReanimateEffects, setPvpReanimateEffects] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const nextReanimateEffectId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    // PVP Smite Effect Management\n    const [pvpSmiteEffects, setPvpSmiteEffects] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const nextSmiteEffectId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    // PVP DeathGrasp Effect Management\n    const [pvpDeathGraspEffects, setPvpDeathGraspEffects] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const nextDeathGraspEffectId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    // PVP DeathGrasp Pull Management\n    const [pvpDeathGraspPulls, setPvpDeathGraspPulls] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const nextDeathGraspPullId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    // PVP Venom Effect Management\n    const [pvpVenomEffects, setPvpVenomEffects] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const nextVenomEffectId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    // PVP Debuff Management\n    const [pvpDebuffEffects, setPvpDebuffEffects] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const nextDebuffEffectId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    // PVP Frost Nova Effect Management\n    const [pvpFrostNovaEffects, setPvpFrostNovaEffects] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const nextFrostNovaEffectId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    // Function to create venom effect on PVP players\n    // Function to create debuff effect on PVP players\n    const createPvpDebuffEffect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(playerId, debuffType, position) {\n        let duration = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 5000;\n        // Debug: Check if this is the local player\n        const isLocalPlayer = playerId === (socket === null || socket === void 0 ? void 0 : socket.id);\n        const debuffEffect = {\n            id: nextDebuffEffectId.current++,\n            playerId,\n            debuffType,\n            position: position.clone(),\n            startTime: Date.now(),\n            duration\n        };\n        // Use batched updates for debuff effects\n        _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n            {\n                type: \"add\",\n                effectType: \"debuff\",\n                setter: setPvpDebuffEffects,\n                data: debuffEffect\n            }\n        ]);\n        // Apply the debuff to the local player's movement if this is targeting us\n        if (isLocalPlayer && playerEntity) {\n            const playerMovement = playerEntity.getComponent(_ecs_components_Movement__WEBPACK_IMPORTED_MODULE_8__.Movement);\n            if (playerMovement) {\n                if (debuffType === \"frozen\") {\n                    playerMovement.freeze(duration);\n                } else if (debuffType === \"slowed\") {\n                    playerMovement.slow(duration, 0.5); // 50% speed reduction\n                } else if (debuffType === \"stunned\") {\n                    playerMovement.freeze(duration); // Stun uses same movement restriction as freeze\n                }\n            }\n        }\n        // Clean up debuff effect after duration using batched updates\n        setTimeout(()=>{\n            _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n                {\n                    type: \"remove\",\n                    effectType: \"debuff\",\n                    setter: setPvpDebuffEffects,\n                    filterId: debuffEffect.id\n                }\n            ]);\n        }, debuffEffect.duration);\n    }, [\n        socket === null || socket === void 0 ? void 0 : socket.id,\n        playerEntity\n    ]);\n    // Function to create frozen effect on PVP players (called by PVPFrostNovaManager)\n    const createPvpFrozenEffect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((playerId, position)=>{\n        // Debug: Check if this is the local player\n        const isLocalPlayer = playerId === (socket === null || socket === void 0 ? void 0 : socket.id);\n        // Create the frozen debuff effect (3 second freeze)\n        createPvpDebuffEffect(playerId, \"frozen\", position, 5000);\n        // Broadcast debuff effect to all players so they can see it\n        if (broadcastPlayerDebuff) {\n            broadcastPlayerDebuff(playerId, \"frozen\", 5000, {\n                position: {\n                    x: position.x,\n                    y: position.y,\n                    z: position.z\n                }\n            });\n        }\n    }, [\n        createPvpDebuffEffect,\n        broadcastPlayerDebuff\n    ]);\n    // Function to create reanimate effect on PVP players\n    const createPvpReanimateEffect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((playerId, position)=>{\n        const reanimateEffect = {\n            id: nextReanimateEffectId.current++,\n            playerId,\n            position: position.clone(),\n            startTime: Date.now(),\n            duration: 1500 // 1.5 seconds reanimate duration (matches Reanimate component)\n        };\n        // Use batched updates for reanimate effects\n        _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n            {\n                type: \"add\",\n                effectType: \"reanimate\",\n                setter: setPvpReanimateEffects,\n                data: reanimateEffect\n            }\n        ]);\n        // Clean up reanimate effect after duration using batched updates\n        setTimeout(()=>{\n            _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n                {\n                    type: \"remove\",\n                    effectType: \"reanimate\",\n                    setter: setPvpReanimateEffects,\n                    filterId: reanimateEffect.id\n                }\n            ]);\n        }, reanimateEffect.duration);\n    }, []);\n    // Function to create smite effect on PVP players\n    const createPvpSmiteEffect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((playerId, position, onDamageDealt)=>{\n        const smiteEffect = {\n            id: nextSmiteEffectId.current++,\n            playerId,\n            position: position.clone(),\n            startTime: Date.now(),\n            duration: 900,\n            onDamageDealt: onDamageDealt // Include healing callback\n        };\n        // Use batched updates for smite effects\n        _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n            {\n                type: \"add\",\n                effectType: \"smite\",\n                setter: setPvpSmiteEffects,\n                data: smiteEffect\n            }\n        ]);\n        // Clean up smite effect after duration using batched updates\n        setTimeout(()=>{\n            _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n                {\n                    type: \"remove\",\n                    effectType: \"smite\",\n                    setter: setPvpSmiteEffects,\n                    filterId: smiteEffect.id\n                }\n            ]);\n        }, smiteEffect.duration);\n    }, []);\n    // Function to create death grasp effect on PVP players\n    const createPvpDeathGraspEffect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((playerId, startPosition, direction)=>{\n        const deathGraspEffect = {\n            id: nextDeathGraspEffectId.current++,\n            playerId,\n            startPosition: startPosition.clone(),\n            direction: direction.clone(),\n            startTime: Date.now(),\n            duration: 1200,\n            pullTriggered: false\n        };\n        // Use batched updates for death grasp effects\n        _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n            {\n                type: \"add\",\n                effectType: \"deathgrasp\",\n                setter: setPvpDeathGraspEffects,\n                data: deathGraspEffect\n            }\n        ]);\n        // Clean up death grasp effect after duration using batched updates\n        setTimeout(()=>{\n            _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n                {\n                    type: \"remove\",\n                    effectType: \"deathgrasp\",\n                    setter: setPvpDeathGraspEffects,\n                    filterId: deathGraspEffect.id\n                }\n            ]);\n        }, deathGraspEffect.duration);\n    }, []);\n    // Function to create death grasp pull effect on PVP players\n    const createPvpDeathGraspPull = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((targetPlayerId, casterPosition)=>{\n        console.log(\"\\uD83C\\uDFA3 Creating DeathGraspPull effect for target \".concat(targetPlayerId, \" from position:\"), casterPosition);\n        const deathGraspPull = {\n            id: nextDeathGraspPullId.current++,\n            targetPlayerId,\n            casterPosition: casterPosition.clone(),\n            startTime: Date.now(),\n            duration: 600,\n            isActive: true\n        };\n        console.log(\"\\uD83C\\uDFA3 DeathGraspPull created with ID \".concat(deathGraspPull.id));\n        // Use batched updates for death grasp pulls\n        _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n            {\n                type: \"add\",\n                effectType: \"deathgrasp\",\n                setter: setPvpDeathGraspPulls,\n                data: deathGraspPull\n            }\n        ]);\n        // Clean up death grasp pull after duration using batched updates\n        setTimeout(()=>{\n            _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n                {\n                    type: \"remove\",\n                    effectType: \"deathgrasp\",\n                    setter: setPvpDeathGraspPulls,\n                    filterId: deathGraspPull.id\n                }\n            ]);\n        }, deathGraspPull.duration);\n    }, []);\n    // Function to create frost nova effect on PVP players\n    const createPvpFrostNovaEffect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((playerId, position)=>{\n        const frostNovaEffect = {\n            id: nextFrostNovaEffectId.current++,\n            playerId,\n            position: position.clone(),\n            startTime: Date.now(),\n            duration: 1200 // 1.2 seconds frost nova duration (matches FrostNovaManager)\n        };\n        // Use batched updates for frost nova effects\n        _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n            {\n                type: \"add\",\n                effectType: \"frostNova\",\n                setter: setPvpFrostNovaEffects,\n                data: frostNovaEffect\n            }\n        ]);\n        // Clean up frost nova effect after duration using batched updates\n        setTimeout(()=>{\n            _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n                {\n                    type: \"remove\",\n                    effectType: \"frostNova\",\n                    setter: setPvpFrostNovaEffects,\n                    filterId: frostNovaEffect.id\n                }\n            ]);\n        }, frostNovaEffect.duration);\n    }, []);\n    const createPvpVenomEffect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((playerId, position)=>{\n        // Debug: Check if this is the local player\n        const isLocalPlayer = playerId === (socket === null || socket === void 0 ? void 0 : socket.id);\n        // SAFETY CHECK: Don't create venom effects on the local player\n        if (isLocalPlayer) {\n            return;\n        }\n        const venomEffect = {\n            id: nextVenomEffectId.current++,\n            playerId,\n            position: position.clone(),\n            startTime: Date.now(),\n            duration: 6000 // 6 seconds venom duration\n        };\n        // Use batched updates for venom effects\n        _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n            {\n                type: \"add\",\n                effectType: \"venom\",\n                setter: setPvpVenomEffects,\n                data: venomEffect\n            }\n        ]);\n        // Apply DoT damage over time\n        const venomDamagePerSecond = 17;\n        const tickInterval = 1000; // 1 second per tick\n        let tickCount = 0;\n        const maxTicks = 6; // 6 seconds total\n        const venomInterval = setInterval(()=>{\n            tickCount++;\n            if (tickCount > maxTicks) {\n                clearInterval(venomInterval);\n                return;\n            }\n            // Apply venom damage\n            if (broadcastPlayerDamage) {\n                broadcastPlayerDamage(playerId, venomDamagePerSecond);\n            }\n        }, tickInterval);\n        // Clean up venom effect after duration using batched updates\n        setTimeout(()=>{\n            _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchEffectUpdates([\n                {\n                    type: \"remove\",\n                    effectType: \"venom\",\n                    setter: setPvpVenomEffects,\n                    filterId: venomEffect.id\n                }\n            ]);\n        }, venomEffect.duration);\n    }, [\n        socket === null || socket === void 0 ? void 0 : socket.id,\n        broadcastPlayerDamage\n    ]);\n    // Function to handle wave completion and award experience\n    const handleWaveComplete = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        console.log(\"\\uD83C\\uDF0A Wave completed! Awarding 10 EXP to both players\");\n        // Award 10 EXP to BOTH players when a wave completes\n        const allPlayerIds = Array.from(players.keys());\n        allPlayerIds.forEach((playerId)=>{\n            if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                // Local player gets the experience\n                setPlayerExperience((prev)=>{\n                    const newExp = prev + 10;\n                    // Check for level up\n                    const newLevel = _utils_ExperienceSystem__WEBPACK_IMPORTED_MODULE_53__.ExperienceSystem.getLevelFromExperience(newExp);\n                    if (newLevel > playerLevel) {\n                        setPlayerLevel(newLevel);\n                        console.log(\"\\uD83C\\uDF89 Level up! Player reached level \".concat(newLevel));\n                        // Update max health based on new level\n                        if (playerEntity) {\n                            const health = playerEntity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                            if (health) {\n                                const newMaxHealth = _utils_ExperienceSystem__WEBPACK_IMPORTED_MODULE_53__.ExperienceSystem.getMaxHealthForLevel(newLevel);\n                                const oldMaxHealth = health.maxHealth;\n                                // Update max health and scale current health proportionally\n                                health.setMaxHealth(newMaxHealth);\n                                // Synchronize the updated health with server and other players\n                                updatePlayerHealth(health.currentHealth, health.maxHealth);\n                                console.log(\"\\uD83D\\uDC9A Health updated: \".concat(oldMaxHealth, \" -> \").concat(newMaxHealth, \" HP (current: \").concat(health.currentHealth, \"/\").concat(health.maxHealth, \")\"));\n                            }\n                        }\n                    }\n                    console.log(\"\\uD83C\\uDFAF Local player \".concat(playerId, \" gained 10 EXP from wave completion (total: \").concat(newExp, \")\"));\n                    return newExp;\n                });\n            } else {\n                // Update opponent's experience (will be handled by server in real implementation)\n                console.log(\"\\uD83C\\uDFAF Opponent \".concat(playerId, \" gained 10 EXP from wave completion\"));\n            }\n        });\n    }, [\n        socket === null || socket === void 0 ? void 0 : socket.id,\n        playerLevel,\n        playerEntity,\n        players\n    ]);\n    // Notify parent component of experience updates\n    react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(()=>{\n        if (onExperienceUpdate) {\n            onExperienceUpdate(playerExperience, playerLevel);\n        }\n    }, [\n        playerExperience,\n        playerLevel,\n        onExperienceUpdate\n    ]);\n    const [weaponState, setWeaponState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        currentWeapon: _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.BOW,\n        currentSubclass: _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponSubclass.ELEMENTAL,\n        isCharging: false,\n        chargeProgress: 0,\n        isSwinging: false,\n        isSpinning: false,\n        swordComboStep: 1,\n        isDivineStorming: false,\n        isSwordCharging: false,\n        isDeflecting: false,\n        isViperStingCharging: false,\n        viperStingChargeProgress: 0,\n        isBarrageCharging: false,\n        barrageChargeProgress: 0,\n        isCobraShotCharging: false,\n        cobraShotChargeProgress: 0,\n        isSkyfalling: false,\n        isBackstabbing: false,\n        isSundering: false\n    });\n    // Track previous weapon state for change detection\n    const prevWeaponRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        weapon: _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.BOW,\n        subclass: _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponSubclass.ELEMENTAL\n    });\n    // Track multiplayer player states for animations\n    const [multiplayerPlayerStates, setMultiplayerPlayerStates] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Map());\n    // Perfect shot system\n    const { createPowershotEffect } = (0,_components_projectiles_useBowPowershot__WEBPACK_IMPORTED_MODULE_50__.useBowPowershot)();\n    // Optimized PVP effects with object pooling\n    const { createOptimizedVenomEffect, createOptimizedDebuffEffect, getPoolStats } = (0,_components_pvp_OptimizedPVPManagers__WEBPACK_IMPORTED_MODULE_40__.useOptimizedPVPEffects)();\n    // Mana regeneration for weapons that use mana (Scythe and Runeblade)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SCYTHE || currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.RUNEBLADE) {\n            const regenRate = currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SCYTHE ? 5 : 4; // 10 mana/s for Scythe, 8 mana/s for Runeblade\n            const interval = setInterval(()=>{\n                setCurrentMana((prev)=>Math.min(maxMana, prev + regenRate));\n            }, 500);\n            return ()=>clearInterval(interval);\n        }\n    }, [\n        currentWeapon,\n        maxMana\n    ]);\n    // Sync currentWeapon with weaponState\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setCurrentWeapon(weaponState.currentWeapon);\n    }, [\n        weaponState.currentWeapon\n    ]);\n    // Weapon switching - set max mana and reset current mana based on weapon type\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let newMaxMana = 0;\n        if (currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SCYTHE) {\n            newMaxMana = 250;\n        } else if (currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.RUNEBLADE) {\n            newMaxMana = 150;\n        }\n        if (newMaxMana > 0) {\n            setMaxMana(newMaxMana);\n            setCurrentMana(newMaxMana); // Start with full mana when switching\n        }\n    }, [\n        currentWeapon\n    ]);\n    // Function to consume mana for weapon abilities (Scythe and Runeblade)\n    const consumeMana = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((amount)=>{\n        console.log(\"\\uD83D\\uDD0D DEBUG: consumeMana called - currentWeapon:\", currentWeapon, \"amount:\", amount);\n        if (currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SCYTHE || currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.RUNEBLADE) {\n            setCurrentMana((prev)=>{\n                const newValue = Math.max(0, prev - amount);\n                console.log(\"\\uD83D\\uDD0D DEBUG: consumeMana - old mana:\", prev, \"new mana:\", newValue);\n                return newValue;\n            });\n        }\n    }, [\n        currentWeapon\n    ]);\n    // Function to check if current weapon has enough mana\n    const hasMana = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((amount)=>{\n        console.log(\"\\uD83D\\uDD0D DEBUG: hasMana called - currentMana:\", currentMana, \"amount:\", amount);\n        const result = currentMana >= amount;\n        console.log(\"\\uD83D\\uDD0D DEBUG: hasMana result:\", result);\n        return result;\n    }, [\n        currentMana\n    ]);\n    // Set up PVP event listeners for player actions and damage\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!socket) return;\n        const handlePlayerAttack = (data)=>{\n            if (data.playerId !== socket.id && engineRef.current) {\n                var _data_animationData;\n                // Handle perfect shot beam effects\n                if (data.attackType === \"bow_release\" && ((_data_animationData = data.animationData) === null || _data_animationData === void 0 ? void 0 : _data_animationData.isPerfectShot)) {\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.direction.x, data.direction.y, data.direction.z);\n                    // Get the player's subclass from the players map\n                    const player = players.get(data.playerId);\n                    const subclass = (player === null || player === void 0 ? void 0 : player.subclass) || _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponSubclass.ELEMENTAL;\n                    // Create perfect shot beam effect\n                    createPowershotEffect(position, direction, subclass, true, true // isElementalShotsUnlocked\n                    );\n                }\n                // Handle special ability projectiles that need custom visual effects\n                if (data.attackType === \"viper_sting_projectile\") {\n                    // Skip processing our own viper sting projectiles to prevent self-damage\n                    if (data.playerId === socket.id) {\n                        return;\n                    }\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.direction.x, data.direction.y, data.direction.z);\n                    // Create the ECS projectile for damage\n                    const projectileSystem = engineRef.current.getWorld().getSystem(_systems_ProjectileSystem__WEBPACK_IMPORTED_MODULE_19__.ProjectileSystem);\n                    if (projectileSystem) {\n                        const attackerEntityId = serverPlayerEntities.current.get(data.playerId) || -Math.abs(data.playerId.length * 1000 + Date.now() % 1000);\n                        // Create Viper Sting projectile for damage\n                        projectileSystem.createProjectile(engineRef.current.getWorld(), position, direction, attackerEntityId, {\n                            speed: 16,\n                            damage: 61,\n                            lifetime: 5,\n                            piercing: true,\n                            opacity: 0.8,\n                            projectileType: \"viper_sting\"\n                        });\n                    }\n                    // Trigger visual effect for Viper Sting projectile\n                    const { triggerGlobalViperSting } = __webpack_require__(/*! @/components/projectiles/ViperStingManager */ \"(app-pages-browser)/./src/components/projectiles/ViperStingManager.tsx\");\n                    // Update the Viper Sting parent ref to the other player's position for visual effect\n                    const originalPosition = viperStingParentRef.current.position.clone();\n                    const originalQuaternion = {\n                        ...viperStingParentRef.current.quaternion\n                    };\n                    // Temporarily set the parent ref to the other player's position and direction\n                    viperStingParentRef.current.position.copy(position);\n                    // Calculate quaternion from the other player's direction\n                    const angle = Math.atan2(direction.x, direction.z);\n                    viperStingParentRef.current.quaternion = {\n                        x: 0,\n                        y: Math.sin(angle / 2),\n                        z: 0,\n                        w: Math.cos(angle / 2)\n                    };\n                    // Trigger the Viper Sting visual effect\n                    triggerGlobalViperSting();\n                    // Restore original parent ref position and rotation\n                    setTimeout(()=>{\n                        viperStingParentRef.current.position.copy(originalPosition);\n                        viperStingParentRef.current.quaternion = originalQuaternion;\n                    }, 100);\n                    return;\n                }\n                if (data.attackType === \"cobra_shot_projectile\") {\n                    // Note: Cobra Shot damage is handled by PVPCobraShotManager through visual projectiles\n                    // No need to create ECS projectiles that show up as regular arrows\n                    // Trigger visual effect for Cobra Shot projectile (this creates the visual projectile that PVPCobraShotManager monitors)\n                    const { triggerGlobalCobraShot } = __webpack_require__(/*! @/components/projectiles/CobraShotManager */ \"(app-pages-browser)/./src/components/projectiles/CobraShotManager.tsx\");\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.direction.x, data.direction.y, data.direction.z);\n                    triggerGlobalCobraShot(position, direction);\n                    return;\n                }\n                // Handle sword charge hit attacks\n                if (data.attackType === \"sword_charge_hit\") {\n                    // Validate animationData object exists and has required properties\n                    if (!data.animationData || typeof data.animationData.damage !== \"number\" || typeof data.animationData.targetId !== \"number\") {\n                        return;\n                    }\n                    // Check if this hit targets the local player\n                    const targetEntityId = serverPlayerEntities.current.get((socket === null || socket === void 0 ? void 0 : socket.id) || \"\");\n                    if (targetEntityId === data.animationData.targetId) {\n                        // Apply damage directly to local player\n                        if (playerEntity && broadcastPlayerDamage && (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                            const health = playerEntity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                            if (health) {\n                                // Apply damage through PVP system\n                                broadcastPlayerDamage(socket.id, data.animationData.damage);\n                            }\n                        }\n                    }\n                    return; // Don't process as regular projectile\n                }\n                // Handle regular projectile attacks - create projectiles that can hit the local player\n                const projectileTypes = [\n                    \"regular_arrow\",\n                    \"charged_arrow\",\n                    \"entropic_bolt\",\n                    \"crossentropy_bolt\",\n                    \"perfect_shot\",\n                    \"barrage_projectile\"\n                ];\n                if (projectileTypes.includes(data.attackType)) {\n                    // Create a projectile that can damage the local player\n                    const projectileSystem = engineRef.current.getWorld().getSystem(_systems_ProjectileSystem__WEBPACK_IMPORTED_MODULE_19__.ProjectileSystem);\n                    if (projectileSystem) {\n                        // Use pooled Vector3 objects for better performance\n                        const position = _utils_PVPObjectPool__WEBPACK_IMPORTED_MODULE_41__.pvpObjectPool.acquireVector3(data.position.x, data.position.y, data.position.z);\n                        const direction = _utils_PVPObjectPool__WEBPACK_IMPORTED_MODULE_41__.pvpObjectPool.acquireVector3(data.direction.x, data.direction.y, data.direction.z);\n                        // Get the attacker's local ECS entity ID (if it exists) or use a unique negative ID\n                        const attackerEntityId = serverPlayerEntities.current.get(data.playerId) || -Math.abs(data.playerId.length * 1000 + Date.now() % 1000);\n                        // Create appropriate projectile type with PVP damage enabled\n                        switch(data.attackType){\n                            case \"regular_arrow\":\n                                projectileSystem.createProjectile(engineRef.current.getWorld(), position, direction, attackerEntityId, {\n                                    speed: 25,\n                                    damage: 10,\n                                    lifetime: 3,\n                                    maxDistance: 25,\n                                    opacity: 0.8\n                                } // PVP damage handled by CombatSystem\n                                );\n                                break;\n                            case \"charged_arrow\":\n                                projectileSystem.createChargedArrowProjectile(engineRef.current.getWorld(), position, direction, attackerEntityId, {\n                                    speed: 35,\n                                    damage: 50,\n                                    lifetime: 3,\n                                    piercing: true,\n                                    opacity: 0.8\n                                });\n                                break;\n                            case \"entropic_bolt\":\n                                projectileSystem.createEntropicBoltProjectile(engineRef.current.getWorld(), position, direction, attackerEntityId, {\n                                    speed: 20,\n                                    damage: 20,\n                                    lifetime: 1.75,\n                                    piercing: false,\n                                    opacity: 0.8\n                                });\n                                break;\n                            case \"crossentropy_bolt\":\n                                projectileSystem.createCrossentropyBoltProjectile(engineRef.current.getWorld(), position, direction, attackerEntityId, {\n                                    speed: 15,\n                                    damage: 90,\n                                    lifetime: 2.5,\n                                    piercing: false,\n                                    opacity: 0.8\n                                });\n                                break;\n                            case \"perfect_shot\":\n                                projectileSystem.createChargedArrowProjectile(engineRef.current.getWorld(), position, direction, attackerEntityId, {\n                                    speed: 40,\n                                    damage: 75,\n                                    lifetime: 3,\n                                    piercing: true,\n                                    opacity: 1.0\n                                });\n                                break;\n                            case \"barrage_projectile\":\n                                // Create Barrage projectiles for PVP\n                                const barrageEntity = projectileSystem.createProjectile(engineRef.current.getWorld(), position, direction, attackerEntityId, {\n                                    speed: 22,\n                                    damage: 30,\n                                    lifetime: 3,\n                                    maxDistance: 25,\n                                    piercing: false,\n                                    opacity: 0.8\n                                });\n                                // Mark as barrage arrow for proper visual rendering\n                                const renderer = barrageEntity.getComponent(_ecs_components_Renderer__WEBPACK_IMPORTED_MODULE_11__.Renderer);\n                                if (renderer === null || renderer === void 0 ? void 0 : renderer.mesh) {\n                                    renderer.mesh.userData.isBarrageArrow = true;\n                                    renderer.mesh.userData.isRegularArrow = false;\n                                }\n                                break;\n                        }\n                        // Release pooled Vector3 objects back to pool after use\n                        _utils_PVPObjectPool__WEBPACK_IMPORTED_MODULE_41__.pvpObjectPool.releaseVector3(position);\n                        _utils_PVPObjectPool__WEBPACK_IMPORTED_MODULE_41__.pvpObjectPool.releaseVector3(direction);\n                    }\n                }\n                // Update the player state to show attack animation using batched updates\n                const animationData = data.animationData || {};\n                const animationUpdateTime = Date.now();\n                _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchPlayerStateUpdates(setMultiplayerPlayerStates, [\n                    {\n                        playerId: data.playerId,\n                        stateUpdate: {\n                            isSwinging: data.attackType.includes(\"swing\") || data.attackType.includes(\"sword\") && !data.attackType.includes(\"charge\"),\n                            isCharging: data.attackType.includes(\"bow\") && data.attackType.includes(\"charge\"),\n                            isSpinning: data.attackType.includes(\"scythe\") || data.attackType.includes(\"entropic_bolt\") || data.attackType.includes(\"crossentropy_bolt\") || data.attackType.includes(\"sword_charge_spin\") || animationData.isSpinning || false,\n                            isSwordCharging: data.attackType === \"sword_charge_spin\" || data.attackType === \"sword_charge_start\" || animationData.isSpinning || animationData.isSwordCharging || false,\n                            swordComboStep: animationData.comboStep || 1,\n                            chargeProgress: animationData.chargeProgress || 0,\n                            lastAttackType: data.attackType,\n                            lastAttackTime: animationUpdateTime,\n                            lastAnimationUpdate: animationUpdateTime\n                        }\n                    }\n                ]);\n                // Get the player's weapon and subclass for proper animation timing\n                const player = players.get(data.playerId);\n                const playerWeapon = (player === null || player === void 0 ? void 0 : player.weapon) || _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.BOW;\n                const playerSubclass = player === null || player === void 0 ? void 0 : player.subclass;\n                // Calculate weapon-specific animation duration based on actual weapon timing\n                // These durations match the real animation calculations in each weapon component\n                let resetDuration = 100; // Default\n                // Special handling for sword charge attacks\n                if (data.attackType === \"sword_charge_spin\") {\n                    // Charge spin lasts about 1 full rotation at 27.5 rotation speed\n                    // (Math.PI * 2) / 27.5 / (1/60)  685ms for one full rotation\n                    resetDuration = 50;\n                } else if (data.attackType === \"sword_charge_start\") {\n                    // Charge movement lasts about 1.5 seconds (matches ControlSystem chargeDuration)\n                    resetDuration = 450;\n                } else {\n                    switch(playerWeapon){\n                        case _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SCYTHE:\n                            // Check if dual wielding (Abyssal subclass level 2+)\n                            if (playerSubclass === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponSubclass.ABYSSAL) {\n                                // Dual scythe timing: similar to Sabres with delays\n                                resetDuration = 350;\n                            } else {\n                                // Single scythe: swingProgress += delta * 8 until >= Math.PI * 0.85\n                                // At 60fps: (Math.PI * 0.85) / 8 / (1/60)  335ms\n                                resetDuration = 167.5;\n                            }\n                            break;\n                        case _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SWORD:\n                            // swingProgress += delta * 6.75 until >= Math.PI * 0.55 (or 0.9 for combo step 3)\n                            // At 60fps: (Math.PI * 0.55) / 6.75 / (1/60)  400ms\n                            // Note: 3rd combo hit takes longer but we use average timing for multiplayer sync\n                            resetDuration = 80;\n                            break;\n                        case _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SABRES:\n                            // Two swings with delays - total duration roughly 350ms\n                            resetDuration = 275;\n                            break;\n                        case _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.RUNEBLADE:\n                            // Same timing as sword: swingProgress += delta * 6.75 until >= Math.PI * 0.55 (or 0.9 for combo step 3)\n                            // At 60fps: (Math.PI * 0.55) / 6.75 / (1/60)  400ms\n                            // Note: 3rd combo hit takes longer but we use average timing for multiplayer sync\n                            resetDuration = 80;\n                            break;\n                        case _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.BOW:\n                            resetDuration = 300; // Quick shots\n                            break;\n                        default:\n                            resetDuration = 100; // Default for other weapons\n                    }\n                }\n                // Schedule animation reset using batched updates\n                setTimeout(()=>{\n                    _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchPlayerStateUpdates(setMultiplayerPlayerStates, [\n                        {\n                            playerId: data.playerId,\n                            stateUpdate: {\n                                isSwinging: false,\n                                isCharging: false,\n                                isSpinning: false,\n                                isSwordCharging: false\n                            }\n                        }\n                    ]);\n                }, resetDuration);\n            }\n        };\n        const handlePlayerAbility = (data)=>{\n            if (data.playerId !== socket.id) {\n                // Handle special abilities like Divine Storm, Viper Sting, and Barrage\n                if (data.abilityType === \"divine_storm\") {\n                    // Trigger visual Divine Storm effect at the player's position\n                    const position = _utils_PVPObjectPool__WEBPACK_IMPORTED_MODULE_41__.pvpObjectPool.acquireVector3(data.position.x, data.position.y, data.position.z);\n                    (0,_components_weapons_DivineStormManager__WEBPACK_IMPORTED_MODULE_43__.triggerGlobalDivineStorm)(position, data.playerId);\n                    // Release pooled Vector3 after use\n                    _utils_PVPObjectPool__WEBPACK_IMPORTED_MODULE_41__.pvpObjectPool.releaseVector3(position);\n                    // Use batched updates for Divine Storm animation\n                    _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchPlayerStateUpdates(setMultiplayerPlayerStates, [\n                        {\n                            playerId: data.playerId,\n                            stateUpdate: {\n                                isDivineStorming: true,\n                                isSpinning: true,\n                                isSwordCharging: false\n                            }\n                        }\n                    ]);\n                    // Reset Divine Storm state after duration using batched updates\n                    setTimeout(()=>{\n                        _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchPlayerStateUpdates(setMultiplayerPlayerStates, [\n                            {\n                                playerId: data.playerId,\n                                stateUpdate: {\n                                    isDivineStorming: false,\n                                    isSpinning: false // Reset spinning animation\n                                }\n                            }\n                        ]);\n                    }, 4000); // Divine Storm lasts 4 seconds\n                } else if (data.abilityType === \"viper_sting\") {\n                    // Skip processing our own viper sting abilities to prevent any potential issues\n                    if (data.playerId === socket.id) {\n                        return;\n                    }\n                    // Trigger visual effect - this should create the proper Viper Sting projectiles\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.direction.x, data.direction.y, data.direction.z);\n                    // Update the Viper Sting parent ref to the other player's position for visual effect\n                    const originalPosition = viperStingParentRef.current.position.clone();\n                    const originalQuaternion = {\n                        ...viperStingParentRef.current.quaternion\n                    };\n                    // Temporarily set the parent ref to the other player's position and direction\n                    viperStingParentRef.current.position.copy(position);\n                    // Calculate quaternion from the other player's direction\n                    const angle = Math.atan2(direction.x, direction.z);\n                    viperStingParentRef.current.quaternion = {\n                        x: 0,\n                        y: Math.sin(angle / 2),\n                        z: 0,\n                        w: Math.cos(angle / 2)\n                    };\n                    // Trigger the Viper Sting visual effect\n                    const success = (0,_components_projectiles_ViperStingManager__WEBPACK_IMPORTED_MODULE_51__.triggerGlobalViperSting)();\n                    // Restore original parent ref position after a short delay\n                    setTimeout(()=>{\n                        viperStingParentRef.current.position.copy(originalPosition);\n                        viperStingParentRef.current.quaternion = originalQuaternion;\n                    }, 100);\n                    setMultiplayerPlayerStates((prev)=>{\n                        const updated = new Map(prev);\n                        const currentState = updated.get(data.playerId) || {\n                            isCharging: false,\n                            chargeProgress: 0,\n                            isSwinging: false,\n                            swordComboStep: 1,\n                            isDivineStorming: false,\n                            isSpinning: false,\n                            isSwordCharging: false,\n                            isDeflecting: false,\n                            isViperStingCharging: false,\n                            viperStingChargeProgress: 0,\n                            isBarrageCharging: false,\n                            barrageChargeProgress: 0,\n                            isCobraShotCharging: false,\n                            cobraShotChargeProgress: 0,\n                            isSkyfalling: false,\n                            isBackstabbing: false\n                        };\n                        updated.set(data.playerId, {\n                            ...currentState,\n                            isViperStingCharging: true,\n                            viperStingChargeProgress: 1.0 // Full charge when triggered\n                        });\n                        // Reset Viper Sting state after duration\n                        setTimeout(()=>{\n                            setMultiplayerPlayerStates((prev)=>{\n                                const updated = new Map(prev);\n                                const state = updated.get(data.playerId);\n                                if (state) {\n                                    updated.set(data.playerId, {\n                                        ...state,\n                                        isViperStingCharging: false,\n                                        viperStingChargeProgress: 0\n                                    });\n                                }\n                                return updated;\n                            });\n                        }, 2000); // Viper Sting lasts 2 seconds\n                        return updated;\n                    });\n                } else if (data.abilityType === \"barrage\") {\n                    // Skip processing our own barrage abilities to prevent any potential issues\n                    if (data.playerId === socket.id) {\n                        return;\n                    }\n                    // Trigger visual effect\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.direction.x, data.direction.y, data.direction.z);\n                    (0,_components_projectiles_BarrageManager__WEBPACK_IMPORTED_MODULE_52__.triggerGlobalBarrage)(position, direction);\n                    setMultiplayerPlayerStates((prev)=>{\n                        const updated = new Map(prev);\n                        const currentState = updated.get(data.playerId) || {\n                            isCharging: false,\n                            chargeProgress: 0,\n                            isSwinging: false,\n                            swordComboStep: 1,\n                            isDivineStorming: false,\n                            isSpinning: false,\n                            isSwordCharging: false,\n                            isDeflecting: false,\n                            isViperStingCharging: false,\n                            viperStingChargeProgress: 0,\n                            isBarrageCharging: false,\n                            barrageChargeProgress: 0,\n                            isCobraShotCharging: false,\n                            cobraShotChargeProgress: 0,\n                            isSkyfalling: false,\n                            isBackstabbing: false\n                        };\n                        updated.set(data.playerId, {\n                            ...currentState,\n                            isBarrageCharging: true,\n                            barrageChargeProgress: 1.0 // Full charge when triggered\n                        });\n                        // Reset Barrage state after duration\n                        setTimeout(()=>{\n                            setMultiplayerPlayerStates((prev)=>{\n                                const updated = new Map(prev);\n                                const state = updated.get(data.playerId);\n                                if (state) {\n                                    updated.set(data.playerId, {\n                                        ...state,\n                                        isBarrageCharging: false,\n                                        barrageChargeProgress: 0\n                                    });\n                                }\n                                return updated;\n                            });\n                        }, 1500); // Barrage lasts 1.5 seconds\n                        return updated;\n                    });\n                } else if (data.abilityType === \"frost_nova\") {\n                    // Create frost nova visual effect at the player's position\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    createPvpFrostNovaEffect(data.playerId, position);\n                // Note: PVP damage and freeze effects are now handled by PVPFrostNovaManager\n                } else if (data.abilityType === \"reanimate\") {\n                    // Create reanimate visual effect at the player's position\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    createPvpReanimateEffect(data.playerId, position);\n                } else if (data.abilityType === \"smite\") {\n                    // Create smite visual effect at the player's position\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    createPvpSmiteEffect(data.playerId, position, undefined); // No healing callback for remote players\n                } else if (data.abilityType === \"deathgrasp\") {\n                    // Create death grasp visual effect\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.direction.x, data.direction.y, data.direction.z);\n                    const targetPosition = position.clone().add(direction.clone().multiplyScalar(8));\n                    createPvpDeathGraspEffect(data.playerId, position, direction);\n                    // Find target player to pull (closest player in front of caster)\n                    let closestTarget = null;\n                    players.forEach((player)=>{\n                        if (player.id === data.playerId) return; // Don't pull self\n                        const playerPos = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(player.position.x, player.position.y, player.position.z);\n                        const distance = position.distanceTo(playerPos);\n                        // Check if player is in front of caster and within range\n                        const toPlayer = playerPos.clone().sub(position).normalize();\n                        const dotProduct = direction.dot(toPlayer);\n                        if (dotProduct > 0.5 && distance <= 8) {\n                            if (!closestTarget || distance < closestTarget.distance) {\n                                closestTarget = {\n                                    id: player.id,\n                                    distance\n                                };\n                            }\n                        }\n                    });\n                    // Pull the closest target player if found\n                    if (closestTarget !== null && closestTarget !== undefined) {\n                        const target = closestTarget;\n                        createPvpDeathGraspPull(target.id, position);\n                    }\n                } else if (data.abilityType === \"charge\") {\n                    setMultiplayerPlayerStates((prev)=>{\n                        const updated = new Map(prev);\n                        const currentState = updated.get(data.playerId) || {\n                            isCharging: false,\n                            chargeProgress: 0,\n                            isSwinging: false,\n                            swordComboStep: 1,\n                            isDivineStorming: false,\n                            isSpinning: false,\n                            isSwordCharging: false,\n                            isDeflecting: false,\n                            isViperStingCharging: false,\n                            viperStingChargeProgress: 0,\n                            isBarrageCharging: false,\n                            barrageChargeProgress: 0,\n                            isCobraShotCharging: false,\n                            cobraShotChargeProgress: 0,\n                            isSkyfalling: false,\n                            isBackstabbing: false\n                        };\n                        updated.set(data.playerId, {\n                            ...currentState,\n                            isSwordCharging: true\n                        });\n                        // Reset Charge state after duration (charge lasts about 2 seconds)\n                        setTimeout(()=>{\n                            setMultiplayerPlayerStates((prev)=>{\n                                const updated = new Map(prev);\n                                const state = updated.get(data.playerId);\n                                if (state) {\n                                    updated.set(data.playerId, {\n                                        ...state,\n                                        isSwordCharging: false\n                                    });\n                                }\n                                return updated;\n                            });\n                        }, 2000);\n                        return updated;\n                    });\n                } else if (data.abilityType === \"deflect\") {\n                    // Trigger visual Deflect Shield effect at the player's position\n                    const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.direction.x, data.direction.y, data.direction.z);\n                    // Calculate rotation from direction for shield positioning\n                    const rotation = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, Math.atan2(direction.x, direction.z), 0);\n                    (0,_components_weapons_DeflectShieldManager__WEBPACK_IMPORTED_MODULE_44__.triggerGlobalDeflectShield)(position, rotation, data.playerId);\n                    setMultiplayerPlayerStates((prev)=>{\n                        const updated = new Map(prev);\n                        const currentState = updated.get(data.playerId) || {\n                            isCharging: false,\n                            chargeProgress: 0,\n                            isSwinging: false,\n                            swordComboStep: 1,\n                            isDivineStorming: false,\n                            isSpinning: false,\n                            isSwordCharging: false,\n                            isDeflecting: false,\n                            isViperStingCharging: false,\n                            viperStingChargeProgress: 0,\n                            isBarrageCharging: false,\n                            barrageChargeProgress: 0,\n                            isCobraShotCharging: false,\n                            cobraShotChargeProgress: 0,\n                            isSkyfalling: false,\n                            isBackstabbing: false\n                        };\n                        updated.set(data.playerId, {\n                            ...currentState,\n                            isDeflecting: true\n                        });\n                        // Reset Deflect state after duration (deflect lasts 3 seconds)\n                        setTimeout(()=>{\n                            setMultiplayerPlayerStates((prev)=>{\n                                const updated = new Map(prev);\n                                const state = updated.get(data.playerId);\n                                if (state) {\n                                    updated.set(data.playerId, {\n                                        ...state,\n                                        isDeflecting: false\n                                    });\n                                }\n                                return updated;\n                            });\n                        }, 3000);\n                        return updated;\n                    });\n                } else if (data.abilityType === \"skyfall\") {\n                    // Set the skyfall animation state for the attacking player\n                    setMultiplayerPlayerStates((prev)=>{\n                        const updated = new Map(prev);\n                        const currentState = updated.get(data.playerId) || {\n                            isCharging: false,\n                            chargeProgress: 0,\n                            isSwinging: false,\n                            swordComboStep: 1,\n                            isDivineStorming: false,\n                            isSpinning: false,\n                            isSwordCharging: false,\n                            isDeflecting: false,\n                            isViperStingCharging: false,\n                            viperStingChargeProgress: 0,\n                            isBarrageCharging: false,\n                            barrageChargeProgress: 0,\n                            isCobraShotCharging: false,\n                            cobraShotChargeProgress: 0,\n                            isSkyfalling: false,\n                            isBackstabbing: false\n                        };\n                        updated.set(data.playerId, {\n                            ...currentState,\n                            isSkyfalling: true\n                        });\n                        // Reset Skyfall state after duration (skyfall lasts about 3-4 seconds total)\n                        setTimeout(()=>{\n                            setMultiplayerPlayerStates((prev)=>{\n                                const updated = new Map(prev);\n                                const state = updated.get(data.playerId);\n                                if (state) {\n                                    updated.set(data.playerId, {\n                                        ...state,\n                                        isSkyfalling: false\n                                    });\n                                }\n                                return updated;\n                            });\n                        }, 1750); // Skyfall duration\n                        return updated;\n                    });\n                } else if (data.abilityType === \"backstab\") {\n                    // Backstab is an instant melee attack, so we need to:\n                    // 1. Calculate damage based on position relative to targets\n                    // 2. Apply damage to players in range\n                    // 3. Show brief animation state\n                    const attackerPosition = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.position.x, data.position.y, data.position.z);\n                    const attackerDirection = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.direction.x, data.direction.y, data.direction.z);\n                    // Set the backstab animation state for the attacking player\n                    setMultiplayerPlayerStates((prev)=>{\n                        const updated = new Map(prev);\n                        const currentState = updated.get(data.playerId) || {\n                            isCharging: false,\n                            chargeProgress: 0,\n                            isSwinging: false,\n                            swordComboStep: 1,\n                            isDivineStorming: false,\n                            isSpinning: false,\n                            isDeflecting: false,\n                            isSwordCharging: false,\n                            isViperStingCharging: false,\n                            viperStingChargeProgress: 0,\n                            isBarrageCharging: false,\n                            barrageChargeProgress: 0,\n                            isCobraShotCharging: false,\n                            cobraShotChargeProgress: 0,\n                            isSkyfalling: false,\n                            isBackstabbing: false\n                        };\n                        // Set backstab animation state\n                        updated.set(data.playerId, {\n                            ...currentState,\n                            isBackstabbing: true\n                        });\n                        // Reset backstab animation after duration\n                        setTimeout(()=>{\n                            setMultiplayerPlayerStates((prev)=>{\n                                const updated = new Map(prev);\n                                const currentState = updated.get(data.playerId);\n                                if (currentState) {\n                                    updated.set(data.playerId, {\n                                        ...currentState,\n                                        isBackstabbing: false\n                                    });\n                                }\n                                return updated;\n                            });\n                        }, 1000); // Match backstab duration\n                        return updated;\n                    });\n                    // Find the attacker player to get their rotation\n                    const attackerPlayer = players.get(data.playerId);\n                    if (attackerPlayer) {\n                        // Check if local player is in range and calculate damage\n                        const localPlayer = players.get((socket === null || socket === void 0 ? void 0 : socket.id) || \"\");\n                        if (localPlayer && (socket === null || socket === void 0 ? void 0 : socket.id) !== data.playerId) {\n                            const localPlayerPos = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(localPlayer.position.x, localPlayer.position.y, localPlayer.position.z);\n                            const distance = attackerPosition.distanceTo(localPlayerPos);\n                            if (distance <= 2.5) {\n                                // Check if attacker is in front of local player (cone attack)\n                                const directionToLocal = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3().subVectors(localPlayerPos, attackerPosition).normalize();\n                                const dotProduct = attackerDirection.dot(directionToLocal);\n                                const angleThreshold = Math.cos(Math.PI / 3); // 60 degree cone\n                                if (dotProduct >= angleThreshold) {\n                                    // Local player is in the attack cone, calculate backstab damage\n                                    let damage = 75; // Base damage\n                                    let isBackstab = false;\n                                    // Calculate local player's facing direction from their rotation\n                                    const localFacingDirection = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(Math.sin(localPlayer.rotation.y), 0, Math.cos(localPlayer.rotation.y)).normalize();\n                                    // Vector from local player to attacker\n                                    const attackerDirectionFromLocal = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3().subVectors(attackerPosition, localPlayerPos).normalize();\n                                    // Check if attacker is behind local player (dot product < 0 means opposite direction)\n                                    const behindDotProduct = localFacingDirection.dot(attackerDirectionFromLocal);\n                                    isBackstab = behindDotProduct < -0.3; // 70 degree cone behind target\n                                    if (isBackstab) {\n                                        damage = 150; // Backstab damage\n                                    }\n                                    // Apply damage to local player\n                                    if (broadcastPlayerDamage && (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                                        broadcastPlayerDamage(socket.id, damage, \"backstab\");\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    // Show brief backstab animation state\n                    setMultiplayerPlayerStates((prev)=>{\n                        const updated = new Map(prev);\n                        const currentState = updated.get(data.playerId) || {\n                            isCharging: false,\n                            chargeProgress: 0,\n                            isSwinging: false,\n                            swordComboStep: 1,\n                            isDivineStorming: false,\n                            isSpinning: false,\n                            isSwordCharging: false,\n                            isDeflecting: false,\n                            isViperStingCharging: false,\n                            viperStingChargeProgress: 0,\n                            isBarrageCharging: false,\n                            barrageChargeProgress: 0,\n                            isCobraShotCharging: false,\n                            cobraShotChargeProgress: 0,\n                            isSkyfalling: false,\n                            isBackstabbing: false\n                        };\n                        updated.set(data.playerId, {\n                            ...currentState,\n                            isSwinging: true // Brief swing animation for backstab\n                        });\n                        // Reset swing state after brief duration\n                        setTimeout(()=>{\n                            setMultiplayerPlayerStates((prev)=>{\n                                const updated = new Map(prev);\n                                const state = updated.get(data.playerId);\n                                if (state) {\n                                    updated.set(data.playerId, {\n                                        ...state,\n                                        isSwinging: false\n                                    });\n                                }\n                                return updated;\n                            });\n                        }, 300); // Brief 300ms animation\n                        return updated;\n                    });\n                }\n            }\n        };\n        const handlePlayerDamaged = (data)=>{\n            // If we are the target, apply damage to our player\n            if (data.targetPlayerId === socket.id && playerEntity) {\n                const health = playerEntity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                const shield = playerEntity.getComponent(_ecs_components_Shield__WEBPACK_IMPORTED_MODULE_10__.Shield);\n                if (health) {\n                    // Pass the entity so Health component can use Shield for damage absorption\n                    health.takeDamage(data.damage, Date.now() / 1000, playerEntity);\n                }\n            }\n        };\n        const handlePlayerAnimationState = (data)=>{\n            if (data.playerId !== socket.id) {\n                setMultiplayerPlayerStates((prev)=>{\n                    const updated = new Map(prev);\n                    const currentState = updated.get(data.playerId) || {\n                        isCharging: false,\n                        chargeProgress: 0,\n                        isSwinging: false,\n                        swordComboStep: 1 | 2 | 3,\n                        isDivineStorming: false,\n                        isSpinning: false,\n                        isSwordCharging: false,\n                        isDeflecting: false,\n                        isViperStingCharging: false,\n                        viperStingChargeProgress: 0,\n                        isBarrageCharging: false,\n                        barrageChargeProgress: 0,\n                        isCobraShotCharging: false,\n                        cobraShotChargeProgress: 0,\n                        isBackstabbing: false\n                    };\n                    // Update with the received animation state\n                    const newState = {\n                        ...currentState,\n                        ...data.animationState,\n                        lastAnimationUpdate: Date.now()\n                    };\n                    updated.set(data.playerId, newState);\n                    return updated;\n                });\n            }\n        };\n        const handlePlayerEffect = (data)=>{\n            var _data_effect, _data_effect1;\n            if (((_data_effect = data.effect) === null || _data_effect === void 0 ? void 0 : _data_effect.type) === \"venom\") {\n                const { targetPlayerId, position, duration } = data.effect;\n                // Create venom effect on the target player (could be local player or other player)\n                if (targetPlayerId && position) {\n                    const venomPosition = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(position.x, position.y, position.z);\n                    createPvpVenomEffect(targetPlayerId, venomPosition);\n                }\n            }\n            if (((_data_effect1 = data.effect) === null || _data_effect1 === void 0 ? void 0 : _data_effect1.type) === \"deathgrasp_pull\") {\n                const { targetPlayerId, position, casterId } = data.effect;\n                console.log(\"\\uD83C\\uDFA3 Received DeathGrasp pull effect for target \".concat(targetPlayerId, \" from caster \").concat(casterId));\n                // If this client is the target player, update the local position\n                if (targetPlayerId === (socket === null || socket === void 0 ? void 0 : socket.id) && position) {\n                    const pullPosition = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(position.x, position.y, position.z);\n                    console.log(\"\\uD83C\\uDFA3 Applying DeathGrasp pull to local player, moving to:\", pullPosition);\n                    // Update local player entity position\n                    if (playerEntity) {\n                        const transform = playerEntity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                        if (transform) {\n                            transform.setPosition(pullPosition.x, pullPosition.y, pullPosition.z);\n                            console.log(\"\\uD83C\\uDFA3 Local player position updated via DeathGrasp pull\");\n                        }\n                    }\n                }\n            }\n        };\n        const handlePlayerDebuff = (data)=>{\n            console.log(\"\\uD83C\\uDFAF Received PVP player debuff:\", data);\n            console.log('\\uD83D\\uDD0D Debug: My socket ID is \"'.concat(socket === null || socket === void 0 ? void 0 : socket.id, '\", target is \"').concat(data.targetPlayerId, '\", am I the target? ').concat((socket === null || socket === void 0 ? void 0 : socket.id) === data.targetPlayerId));\n            const { targetPlayerId, debuffType, duration, effectData } = data;\n            if (targetPlayerId && debuffType && duration) {\n                let position;\n                // If this is the local player being debuffed, use the local player entity position for accuracy\n                if (targetPlayerId === (socket === null || socket === void 0 ? void 0 : socket.id) && playerEntity) {\n                    const transform = playerEntity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                    if (transform) {\n                        position = transform.position.clone();\n                    } else {\n                        // Fallback to current player position from state\n                        position = playerPosition.clone();\n                    }\n                } else {\n                    // For other players, use the multiplayer context or effectData\n                    const targetPlayer = players.get(targetPlayerId);\n                    position = targetPlayer ? new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(targetPlayer.position.x, targetPlayer.position.y, targetPlayer.position.z) : (effectData === null || effectData === void 0 ? void 0 : effectData.position) ? new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(effectData.position.x, effectData.position.y, effectData.position.z) : new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, 0);\n                }\n                createPvpDebuffEffect(targetPlayerId, debuffType, position, duration);\n            }\n        };\n        socket.on(\"player-attacked\", handlePlayerAttack);\n        socket.on(\"player-used-ability\", handlePlayerAbility);\n        socket.on(\"player-damaged\", handlePlayerDamaged);\n        socket.on(\"player-animation-state\", handlePlayerAnimationState);\n        socket.on(\"player-effect\", handlePlayerEffect);\n        socket.on(\"player-debuff\", handlePlayerDebuff);\n        return ()=>{\n            socket.off(\"player-attacked\", handlePlayerAttack);\n            socket.off(\"player-used-ability\", handlePlayerAbility);\n            socket.off(\"player-damaged\", handlePlayerDamaged);\n            socket.off(\"player-animation-state\", handlePlayerAnimationState);\n            socket.off(\"player-effect\", handlePlayerEffect);\n            socket.off(\"player-debuff\", handlePlayerDebuff);\n        };\n    }, [\n        socket,\n        playerEntity\n    ]);\n    // Add a cleanup effect to prevent stuck animations\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const cleanupInterval = setInterval(()=>{\n            setMultiplayerPlayerStates((prev)=>{\n                const updated = new Map(prev);\n                const now = Date.now();\n                let hasChanges = false;\n                updated.forEach((state, playerId)=>{\n                    // If an animation has been active for more than 3 seconds, force reset it\n                    if (state.lastAnimationUpdate && now - state.lastAnimationUpdate > 3000) {\n                        if (state.isSwinging || state.isCharging || state.isSpinning) {\n                            console.log(\"\\uD83D\\uDD27 Force resetting stuck animation for player \".concat(playerId));\n                            updated.set(playerId, {\n                                ...state,\n                                isSwinging: false,\n                                isCharging: false,\n                                isSpinning: false\n                            });\n                            hasChanges = true;\n                        }\n                    }\n                });\n                return hasChanges ? updated : prev;\n            });\n        }, 1000); // Check every second\n        return ()=>clearInterval(cleanupInterval);\n    }, []);\n    // Sync server players and towers with local ECS entities for PVP damage system\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!engineRef.current || !gameStarted) return;\n        const world = engineRef.current.getWorld();\n        // Create local ECS entities for other players (for collision detection)\n        players.forEach((serverPlayer, playerId)=>{\n            // Skip our own player\n            if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) return;\n            if (!serverPlayerEntities.current.has(playerId)) {\n                // Create a new local ECS entity for this server player\n                const entity = world.createEntity();\n                // Add Transform component\n                const transform = world.createComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                transform.setPosition(serverPlayer.position.x, serverPlayer.position.y, serverPlayer.position.z);\n                entity.addComponent(transform);\n                // Add InterpolationBuffer component for smooth movement\n                const interpolationBuffer = world.createComponent(_ecs_components_Interpolation__WEBPACK_IMPORTED_MODULE_15__.InterpolationBuffer);\n                entity.addComponent(interpolationBuffer);\n                // Add Health component (for PVP damage)\n                const health = new _ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health(serverPlayer.maxHealth);\n                health.currentHealth = serverPlayer.health;\n                entity.addComponent(health);\n                // Add Shield component (for PVP damage)\n                const shield = new _ecs_components_Shield__WEBPACK_IMPORTED_MODULE_10__.Shield(100, 20, 5); // 100 max shield, 20/s regen, 5s delay\n                entity.addComponent(shield);\n                // Add Movement component for equal collision treatment with local player\n                // Remote players don't use this for actual movement (they're position-synced from server)\n                // but having it ensures equal collision resolution in CollisionSystem\n                const movement = world.createComponent(_ecs_components_Movement__WEBPACK_IMPORTED_MODULE_8__.Movement);\n                movement.maxSpeed = 3.75; // Match local player settings\n                movement.jumpForce = 8;\n                movement.friction = 0.85;\n                movement.canMove = false; // Disable actual movement since position comes from server\n                entity.addComponent(movement);\n                // Add Collider component for PVP damage detection\n                const collider = world.createComponent(_ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.Collider);\n                collider.type = _ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.ColliderType.SPHERE;\n                collider.radius = 0.9; // Reduced collision radius for better player proximity in PVP\n                collider.layer = _ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.CollisionLayer.ENEMY; // Use enemy layer so projectiles can hit remote players in PVP\n                // Set collision mask to collide with environment only - NO player-to-player collision in PVP\n                collider.setMask(_ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.CollisionLayer.ENVIRONMENT);\n                collider.setOffset(0, 0.25, 0); // Center on player\n                entity.addComponent(collider);\n                // Notify systems that the entity is ready\n                world.notifyEntityAdded(entity);\n                // Store the mapping\n                serverPlayerEntities.current.set(playerId, entity.id);\n            } else {\n                // Update existing local ECS entity\n                const entityId = serverPlayerEntities.current.get(playerId);\n                const entity = world.getEntity(entityId);\n                if (entity) {\n                    // Update position using interpolation buffer for remote players only\n                    const transform = entity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                    const interpolationBuffer = entity.getComponent(_ecs_components_Interpolation__WEBPACK_IMPORTED_MODULE_15__.InterpolationBuffer);\n                    if (transform && interpolationBuffer) {\n                        // Create rotation quaternion from Euler angles\n                        const rotation = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Quaternion();\n                        rotation.setFromEuler(new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Euler(serverPlayer.rotation.x, serverPlayer.rotation.y, serverPlayer.rotation.z));\n                        // Add server state to interpolation buffer for smooth remote player movement\n                        const position = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(serverPlayer.position.x, serverPlayer.position.y, serverPlayer.position.z);\n                        interpolationBuffer.addServerState(position, rotation);\n                    } else if (transform) {\n                        // Fallback to direct position update if interpolation buffer not available\n                        transform.setPosition(serverPlayer.position.x, serverPlayer.position.y, serverPlayer.position.z);\n                    }\n                    // Reset velocity for remote players to prevent drift from collision resolution\n                    const movement = entity.getComponent(_ecs_components_Movement__WEBPACK_IMPORTED_MODULE_8__.Movement);\n                    if (movement) {\n                        movement.velocity.set(0, 0, 0); // Clear any velocity from collision resolution\n                        movement.acceleration.set(0, 0, 0); // Clear acceleration\n                    }\n                    // Update health\n                    const health = entity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                    if (health) {\n                        health.maxHealth = serverPlayer.maxHealth;\n                        health.currentHealth = serverPlayer.health;\n                    }\n                } else {\n                    console.warn(\" Could not find local ECS entity \".concat(entityId, \" for PVP player \").concat(playerId));\n                }\n            }\n        });\n        // Clean up local entities for players that no longer exist\n        const currentPlayerIds = new Set(players.keys());\n        const entitiesToRemove = [];\n        serverPlayerEntities.current.forEach((entityId, playerId)=>{\n            if (!currentPlayerIds.has(playerId) || playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                const entity = world.getEntity(entityId);\n                if (entity) {\n                    // Mark entity as dead instead of removing\n                    const health = entity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                    if (health) {\n                        health.currentHealth = 0;\n                        health.isDead = true;\n                    }\n                    console.log(\"\\uD83D\\uDC80 Marked local ECS entity \".concat(entityId, \" as dead for disconnected player \").concat(playerId));\n                }\n                entitiesToRemove.push(playerId);\n            }\n        });\n        // Remove from mapping\n        entitiesToRemove.forEach((playerId)=>{\n            serverPlayerEntities.current.delete(playerId);\n        });\n        // Create local ECS entities for towers\n        towers.forEach((serverTower, towerId)=>{\n            if (!serverTowerEntities.current.has(towerId)) {\n                // Create a new local ECS entity for this server tower\n                const entity = world.createEntity();\n                // Add Transform component\n                const transform = world.createComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                transform.setPosition(serverTower.position.x, serverTower.position.y, serverTower.position.z);\n                entity.addComponent(transform);\n                // Add Tower component\n                const tower = world.createComponent(_ecs_components_Tower__WEBPACK_IMPORTED_MODULE_13__.Tower);\n                tower.ownerId = serverTower.ownerId;\n                tower.towerIndex = serverTower.towerIndex;\n                entity.addComponent(tower);\n                // Add Health component\n                const health = new _ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health(serverTower.maxHealth);\n                health.currentHealth = serverTower.health;\n                entity.addComponent(health);\n                // Add Collider component for tower damage detection\n                const collider = world.createComponent(_ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.Collider);\n                collider.type = _ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.ColliderType.CYLINDER;\n                collider.radius = 1.5; // Tower base radius\n                collider.height = 4; // Tower height\n                collider.layer = _ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.CollisionLayer.ENEMY; // Use enemy layer so projectiles can hit towers\n                collider.setMask(_ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.CollisionLayer.ENVIRONMENT | _ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.CollisionLayer.PLAYER);\n                collider.setOffset(0, 2, 0); // Center vertically\n                entity.addComponent(collider);\n                // Notify systems that the entity is ready\n                world.notifyEntityAdded(entity);\n                // Store the mapping\n                serverTowerEntities.current.set(towerId, entity.id);\n            } else {\n                // Update existing local ECS entity\n                const entityId = serverTowerEntities.current.get(towerId);\n                const entity = world.getEntity(entityId);\n                if (entity) {\n                    // Update health\n                    const health = entity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                    if (health) {\n                        health.maxHealth = serverTower.maxHealth;\n                        health.currentHealth = serverTower.health;\n                        if (serverTower.isDead && !health.isDead) {\n                            health.currentHealth = 0;\n                            health.isDead = true;\n                        }\n                    }\n                    // Update tower state\n                    const tower = entity.getComponent(_ecs_components_Tower__WEBPACK_IMPORTED_MODULE_13__.Tower);\n                    if (tower && serverTower.isDead && !tower.isDead) {\n                        tower.die(Date.now() / 1000);\n                    }\n                } else {\n                    console.warn(\" Could not find local ECS entity \".concat(entityId, \" for tower \").concat(towerId));\n                }\n            }\n        });\n        // Clean up local entities for towers that no longer exist\n        const currentTowerIds = new Set(towers.keys());\n        const towerEntitiesToRemove = [];\n        serverTowerEntities.current.forEach((entityId, towerId)=>{\n            if (!currentTowerIds.has(towerId)) {\n                const entity = world.getEntity(entityId);\n                if (entity) {\n                    // Mark entity as dead instead of removing\n                    const health = entity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                    const tower = entity.getComponent(_ecs_components_Tower__WEBPACK_IMPORTED_MODULE_13__.Tower);\n                    if (health && tower) {\n                        health.currentHealth = 0;\n                        health.isDead = true;\n                        tower.die(Date.now() / 1000);\n                    }\n                    console.log(\"\\uD83D\\uDC80 Marked local ECS entity \".concat(entityId, \" as dead for removed tower \").concat(towerId));\n                }\n                towerEntitiesToRemove.push(towerId);\n            }\n        });\n        // Remove from mapping\n        towerEntitiesToRemove.forEach((towerId)=>{\n            serverTowerEntities.current.delete(towerId);\n        });\n    }, [\n        players,\n        towers,\n        gameStarted,\n        socket === null || socket === void 0 ? void 0 : socket.id\n    ]);\n    // Update tower system player mapping when players change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (towerSystemRef.current && (socket === null || socket === void 0 ? void 0 : socket.id)) {\n            towerSystemRef.current.setPlayerMapping(serverPlayerEntities.current, socket.id);\n        }\n    }, [\n        players,\n        socket === null || socket === void 0 ? void 0 : socket.id\n    ]);\n    // Initialize the PVP game engine\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isInitialized.current || !gameStarted) return;\n        isInitialized.current = true;\n        // Initialize damage system with some test runes for demonstration\n        (0,_core_DamageCalculator__WEBPACK_IMPORTED_MODULE_48__.setGlobalCriticalRuneCount)(0); // 11% + (2 * 3%) = 17% crit chance\n        (0,_core_DamageCalculator__WEBPACK_IMPORTED_MODULE_48__.setGlobalCritDamageRuneCount)(0); // 2.0 + (1 * 0.15) = 2.15x crit damage\n        // Create engine\n        const engine = new _core_Engine__WEBPACK_IMPORTED_MODULE_5__.Engine({\n            enableDebug: true\n        });\n        engineRef.current = engine;\n        // Initialize with canvas\n        const canvas = gl.domElement;\n        engine.initialize(canvas).then(()=>{\n            // Create a PVP damage callback that maps local ECS entity IDs back to server player IDs\n            const damagePlayerWithMapping = (entityId, damage)=>{\n                // Find the server player ID that corresponds to this local ECS entity ID\n                const numericEntityId = parseInt(entityId);\n                let serverPlayerId = null;\n                serverPlayerEntities.current.forEach((localEntityId, playerId)=>{\n                    if (localEntityId === numericEntityId) {\n                        serverPlayerId = playerId;\n                    }\n                });\n                if (serverPlayerId) {\n                    console.log(\"\\uD83C\\uDFAF Mapping local entity \".concat(entityId, \" to server player \").concat(serverPlayerId, \" for \").concat(damage, \" PVP damage\"));\n                    broadcastPlayerDamage(serverPlayerId, damage);\n                } else {\n                    console.warn(\" Could not find server player ID for local entity \".concat(entityId));\n                }\n            };\n            const { player, controlSystem, towerSystem, summonedUnitSystem } = setupPVPGame(engine, scene, camera, gl, damagePlayerWithMapping, damageTower);\n            console.log(\"\\uD83C\\uDFAE PVP Player entity created:\", player, \"ID:\", player.id);\n            setPlayerEntity(player);\n            playerEntityRef.current = player.id;\n            controlSystemRef.current = controlSystem;\n            towerSystemRef.current = towerSystem;\n            summonedUnitSystemRef.current = summonedUnitSystem;\n            // Set up tower system with player mapping\n            if (towerSystem && (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                towerSystem.setPlayerMapping(serverPlayerEntities.current, socket.id);\n            }\n            // Set up wave completion callback for experience awarding\n            if (summonedUnitSystem) {\n                summonedUnitSystem.setWaveCompleteCallback(handleWaveComplete);\n            }\n            // Pass controlSystem back to parent\n            if (onControlSystemUpdate) {\n                onControlSystemUpdate(controlSystem);\n            }\n            // Set up PVP callbacks (AFTER playerEntity is set)\n            controlSystem.setBowReleaseCallback((finalProgress, isPerfectShot)=>{\n                // Broadcast attack to other players\n                if (playerEntity) {\n                    const transform = playerEntity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                    if (transform) {\n                        const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                        camera.getWorldDirection(direction);\n                        direction.normalize();\n                        broadcastPlayerAttack(\"bow_release\", transform.position, direction, {\n                            chargeProgress: finalProgress,\n                            isPerfectShot: isPerfectShot\n                        });\n                    }\n                }\n                // Trigger perfect shot visual effect if it was a perfect shot\n                if (isPerfectShot) {\n                    // Get current player position from the engine\n                    const currentPlayerEntity = engine.getWorld().getEntity(playerEntityRef.current);\n                    if (currentPlayerEntity) {\n                        const transform = currentPlayerEntity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                        if (transform) {\n                            // Get camera direction for effect direction\n                            const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                            camera.getWorldDirection(direction);\n                            direction.normalize();\n                            // Apply same downward compensation as projectile system\n                            const compensationAngle = Math.PI / 12; // 30 degrees\n                            const cameraRight = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                            cameraRight.crossVectors(direction, new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 1, 0)).normalize();\n                            const rotationMatrix = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Matrix4();\n                            rotationMatrix.makeRotationAxis(cameraRight, compensationAngle);\n                            direction.applyMatrix4(rotationMatrix);\n                            direction.normalize();\n                            // Create perfect shot effect\n                            const effectId = createPowershotEffect(transform.position.clone(), direction, controlSystem.getCurrentSubclass(), true, true // isElementalShotsUnlocked - for now assume unlocked\n                            );\n                        }\n                    }\n                }\n            });\n            // Set up Divine Storm callback\n            controlSystem.setDivineStormCallback((position, direction, duration)=>{\n                console.log(\" PVP Divine Storm activated - broadcasting to other players\");\n                // Trigger local visual effect immediately with correct duration\n                (0,_components_weapons_DivineStormManager__WEBPACK_IMPORTED_MODULE_43__.triggerGlobalDivineStorm)(position, socket === null || socket === void 0 ? void 0 : socket.id, duration);\n                // Broadcast to other players with duration info\n                broadcastPlayerAbility(\"divine_storm\", position, direction);\n            });\n            // Set up Viper Sting callback\n            controlSystem.setViperStingCallback((position, direction)=>{\n                broadcastPlayerAbility(\"viper_sting\", position, direction);\n            });\n            // Set up Barrage callback\n            controlSystem.setBarrageCallback((position, direction)=>{\n                broadcastPlayerAbility(\"barrage\", position, direction);\n            });\n            // Set up Frost Nova callback\n            controlSystem.setFrostNovaCallback((position, direction)=>{\n                broadcastPlayerAbility(\"frost_nova\", position, direction);\n            });\n            // Set up Cobra Shot callback (for local visual effects only - projectile is handled via onProjectileCreatedCallback)\n            controlSystem.setCobraShotCallback((position, direction)=>{\n            // Don't broadcast as ability - the projectile is already broadcast via onProjectileCreatedCallback\n            });\n            // Set up Charge callback\n            controlSystem.setChargeCallback((position, direction)=>{\n                // Broadcast as ability for state management\n                broadcastPlayerAbility(\"charge\", position, direction);\n                // Also broadcast as attack for animation\n                broadcastPlayerAttack(\"sword_charge_start\", position, direction, {\n                    isSwordCharging: true\n                });\n            });\n            // Set up Skyfall callback\n            controlSystem.setSkyfallCallback((position, direction)=>{\n                console.log(\"\\uD83C\\uDF1F PVP Skyfall triggered - broadcasting to other players\");\n                broadcastPlayerAbility(\"skyfall\", position, direction);\n            });\n            // Set up Backstab callback\n            controlSystem.setBackstabCallback((position, direction, damage, isBackstab)=>{\n                console.log(\"\\uD83D\\uDDE1 PVP Backstab triggered - broadcasting to other players (damage: \".concat(damage, \", backstab: \").concat(isBackstab, \")\"));\n                broadcastPlayerAbility(\"backstab\", position, direction);\n            // Note: Animation state is now broadcasted automatically in the game loop\n            });\n            // Set up Sunder callback\n            controlSystem.setSunderCallback((position, direction, damage, stackCount)=>{\n                console.log(\" PVP Sunder triggered - broadcasting to other players (damage: \".concat(damage, \", stacks: \").concat(stackCount, \")\"));\n                broadcastPlayerAbility(\"sunder\", position, direction);\n            // Note: Animation state is now broadcasted automatically in the game loop\n            });\n            // Set up Debuff callback for broadcasting freeze/slow effects\n            console.log(\"\\uD83D\\uDD27 Debug: Setting up debuff callback for ControlSystem\");\n            controlSystem.setDebuffCallback((targetEntityId, debuffType, duration, position)=>{\n                console.log(\"\\uD83C\\uDFAF PVP Debuff callback triggered - \".concat(debuffType, \" effect on entity \").concat(targetEntityId));\n                // Find the server player ID that corresponds to this local ECS entity ID\n                let targetPlayerId = null;\n                serverPlayerEntities.current.forEach((localEntityId, playerId)=>{\n                    if (localEntityId === targetEntityId) {\n                        targetPlayerId = playerId;\n                    }\n                });\n                if (targetPlayerId && broadcastPlayerDebuff) {\n                    console.log(\"\\uD83C\\uDFAF Broadcasting \".concat(debuffType, \" effect to player \").concat(targetPlayerId));\n                    broadcastPlayerDebuff(targetPlayerId, debuffType, duration, {\n                        position: {\n                            x: position.x,\n                            y: position.y,\n                            z: position.z\n                        }\n                    });\n                } else {\n                    console.warn(\" Could not find server player ID for local entity \".concat(targetEntityId));\n                }\n            });\n            // Set up projectile creation callback\n            controlSystem.setProjectileCreatedCallback((projectileType, position, direction, config)=>{\n                const animationData = {};\n                // Add charge progress for bow projectiles\n                if (projectileType.includes(\"arrow\") || projectileType.includes(\"bolt\")) {\n                    animationData.chargeProgress = controlSystem.getChargeProgress();\n                }\n                broadcastPlayerAttack(projectileType, position, direction, animationData);\n            });\n            // Set up Reanimate callback\n            controlSystem.setReanimateCallback(()=>{\n                if (reanimateRef.current) {\n                    reanimateRef.current.triggerHealingEffect();\n                }\n                // Broadcast Reanimate ability to other players\n                if (player) {\n                    const transform = player.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                    if (transform) {\n                        const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                        camera.getWorldDirection(direction);\n                        direction.normalize();\n                        broadcastPlayerAbility(\"reanimate\", transform.position, direction);\n                    }\n                }\n            });\n            // Set up Smite callback\n            controlSystem.setSmiteCallback((position, direction, onDamageDealt)=>{\n                console.log(\"\\uD83D\\uDD0D DEBUG: Smite callback triggered in PVP mode\");\n                // Create local Smite effect\n                createPvpSmiteEffect((socket === null || socket === void 0 ? void 0 : socket.id) || \"\", position, onDamageDealt);\n                // Broadcast Smite ability to other players\n                broadcastPlayerAbility(\"smite\", position, direction);\n            });\n            // Set up DeathGrasp callback\n            controlSystem.setDeathGraspCallback((position, direction)=>{\n                console.log(\"\\uD83D\\uDD0D DEBUG: DeathGrasp callback triggered in PVP mode\");\n                // Create local DeathGrasp projectile effect\n                createPvpDeathGraspEffect((socket === null || socket === void 0 ? void 0 : socket.id) || \"\", position, direction);\n                // Broadcast DeathGrasp ability to other players\n                broadcastPlayerAbility(\"deathgrasp\", position, direction);\n            });\n            // Set up mana callbacks for Runeblade\n            controlSystem.setConsumeManaCallback(consumeMana);\n            controlSystem.setCheckManaCallback(hasMana);\n            engine.start();\n        });\n        // Cleanup on unmount\n        return ()=>{\n            if (engineRef.current) {\n                engineRef.current.destroy();\n            }\n            // Clear any pending batched updates\n            _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.pvpStateBatcher.clear();\n        };\n    }, [\n        scene,\n        camera,\n        gl,\n        gameStarted\n    ]);\n    // Expose PVP player data globally for ControlSystem access\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        window.pvpPlayers = players;\n        window.localSocketId = socket === null || socket === void 0 ? void 0 : socket.id;\n        window.serverPlayerEntities = serverPlayerEntities;\n        window.multiplayer = {\n            broadcastPlayerEffect: broadcastPlayerEffect\n        };\n        // Expose interpolation system for debugging\n        window.getInterpolationStats = ()=>{\n            if (!engineRef.current) {\n                return {\n                    error: \"Engine not initialized\"\n                };\n            }\n            const world = engineRef.current.getWorld();\n            const interpolationSystem = world.getSystem(_systems_InterpolationSystem__WEBPACK_IMPORTED_MODULE_25__.InterpolationSystem);\n            if (!interpolationSystem) {\n                return {\n                    error: \"InterpolationSystem not found\"\n                };\n            }\n            const stats = {};\n            serverPlayerEntities.current.forEach((entityId, playerId)=>{\n                const entity = world.getEntity(entityId);\n                if (entity) {\n                    stats[playerId] = interpolationSystem.getInterpolationStats(entity);\n                }\n            });\n            return stats;\n        };\n        // Expose advanced interpolation methods for testing\n        window.testInterpolationMethods = ()=>{\n            console.log(\"\\uD83E\\uDDEE Available Interpolation Methods:\");\n            console.log(\"1. Linear Interpolation (LERP) - Currently used\");\n            console.log(\"2. Hermite Spline - Smoother curves with velocity\");\n            console.log(\"3. Catmull-Rom Spline - Smooth curves through waypoints\");\n            console.log(\"4. Cubic Bezier - Custom control point curves\");\n            console.log(\"5. Smooth Step - Easing functions\");\n            console.log(\"6. Smoother Step - Even smoother easing\");\n            console.log(\"\\n\\uD83D\\uDCCA Current Interpolation Stats:\");\n            console.log(window.getInterpolationStats());\n            return \"Interpolation methods available in InterpolationSystem class\";\n        };\n    }, [\n        players,\n        socket === null || socket === void 0 ? void 0 : socket.id\n    ]);\n    // Game loop integration with React Three Fiber\n    (0,_barrel_optimize_names_useFrame_useThree_react_three_fiber__WEBPACK_IMPORTED_MODULE_54__.F)((state, deltaTime)=>{\n        if (engineRef.current && engineRef.current.isEngineRunning() && gameStarted) {\n            // Update FPS counter\n            updateFPSCounter(engineRef.current.getCurrentFPS());\n            // Reset object pool temporary objects for this frame\n            _utils_PVPObjectPool__WEBPACK_IMPORTED_MODULE_41__.pvpObjectPool.resetFrameTemporaries();\n            // Collect all state updates to batch them\n            const stateUpdates = [];\n            // Update player position for dragon renderer\n            if (playerEntity) {\n                const transform = playerEntity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                if (transform && transform.position) {\n                    const newPosition = transform.position.clone();\n                    stateUpdates.push({\n                        setter: setPlayerPosition,\n                        value: newPosition\n                    });\n                    // Update Viper Sting parent ref with current position and camera rotation\n                    viperStingParentRef.current.position.copy(newPosition);\n                    // Calculate quaternion from camera direction for Viper Sting\n                    const cameraDirection = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                    camera.getWorldDirection(cameraDirection);\n                    const cameraAngle = Math.atan2(cameraDirection.x, cameraDirection.z);\n                    // Update quaternion for Viper Sting direction\n                    viperStingParentRef.current.quaternion = {\n                        x: 0,\n                        y: Math.sin(cameraAngle / 2),\n                        z: 0,\n                        w: Math.cos(cameraAngle / 2)\n                    };\n                    // Send position updates to other players with camera rotation\n                    const rotation = {\n                        x: 0,\n                        y: cameraAngle,\n                        z: 0\n                    };\n                    updatePlayerPosition(transform.position, rotation);\n                }\n            }\n            // Update weapon state from control system\n            if (controlSystemRef.current) {\n                const newWeaponState = {\n                    currentWeapon: controlSystemRef.current.getCurrentWeapon(),\n                    currentSubclass: controlSystemRef.current.getCurrentSubclass(),\n                    isCharging: controlSystemRef.current.isWeaponCharging(),\n                    chargeProgress: controlSystemRef.current.getChargeProgress(),\n                    isSwinging: controlSystemRef.current.isWeaponSwinging(),\n                    isSpinning: controlSystemRef.current.isWeaponCharging() && controlSystemRef.current.getCurrentWeapon() === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SCYTHE,\n                    swordComboStep: controlSystemRef.current.getSwordComboStep(),\n                    isDivineStorming: controlSystemRef.current.isDivineStormActive(),\n                    isSwordCharging: controlSystemRef.current.isChargeActive(),\n                    isDeflecting: controlSystemRef.current.isDeflectActive(),\n                    isViperStingCharging: controlSystemRef.current.isViperStingChargingActive(),\n                    viperStingChargeProgress: controlSystemRef.current.getViperStingChargeProgress(),\n                    isBarrageCharging: controlSystemRef.current.isBarrageChargingActive(),\n                    barrageChargeProgress: controlSystemRef.current.getBarrageChargeProgress(),\n                    isCobraShotCharging: controlSystemRef.current.isCobraShotChargingActive(),\n                    cobraShotChargeProgress: controlSystemRef.current.getCobraShotChargeProgress(),\n                    isSkyfalling: controlSystemRef.current.isSkyfallActive(),\n                    isBackstabbing: controlSystemRef.current.isBackstabActive(),\n                    isSundering: controlSystemRef.current.isSunderActive()\n                };\n                // Check for weapon changes and broadcast to other players\n                const prevWeapon = prevWeaponRef.current;\n                if (newWeaponState.currentWeapon !== prevWeapon.weapon || newWeaponState.currentSubclass !== prevWeapon.subclass) {\n                    updatePlayerWeapon(newWeaponState.currentWeapon, newWeaponState.currentSubclass);\n                    prevWeaponRef.current = {\n                        weapon: newWeaponState.currentWeapon,\n                        subclass: newWeaponState.currentSubclass\n                    };\n                }\n                stateUpdates.push({\n                    setter: setWeaponState,\n                    value: newWeaponState\n                });\n                // Broadcast animation state changes to other players (throttled to avoid spam)\n                const now = Date.now();\n                if (now - lastAnimationBroadcast.current > 100) {\n                    // Determine if scythe is spinning based on weapon type and charging state\n                    const isScytheSpinning = newWeaponState.currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SCYTHE && newWeaponState.isCharging;\n                    // Determine if sword is spinning during Divine Storm or Charge\n                    const isSwordSpinning = newWeaponState.isDivineStorming || newWeaponState.isSwordCharging;\n                    // Combine all spinning states\n                    const isSpinning = isScytheSpinning || isSwordSpinning;\n                    // Create the animation state object\n                    const animationStateToSend = {\n                        isCharging: newWeaponState.isCharging,\n                        chargeProgress: newWeaponState.chargeProgress,\n                        isSwinging: newWeaponState.isSwinging,\n                        swordComboStep: newWeaponState.swordComboStep,\n                        isDivineStorming: newWeaponState.isDivineStorming,\n                        isSpinning: isSpinning,\n                        isDeflecting: newWeaponState.isDeflecting,\n                        isSwordCharging: newWeaponState.isSwordCharging,\n                        isViperStingCharging: newWeaponState.isViperStingCharging,\n                        viperStingChargeProgress: newWeaponState.viperStingChargeProgress,\n                        isBarrageCharging: newWeaponState.isBarrageCharging,\n                        barrageChargeProgress: newWeaponState.barrageChargeProgress,\n                        isBackstabbing: newWeaponState.isBackstabbing // Broadcast backstab animation state\n                    };\n                    broadcastPlayerAnimationState(animationStateToSend);\n                    lastAnimationBroadcast.current = now;\n                }\n            }\n            // Update damage numbers from combat system\n            const combatSystem = engineRef.current.getWorld().getSystem(_systems_CombatSystem__WEBPACK_IMPORTED_MODULE_22__.CombatSystem);\n            if (combatSystem && onDamageNumbersUpdate) {\n                onDamageNumbersUpdate(combatSystem.getDamageNumbers());\n            }\n            // Update camera information for damage number positioning\n            if (onCameraUpdate) {\n                onCameraUpdate(camera, size);\n            }\n            // Log object pool and state batcher statistics periodically (every 5 seconds)\n            const now = Date.now();\n            if (now % 10000 < 16) {\n                const poolStats = getPoolStats();\n                const batcherStats = _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.pvpStateBatcher.getStats();\n                console.log(\"\\uD83D\\uDD27 PVP Performance Stats:\", {\n                    objectPool: poolStats,\n                    stateBatcher: batcherStats\n                });\n            }\n            // Update game state for UI\n            if (onGameStateUpdate && playerEntity && controlSystemRef.current) {\n                const healthComponent = playerEntity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                const shieldComponent = playerEntity.getComponent(_ecs_components_Shield__WEBPACK_IMPORTED_MODULE_10__.Shield);\n                if (healthComponent) {\n                    const gameState = {\n                        playerHealth: healthComponent.currentHealth,\n                        maxHealth: healthComponent.maxHealth,\n                        playerShield: shieldComponent ? shieldComponent.currentShield : 0,\n                        maxShield: shieldComponent ? shieldComponent.maxShield : 0,\n                        currentWeapon: controlSystemRef.current.getCurrentWeapon(),\n                        currentSubclass: controlSystemRef.current.getCurrentSubclass(),\n                        // Add mana information for weapons that use mana\n                        mana: currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SCYTHE || currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.RUNEBLADE ? currentMana : 0,\n                        maxMana: currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.SCYTHE || currentWeapon === _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.RUNEBLADE ? maxMana : 0\n                    };\n                    onGameStateUpdate(gameState);\n                    // Update multiplayer health\n                    updatePlayerHealth(healthComponent.currentHealth, healthComponent.maxHealth);\n                }\n            }\n            // Batch all collected state updates at the end of the frame\n            if (stateUpdates.length > 0) {\n                _utils_PVPStateBatcher__WEBPACK_IMPORTED_MODULE_42__.PVPStateUpdateHelpers.batchGameStateUpdates(stateUpdates);\n            }\n        }\n    });\n    // Expose damage number completion handler for parent component\n    react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(()=>{\n        if (onDamageNumberComplete) {\n            // Store the completion handler in a way the parent can access it\n            window.handleDamageNumberComplete = (id)=>{\n                var _engineRef_current;\n                const combatSystem = (_engineRef_current = engineRef.current) === null || _engineRef_current === void 0 ? void 0 : _engineRef_current.getWorld().getSystem(_systems_CombatSystem__WEBPACK_IMPORTED_MODULE_22__.CombatSystem);\n                if (combatSystem) {\n                    combatSystem.removeDamageNumber(id);\n                }\n            };\n        }\n    }, [\n        onDamageNumberComplete\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: !gameStarted ? null : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_environment_Environment__WEBPACK_IMPORTED_MODULE_49__[\"default\"], {\n                    level: 1,\n                    world: (_engineRef_current = engineRef.current) === null || _engineRef_current === void 0 ? void 0 : _engineRef_current.getWorld()\n                }, void 0, false, {\n                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                    lineNumber: 2499,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ambientLight\", {\n                    intensity: 0.3\n                }, void 0, false, {\n                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                    lineNumber: 2502,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"directionalLight\", {\n                    position: [\n                        10,\n                        10,\n                        5\n                    ],\n                    intensity: 0.5,\n                    castShadow: true,\n                    \"shadow-mapSize-width\": 2048,\n                    \"shadow-mapSize-height\": 2048,\n                    \"shadow-camera-far\": 50,\n                    \"shadow-camera-left\": -20,\n                    \"shadow-camera-right\": 20,\n                    \"shadow-camera-top\": 20,\n                    \"shadow-camera-bottom\": -20\n                }, void 0, false, {\n                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                    lineNumber: 2503,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n                    receiveShadow: true,\n                    position: [\n                        0,\n                        -0.5,\n                        0\n                    ],\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"cylinderGeometry\", {\n                            args: [\n                                29,\n                                29,\n                                1,\n                                6\n                            ]\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2518,\n                            columnNumber: 9\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshStandardMaterial\", {\n                            color: \"#2d5a2d\"\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2519,\n                            columnNumber: 9\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                    lineNumber: 2517,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n                    position: [\n                        0,\n                        0.01,\n                        0\n                    ],\n                    scale: [\n                        2.5,\n                        2.5,\n                        2.5\n                    ],\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ringGeometry\", {\n                            args: [\n                                25,\n                                29,\n                                64\n                            ]\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2524,\n                            columnNumber: 9\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshStandardMaterial\", {\n                            color: \"#ff6b6b\",\n                            transparent: true,\n                            opacity: 0.3\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2525,\n                            columnNumber: 9\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                    lineNumber: 2523,\n                    columnNumber: 7\n                }, this),\n                (()=>{\n                    return playerEntity && engineRef.current && socket;\n                })() && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_dragon_DragonRenderer__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                    entityId: playerEntity.id,\n                    position: playerPosition,\n                    world: engineRef.current.getWorld(),\n                    currentWeapon: weaponState.currentWeapon,\n                    currentSubclass: weaponState.currentSubclass,\n                    isCharging: weaponState.isCharging,\n                    chargeProgress: weaponState.chargeProgress,\n                    isSwinging: weaponState.isSwinging,\n                    isSpinning: weaponState.isSpinning,\n                    swordComboStep: weaponState.swordComboStep,\n                    isDivineStorming: weaponState.isDivineStorming,\n                    isSwordCharging: weaponState.isSwordCharging,\n                    isDeflecting: weaponState.isDeflecting,\n                    isViperStingCharging: weaponState.isViperStingCharging,\n                    viperStingChargeProgress: weaponState.viperStingChargeProgress,\n                    isBarrageCharging: weaponState.isBarrageCharging,\n                    barrageChargeProgress: weaponState.barrageChargeProgress,\n                    isCobraShotCharging: weaponState.isCobraShotCharging,\n                    cobraShotChargeProgress: weaponState.cobraShotChargeProgress,\n                    isSkyfalling: weaponState.isSkyfalling,\n                    isBackstabbing: weaponState.isBackstabbing,\n                    isSundering: weaponState.isSundering,\n                    isSmiting: ((_controlSystemRef_current = controlSystemRef.current) === null || _controlSystemRef_current === void 0 ? void 0 : _controlSystemRef_current.isSmiteActive()) || false,\n                    isDeathGrasping: ((_controlSystemRef_current1 = controlSystemRef.current) === null || _controlSystemRef_current1 === void 0 ? void 0 : _controlSystemRef_current1.isDeathGraspActive()) || false,\n                    reanimateRef: reanimateRef,\n                    isLocalPlayer: true,\n                    onBowRelease: ()=>{\n                    // This callback is now handled by the ControlSystem directly\n                    },\n                    onScytheSwingComplete: ()=>{\n                        const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                        camera.getWorldDirection(direction);\n                        direction.normalize();\n                        broadcastPlayerAttack(\"scythe_swing\", playerPosition, direction, {\n                            isSpinning: true\n                        });\n                    },\n                    onSwordSwingComplete: ()=>{\n                        var _controlSystemRef_current;\n                        (_controlSystemRef_current = controlSystemRef.current) === null || _controlSystemRef_current === void 0 ? void 0 : _controlSystemRef_current.onSwordSwingComplete();\n                        const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                        camera.getWorldDirection(direction);\n                        direction.normalize();\n                        broadcastPlayerAttack(\"sword_swing\", playerPosition, direction, {\n                            comboStep: weaponState.swordComboStep\n                        });\n                    },\n                    onSabresSwingComplete: ()=>{\n                        var _controlSystemRef_current;\n                        (_controlSystemRef_current = controlSystemRef.current) === null || _controlSystemRef_current === void 0 ? void 0 : _controlSystemRef_current.onSabresSwingComplete();\n                        const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                        camera.getWorldDirection(direction);\n                        direction.normalize();\n                        broadcastPlayerAttack(\"sabres_swing\", playerPosition, direction);\n                    },\n                    onChargeComplete: ()=>{\n                        var _controlSystemRef_current;\n                        (_controlSystemRef_current = controlSystemRef.current) === null || _controlSystemRef_current === void 0 ? void 0 : _controlSystemRef_current.onChargeComplete();\n                        // Broadcast charge spin animation\n                        const direction = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                        camera.getWorldDirection(direction);\n                        direction.normalize();\n                        broadcastPlayerAttack(\"sword_charge_spin\", playerPosition, direction, {\n                            isSpinning: true\n                        });\n                    },\n                    onDeflectComplete: ()=>{\n                        var _controlSystemRef_current;\n                        (_controlSystemRef_current = controlSystemRef.current) === null || _controlSystemRef_current === void 0 ? void 0 : _controlSystemRef_current.onDeflectComplete();\n                    },\n                    onBackstabComplete: ()=>{\n                    // Backstab animation completed - no need to broadcast as animation state is handled automatically\n                    },\n                    onSunderComplete: ()=>{\n                    // Sunder animation completed - no need to broadcast as animation state is handled automatically\n                    },\n                    onSmiteComplete: ()=>{\n                        var _controlSystemRef_current;\n                        (_controlSystemRef_current = controlSystemRef.current) === null || _controlSystemRef_current === void 0 ? void 0 : _controlSystemRef_current.onSmiteComplete();\n                    },\n                    onDeathGraspComplete: ()=>{\n                        var _controlSystemRef_current;\n                        (_controlSystemRef_current = controlSystemRef.current) === null || _controlSystemRef_current === void 0 ? void 0 : _controlSystemRef_current.onDeathGraspComplete();\n                    }\n                }, void 0, false, {\n                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                    lineNumber: 2538,\n                    columnNumber: 9\n                }, this),\n                Array.from(players.values()).map((player)=>{\n                    var _engineRef_current;\n                    if (player.id === (socket === null || socket === void 0 ? void 0 : socket.id)) return null; // Don't render our own player twice\n                    const playerState = multiplayerPlayerStates.get(player.id) || {\n                        isCharging: false,\n                        chargeProgress: 0,\n                        isSwinging: false,\n                        swordComboStep: 1,\n                        isDivineStorming: false,\n                        isSpinning: false,\n                        isSwordCharging: false,\n                        isDeflecting: false,\n                        isViperStingCharging: false,\n                        viperStingChargeProgress: 0,\n                        isBarrageCharging: false,\n                        barrageChargeProgress: 0,\n                        isCobraShotCharging: false,\n                        cobraShotChargeProgress: 0,\n                        isSkyfalling: false,\n                        isBackstabbing: false\n                    };\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_dragon_DragonRenderer__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                        entityId: parseInt(player.id.replace(/\\D/g, \"0\")),\n                        position: new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(player.position.x, player.position.y, player.position.z),\n                        world: ((_engineRef_current = engineRef.current) === null || _engineRef_current === void 0 ? void 0 : _engineRef_current.getWorld()) || new _ecs_World__WEBPACK_IMPORTED_MODULE_6__.World(),\n                        currentWeapon: player.weapon,\n                        currentSubclass: player.subclass,\n                        isCharging: playerState.isCharging,\n                        chargeProgress: playerState.chargeProgress,\n                        isSwinging: playerState.isSwinging,\n                        isSpinning: playerState.isSpinning,\n                        swordComboStep: playerState.swordComboStep,\n                        isDivineStorming: playerState.isDivineStorming,\n                        isSwordCharging: playerState.isSwordCharging,\n                        isDeflecting: playerState.isDeflecting,\n                        isViperStingCharging: playerState.isViperStingCharging,\n                        viperStingChargeProgress: playerState.viperStingChargeProgress,\n                        isBarrageCharging: playerState.isBarrageCharging,\n                        barrageChargeProgress: playerState.barrageChargeProgress,\n                        isCobraShotCharging: playerState.isCobraShotCharging,\n                        cobraShotChargeProgress: playerState.cobraShotChargeProgress,\n                        isSkyfalling: playerState.isSkyfalling,\n                        isBackstabbing: playerState.isBackstabbing,\n                        rotation: player.rotation,\n                        isLocalPlayer: false,\n                        onBowRelease: ()=>{},\n                        onScytheSwingComplete: ()=>{},\n                        onSwordSwingComplete: ()=>{}\n                    }, player.id, false, {\n                        fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                        lineNumber: 2644,\n                        columnNumber: 11\n                    }, this);\n                }),\n                Array.from(towers.values()).map((tower)=>{\n                    var _engineRef_current;\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_towers_TowerRenderer__WEBPACK_IMPORTED_MODULE_46__[\"default\"], {\n                        entityId: parseInt(tower.id.replace(/\\D/g, \"0\")),\n                        world: ((_engineRef_current = engineRef.current) === null || _engineRef_current === void 0 ? void 0 : _engineRef_current.getWorld()) || new _ecs_World__WEBPACK_IMPORTED_MODULE_6__.World(),\n                        position: new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(tower.position.x, tower.position.y, tower.position.z),\n                        ownerId: tower.ownerId,\n                        towerIndex: tower.towerIndex,\n                        health: tower.health,\n                        maxHealth: tower.maxHealth,\n                        isDead: tower.isDead,\n                        camera: camera\n                    }, tower.id, false, {\n                        fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                        lineNumber: 2679,\n                        columnNumber: 11\n                    }, this);\n                }),\n                engineRef.current && (()=>{\n                    const world = engineRef.current.getWorld();\n                    const summonedUnits = world.queryEntities([\n                        _ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform,\n                        _ecs_components_SummonedUnit__WEBPACK_IMPORTED_MODULE_14__.SummonedUnit,\n                        _ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health\n                    ]);\n                    return summonedUnits.map((entity)=>{\n                        const transform = entity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                        const unit = entity.getComponent(_ecs_components_SummonedUnit__WEBPACK_IMPORTED_MODULE_14__.SummonedUnit);\n                        const health = entity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                        if (!transform || !unit || !health || unit.isDead || health.isDead) {\n                            return null;\n                        }\n                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SummonedUnitRenderer__WEBPACK_IMPORTED_MODULE_47__[\"default\"], {\n                            entityId: entity.id,\n                            world: world,\n                            position: transform.position,\n                            ownerId: unit.ownerId,\n                            health: health.currentHealth,\n                            maxHealth: unit.maxHealth,\n                            isDead: unit.isDead\n                        }, unit.unitId, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2709,\n                            columnNumber: 13\n                        }, this);\n                    }).filter(Boolean); // Remove null entries\n                })(),\n                Array.from(players.values()).map((player)=>{\n                    if (player.id === (socket === null || socket === void 0 ? void 0 : socket.id)) return null; // Don't show health bar for local player\n                    // Get shield info from the server player entity if it exists\n                    const serverPlayerEntityId = serverPlayerEntities.current.get(player.id);\n                    let shieldAmount = 0;\n                    let maxShieldAmount = 200;\n                    if (serverPlayerEntityId && engineRef.current) {\n                        const entity = engineRef.current.getWorld().getEntity(serverPlayerEntityId);\n                        if (entity) {\n                            const shield = entity.getComponent(_ecs_components_Shield__WEBPACK_IMPORTED_MODULE_10__.Shield);\n                            if (shield) {\n                                shieldAmount = shield.currentShield;\n                                maxShieldAmount = shield.maxShield;\n                            }\n                        }\n                    }\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_PlayerHealthBar__WEBPACK_IMPORTED_MODULE_45__[\"default\"], {\n                        playerId: player.id,\n                        playerName: player.name,\n                        position: new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(player.position.x, player.position.y, player.position.z),\n                        health: player.health,\n                        maxHealth: player.maxHealth,\n                        shield: shieldAmount,\n                        maxShield: maxShieldAmount,\n                        camera: camera,\n                        showDistance: 35\n                    }, \"healthbar-\".concat(player.id), false, {\n                        fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                        lineNumber: 2744,\n                        columnNumber: 11\n                    }, this);\n                }),\n                engineRef.current && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_managers_UnifiedProjectileManager__WEBPACK_IMPORTED_MODULE_30__[\"default\"], {\n                            world: engineRef.current.getWorld()\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2762,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_projectiles_BowPowershotManager__WEBPACK_IMPORTED_MODULE_31__[\"default\"], {}, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2763,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_FrostNovaManager__WEBPACK_IMPORTED_MODULE_32__[\"default\"], {\n                            world: engineRef.current.getWorld()\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2764,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_StunManager__WEBPACK_IMPORTED_MODULE_33__[\"default\"], {\n                            world: engineRef.current.getWorld()\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2765,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_projectiles_CobraShotManager__WEBPACK_IMPORTED_MODULE_35__[\"default\"], {\n                            world: engineRef.current.getWorld()\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2766,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_DivineStormManager__WEBPACK_IMPORTED_MODULE_43__[\"default\"], {\n                            enemyData: Array.from(players.values()).filter((p)=>p.id !== (socket === null || socket === void 0 ? void 0 : socket.id)).map((p)=>({\n                                    id: p.id,\n                                    position: new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(p.position.x, p.position.y, p.position.z),\n                                    health: p.health\n                                })),\n                            onHitTarget: (targetId, damage)=>{\n                                if (broadcastPlayerDamage) {\n                                    broadcastPlayerDamage(targetId, damage);\n                                }\n                            },\n                            playerId: socket === null || socket === void 0 ? void 0 : socket.id\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2767,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_DeflectShieldManager__WEBPACK_IMPORTED_MODULE_44__[\"default\"], {}, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2780,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_pvp_OptimizedPVPManagers__WEBPACK_IMPORTED_MODULE_40__.OptimizedPVPCobraShotManager, {\n                            world: engineRef.current.getWorld(),\n                            players: Array.from(players.values()),\n                            serverPlayerEntities: serverPlayerEntities,\n                            localSocketId: socket === null || socket === void 0 ? void 0 : socket.id,\n                            onPlayerHit: (playerId, damage)=>{\n                                // CRITICAL FIX: Never damage the local player\n                                if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                                    console.log(\" Skipping Cobra Shot damage to local player \".concat(socket === null || socket === void 0 ? void 0 : socket.id));\n                                    return;\n                                }\n                                if (broadcastPlayerDamage) {\n                                    console.log(\"\\uD83C\\uDFAF Broadcasting Cobra Shot damage to player \".concat(playerId, \" (NOT local player \").concat(socket === null || socket === void 0 ? void 0 : socket.id, \")\"));\n                                    broadcastPlayerDamage(playerId, damage);\n                                }\n                            },\n                            onPlayerVenomed: (playerId, position)=>{\n                                // CRITICAL FIX: Never apply venom effect to the local player\n                                if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                                    console.log(\" Skipping Cobra Shot venom effect on local player \".concat(socket === null || socket === void 0 ? void 0 : socket.id));\n                                    return;\n                                }\n                                // Clone the position since it comes from the pool and will be released\n                                const clonedPosition = position.clone();\n                                createPvpVenomEffect(playerId, clonedPosition);\n                                // Broadcast venom effect to all players so they can see it\n                                if (broadcastPlayerEffect) {\n                                    console.log(\"\\uD83C\\uDFAF Broadcasting Cobra Shot venom effect to player \".concat(playerId, \" (NOT local player \").concat(socket === null || socket === void 0 ? void 0 : socket.id, \")\"));\n                                    broadcastPlayerEffect({\n                                        type: \"venom\",\n                                        targetPlayerId: playerId,\n                                        position: {\n                                            x: clonedPosition.x,\n                                            y: clonedPosition.y,\n                                            z: clonedPosition.z\n                                        },\n                                        duration: 6000\n                                    });\n                                }\n                            }\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2782,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_pvp_OptimizedPVPManagers__WEBPACK_IMPORTED_MODULE_40__.OptimizedPVPBarrageManager, {\n                            world: engineRef.current.getWorld(),\n                            players: Array.from(players.values()),\n                            serverPlayerEntities: serverPlayerEntities,\n                            localSocketId: socket === null || socket === void 0 ? void 0 : socket.id,\n                            onPlayerHit: (playerId, damage)=>{\n                                // CRITICAL FIX: Never damage the local player\n                                if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                                    console.log(\" Skipping Barrage damage to local player \".concat(socket === null || socket === void 0 ? void 0 : socket.id));\n                                    return;\n                                }\n                                if (broadcastPlayerDamage) {\n                                    console.log(\"\\uD83C\\uDFAF Broadcasting Barrage damage to player \".concat(playerId, \" (NOT local player \").concat(socket === null || socket === void 0 ? void 0 : socket.id, \")\"));\n                                    broadcastPlayerDamage(playerId, damage);\n                                }\n                            },\n                            onPlayerSlowed: (playerId, position)=>{\n                                // CRITICAL FIX: Never apply slow effect to the local player\n                                if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                                    console.log(\" Skipping Barrage slow effect on local player \".concat(socket === null || socket === void 0 ? void 0 : socket.id));\n                                    return;\n                                }\n                                // Clone the position since it comes from the pool and will be released\n                                const clonedPosition = position.clone();\n                                createPvpDebuffEffect(playerId, \"slowed\", clonedPosition, 5000); // 5 second slow\n                                // Broadcast debuff effect to all players so they can see it\n                                if (broadcastPlayerDebuff) {\n                                    console.log(\"\\uD83C\\uDFAF Broadcasting Barrage slow effect to player \".concat(playerId, \" (NOT local player \").concat(socket === null || socket === void 0 ? void 0 : socket.id, \")\"));\n                                    broadcastPlayerDebuff(playerId, \"slowed\", 5000, {\n                                        position: {\n                                            x: clonedPosition.x,\n                                            y: clonedPosition.y,\n                                            z: clonedPosition.z\n                                        },\n                                        speedMultiplier: 0.5\n                                    });\n                                }\n                            }\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2824,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_pvp_OptimizedPVPManagers__WEBPACK_IMPORTED_MODULE_40__.OptimizedPVPFrostNovaManager, {\n                            world: engineRef.current.getWorld(),\n                            players: Array.from(players.values()),\n                            serverPlayerEntities: serverPlayerEntities,\n                            localSocketId: socket === null || socket === void 0 ? void 0 : socket.id,\n                            onPlayerHit: (playerId, damage)=>{\n                                // CRITICAL FIX: Never damage the local player\n                                if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                                    console.log(\" Skipping Frost Nova damage to local player \".concat(socket === null || socket === void 0 ? void 0 : socket.id));\n                                    return;\n                                }\n                                if (broadcastPlayerDamage) {\n                                    console.log(\"\\uD83C\\uDFAF Broadcasting Frost Nova damage to player \".concat(playerId, \" (NOT local player \").concat(socket === null || socket === void 0 ? void 0 : socket.id, \")\"));\n                                    broadcastPlayerDamage(playerId, damage);\n                                }\n                            },\n                            onPlayerFrozen: (playerId, position)=>{\n                                // CRITICAL FIX: Never apply frozen effect to the local player\n                                if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                                    console.log(\" Skipping Frost Nova frozen effect on local player \".concat(socket === null || socket === void 0 ? void 0 : socket.id));\n                                    return;\n                                }\n                                // Clone the position since it comes from the pool and will be released\n                                const clonedPosition = position.clone();\n                                createPvpFrozenEffect(playerId, clonedPosition);\n                            }\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2864,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_pvp_OptimizedPVPManagers__WEBPACK_IMPORTED_MODULE_40__.OptimizedPVPViperStingManager, {\n                            world: engineRef.current.getWorld(),\n                            players: Array.from(players.values()),\n                            serverPlayerEntities: serverPlayerEntities,\n                            localSocketId: socket === null || socket === void 0 ? void 0 : socket.id,\n                            onPlayerHit: (playerId, damage)=>{\n                                // CRITICAL FIX: Never damage the local player\n                                if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                                    console.log(\" Skipping Viper Sting damage to local player \".concat(socket === null || socket === void 0 ? void 0 : socket.id));\n                                    return;\n                                }\n                                if (broadcastPlayerDamage) {\n                                    console.log(\"\\uD83C\\uDFAF Broadcasting Viper Sting damage to player \".concat(playerId, \" (NOT local player \").concat(socket === null || socket === void 0 ? void 0 : socket.id, \")\"));\n                                    broadcastPlayerDamage(playerId, damage);\n                                }\n                            },\n                            onPlayerVenomed: (playerId, position)=>{\n                                // CRITICAL FIX: Never apply venom effect to the local player\n                                if (playerId === (socket === null || socket === void 0 ? void 0 : socket.id)) {\n                                    console.log(\" Skipping Viper Sting venom effect on local player \".concat(socket === null || socket === void 0 ? void 0 : socket.id));\n                                    return;\n                                }\n                                // Clone the position since it comes from the pool and will be released\n                                const clonedPosition = position.clone();\n                                createPvpVenomEffect(playerId, clonedPosition);\n                            }\n                        }, void 0, false, {\n                            fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                            lineNumber: 2894,\n                            columnNumber: 11\n                        }, this),\n                        pvpReanimateEffects.map((reanimateEffect)=>{\n                            // Find the current position of the affected player\n                            const affectedPlayer = players.get(reanimateEffect.playerId);\n                            const currentPosition = affectedPlayer ? new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(affectedPlayer.position.x, affectedPlayer.position.y, affectedPlayer.position.z) : reanimateEffect.position;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PVPReanimateEffect, {\n                                position: currentPosition,\n                                onComplete: ()=>{\n                                    setPvpReanimateEffects((prev)=>prev.filter((effect)=>effect.id !== reanimateEffect.id));\n                                }\n                            }, reanimateEffect.id, false, {\n                                fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                                lineNumber: 2933,\n                                columnNumber: 15\n                            }, this);\n                        }),\n                        pvpSmiteEffects.map((smiteEffect)=>{\n                            // Create enemy data from other players for PVP smite damage\n                            const otherPlayersData = Array.from(players.entries()).filter((param)=>{\n                                let [playerId] = param;\n                                return playerId !== smiteEffect.playerId;\n                            }).map((param)=>{\n                                let [playerId, player] = param;\n                                return {\n                                    id: playerId,\n                                    position: new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(player.position.x, player.position.y, player.position.z),\n                                    health: player.health\n                                };\n                            });\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_Smite__WEBPACK_IMPORTED_MODULE_27__[\"default\"], {\n                                weaponType: _components_dragon_weapons__WEBPACK_IMPORTED_MODULE_26__.WeaponType.RUNEBLADE,\n                                position: smiteEffect.position,\n                                onComplete: ()=>{\n                                    setPvpSmiteEffects((prev)=>prev.filter((effect)=>effect.id !== smiteEffect.id));\n                                },\n                                onHit: (targetId, damage)=>{\n                                    // Handle PVP damage through broadcast system\n                                    broadcastPlayerDamage(targetId, damage, \"smite\");\n                                },\n                                enemyData: otherPlayersData,\n                                onDamageDealt: smiteEffect.onDamageDealt || ((damageDealt)=>{\n                                    // Fallback healing if no callback provided\n                                    if (damageDealt && playerEntity) {\n                                        const healthComponent = playerEntity.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health);\n                                        if (healthComponent) {\n                                            const oldHealth = healthComponent.currentHealth;\n                                            const didHeal = healthComponent.heal(20); // Smite healing amount\n                                            if (didHeal) {\n                                                console.log(\" Smite (PVP visual fallback) healed player for 20 HP! Health: \".concat(oldHealth, \" -> \").concat(healthComponent.currentHealth, \"/\").concat(healthComponent.maxHealth));\n                                            }\n                                        }\n                                    }\n                                })\n                            }, smiteEffect.id, false, {\n                                fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                                lineNumber: 2955,\n                                columnNumber: 15\n                            }, this);\n                        }),\n                        pvpDeathGraspEffects.map((deathGraspEffect)=>{\n                            // For local player, use current transform position instead of potentially stale players map position\n                            let currentStartPosition;\n                            if (deathGraspEffect.playerId === (socket === null || socket === void 0 ? void 0 : socket.id) && playerEntity) {\n                                // Local player - use current ECS position\n                                const transform = playerEntity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                                if (transform) {\n                                    currentStartPosition = transform.position.clone();\n                                } else {\n                                    // Fallback to players map if ECS position unavailable\n                                    const castingPlayer = players.get(deathGraspEffect.playerId);\n                                    currentStartPosition = castingPlayer ? new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(castingPlayer.position.x, castingPlayer.position.y, castingPlayer.position.z) : deathGraspEffect.startPosition;\n                                }\n                            } else {\n                                // Remote player - use players map position\n                                const castingPlayer = players.get(deathGraspEffect.playerId);\n                                currentStartPosition = castingPlayer ? new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(castingPlayer.position.x, castingPlayer.position.y, castingPlayer.position.z) : deathGraspEffect.startPosition;\n                            }\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_DeathGraspProjectile__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n                                startPosition: currentStartPosition,\n                                direction: deathGraspEffect.direction,\n                                casterId: deathGraspEffect.playerId,\n                                onHit: (targetId, position)=>{\n                                    console.log(\"\\uD83C\\uDFAF DeathGrasp hit target: \".concat(targetId, \" at position:\"), position);\n                                    console.log(\"\\uD83C\\uDFAF DeathGrasp caster position:\", currentStartPosition);\n                                    console.log(\"\\uD83C\\uDFAF DeathGrasp creating pull effect for target \".concat(targetId));\n                                    // Create the pulling effect when projectile hits\n                                    createPvpDeathGraspPull(targetId, currentStartPosition);\n                                },\n                                onComplete: ()=>{\n                                    setPvpDeathGraspEffects((prev)=>prev.filter((effect)=>effect.id !== deathGraspEffect.id));\n                                },\n                                players: players,\n                                localSocketId: socket === null || socket === void 0 ? void 0 : socket.id\n                            }, deathGraspEffect.id, false, {\n                                fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                                lineNumber: 3010,\n                                columnNumber: 15\n                            }, this);\n                        }),\n                        pvpDeathGraspPulls.map((pull)=>{\n                            if (!pull.isActive) return null;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_DeathGraspPull__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                                targetPlayerId: pull.targetPlayerId,\n                                casterPosition: pull.casterPosition,\n                                isActive: pull.isActive,\n                                onComplete: ()=>{\n                                    setPvpDeathGraspPulls((prev)=>prev.map((p)=>p.id === pull.id ? {\n                                                ...p,\n                                                isActive: false\n                                            } : p));\n                                },\n                                playerEntities: serverPlayerEntities,\n                                getEntityPosition: (entityId)=>{\n                                    var _engineRef_current;\n                                    const world = (_engineRef_current = engineRef.current) === null || _engineRef_current === void 0 ? void 0 : _engineRef_current.getWorld();\n                                    if (!world) return null;\n                                    const entity = world.getEntity(entityId);\n                                    if (!entity) return null;\n                                    const transform = entity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                                    return transform ? transform.position : null;\n                                },\n                                updateEntityPosition: (entityId, position)=>{\n                                    var _engineRef_current;\n                                    const world = (_engineRef_current = engineRef.current) === null || _engineRef_current === void 0 ? void 0 : _engineRef_current.getWorld();\n                                    if (!world) return;\n                                    const entity = world.getEntity(entityId);\n                                    if (!entity) return;\n                                    const transform = entity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                                    if (transform) {\n                                        transform.setPosition(position.x, position.y, position.z);\n                                    }\n                                }\n                            }, pull.id, false, {\n                                fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                                lineNumber: 3036,\n                                columnNumber: 15\n                            }, this);\n                        }),\n                        pvpFrostNovaEffects.map((frostNovaEffect)=>{\n                            // Find the current position of the casting player\n                            const castingPlayer = players.get(frostNovaEffect.playerId);\n                            const currentPosition = castingPlayer ? new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(castingPlayer.position.x, castingPlayer.position.y, castingPlayer.position.z) : frostNovaEffect.position;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_FrostNova__WEBPACK_IMPORTED_MODULE_34__[\"default\"], {\n                                position: currentPosition,\n                                duration: frostNovaEffect.duration,\n                                startTime: frostNovaEffect.startTime,\n                                onComplete: ()=>{\n                                    setPvpFrostNovaEffects((prev)=>prev.filter((effect)=>effect.id !== frostNovaEffect.id));\n                                }\n                            }, frostNovaEffect.id, false, {\n                                fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                                lineNumber: 3082,\n                                columnNumber: 15\n                            }, this);\n                        }),\n                        pvpVenomEffects.map((venomEffect)=>{\n                            // Find the current position of the affected player\n                            const affectedPlayer = players.get(venomEffect.playerId);\n                            const currentPosition = affectedPlayer ? new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(affectedPlayer.position.x, affectedPlayer.position.y, affectedPlayer.position.z) : venomEffect.position;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_projectiles_VenomEffect__WEBPACK_IMPORTED_MODULE_36__[\"default\"], {\n                                position: currentPosition,\n                                duration: venomEffect.duration,\n                                startTime: venomEffect.startTime,\n                                enemyId: venomEffect.playerId,\n                                enemyData: Array.from(players.values()).filter((p)=>p.id !== (socket === null || socket === void 0 ? void 0 : socket.id)).map((p)=>({\n                                        id: p.id,\n                                        position: new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(p.position.x, p.position.y, p.position.z),\n                                        health: p.health,\n                                        isDying: false\n                                    })),\n                                onComplete: ()=>{\n                                    setPvpVenomEffects((prev)=>prev.filter((effect)=>effect.id !== venomEffect.id));\n                                }\n                            }, venomEffect.id, false, {\n                                fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                                lineNumber: 3103,\n                                columnNumber: 15\n                            }, this);\n                        }),\n                        pvpDebuffEffects.map((debuffEffect)=>{\n                            // Find the current position of the affected player\n                            const affectedPlayer = players.get(debuffEffect.playerId);\n                            let currentPosition;\n                            // Special handling for local player to use the most up-to-date position\n                            if (debuffEffect.playerId === (socket === null || socket === void 0 ? void 0 : socket.id) && playerEntity) {\n                                const transform = playerEntity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                                if (transform) {\n                                    currentPosition = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(transform.position.x, transform.position.y + 0.5, transform.position.z);\n                                } else {\n                                    currentPosition = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(playerPosition.x, playerPosition.y + 0.5, playerPosition.z);\n                                }\n                            } else if (affectedPlayer) {\n                                currentPosition = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(affectedPlayer.position.x, affectedPlayer.position.y + 0.5, affectedPlayer.position.z);\n                            } else {\n                                currentPosition = new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(debuffEffect.position.x, debuffEffect.position.y + 0.5, debuffEffect.position.z);\n                            }\n                            // Use different effects for different debuff types\n                            if (debuffEffect.debuffType === \"frozen\") {\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_FrozenEffect__WEBPACK_IMPORTED_MODULE_38__[\"default\"], {\n                                    position: currentPosition,\n                                    duration: debuffEffect.duration,\n                                    startTime: debuffEffect.startTime,\n                                    enemyId: debuffEffect.playerId,\n                                    enemyData: Array.from(players.values()).filter((p)=>p.id !== (socket === null || socket === void 0 ? void 0 : socket.id)).map((p)=>{\n                                        // For local player, use the most current position\n                                        if (p.id === (socket === null || socket === void 0 ? void 0 : socket.id) && playerEntity) {\n                                            const transform = playerEntity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                                            const currentPos = transform ? transform.position : playerPosition;\n                                            return {\n                                                id: p.id,\n                                                position: currentPos.clone(),\n                                                health: p.health,\n                                                isDying: false\n                                            };\n                                        } else {\n                                            return {\n                                                id: p.id,\n                                                position: new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(p.position.x, p.position.y, p.position.z),\n                                                health: p.health,\n                                                isDying: false\n                                            };\n                                        }\n                                    }),\n                                    onComplete: ()=>{\n                                        setPvpDebuffEffects((prev)=>prev.filter((effect)=>effect.id !== debuffEffect.id));\n                                    }\n                                }, debuffEffect.id, false, {\n                                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                                    lineNumber: 3145,\n                                    columnNumber: 17\n                                }, this);\n                            } else if (debuffEffect.debuffType === \"stunned\") {\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_weapons_StunnedEffect__WEBPACK_IMPORTED_MODULE_39__[\"default\"], {\n                                    position: currentPosition,\n                                    duration: debuffEffect.duration,\n                                    startTime: debuffEffect.startTime,\n                                    enemyId: debuffEffect.playerId,\n                                    enemyData: Array.from(players.values()).filter((p)=>p.id !== (socket === null || socket === void 0 ? void 0 : socket.id)).map((p)=>{\n                                        // For local player, use the most current position\n                                        if (p.id === (socket === null || socket === void 0 ? void 0 : socket.id) && playerEntity) {\n                                            const transform = playerEntity.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n                                            const currentPos = transform ? transform.position : playerPosition;\n                                            return {\n                                                id: p.id,\n                                                position: currentPos.clone(),\n                                                health: p.health,\n                                                isDying: false\n                                            };\n                                        } else {\n                                            return {\n                                                id: p.id,\n                                                position: new _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.Vector3(p.position.x, p.position.y, p.position.z),\n                                                health: p.health,\n                                                isDying: false\n                                            };\n                                        }\n                                    }),\n                                    onComplete: ()=>{\n                                        setPvpDebuffEffects((prev)=>prev.filter((effect)=>effect.id !== debuffEffect.id));\n                                    }\n                                }, debuffEffect.id, false, {\n                                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                                    lineNumber: 3178,\n                                    columnNumber: 17\n                                }, this);\n                            } else {\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_DebuffIndicator__WEBPACK_IMPORTED_MODULE_37__[\"default\"], {\n                                    position: currentPosition,\n                                    debuffType: debuffEffect.debuffType,\n                                    duration: debuffEffect.duration,\n                                    startTime: debuffEffect.startTime,\n                                    onComplete: ()=>{\n                                        setPvpDebuffEffects((prev)=>prev.filter((effect)=>effect.id !== debuffEffect.id));\n                                    }\n                                }, debuffEffect.id, false, {\n                                    fileName: \"/Users/ridwan/Desktop/Nocturne/src/components/PVPGameScene.tsx\",\n                                    lineNumber: 3211,\n                                    columnNumber: 17\n                                }, this);\n                            }\n                        })\n                    ]\n                }, void 0, true)\n            ]\n        }, void 0, true)\n    }, void 0, false);\n}\n_s1(PVPGameScene, \"NMrxfEmxDiEpNx6eHNYy2nidlTo=\", false, function() {\n    return [\n        _barrel_optimize_names_useFrame_useThree_react_three_fiber__WEBPACK_IMPORTED_MODULE_54__.D,\n        _contexts_MultiplayerContext__WEBPACK_IMPORTED_MODULE_4__.useMultiplayer,\n        _components_projectiles_useBowPowershot__WEBPACK_IMPORTED_MODULE_50__.useBowPowershot,\n        _components_pvp_OptimizedPVPManagers__WEBPACK_IMPORTED_MODULE_40__.useOptimizedPVPEffects,\n        _barrel_optimize_names_useFrame_useThree_react_three_fiber__WEBPACK_IMPORTED_MODULE_54__.F\n    ];\n});\n_c1 = PVPGameScene;\nfunction setupPVPGame(engine, scene, camera, renderer, damagePlayerCallback, damageTowerCallback) {\n    const world = engine.getWorld();\n    const inputManager = engine.getInputManager();\n    // Enable shadows\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = _utils_three_exports__WEBPACK_IMPORTED_MODULE_2__.PCFSoftShadowMap;\n    // Create systems\n    const physicsSystem = new _systems_PhysicsSystem__WEBPACK_IMPORTED_MODULE_20__.PhysicsSystem();\n    const collisionSystem = new _systems_CollisionSystem__WEBPACK_IMPORTED_MODULE_21__.CollisionSystem(5); // 5 unit cell size for spatial hash\n    const combatSystem = new _systems_CombatSystem__WEBPACK_IMPORTED_MODULE_22__.CombatSystem(world);\n    const renderSystem = new _systems_RenderSystem__WEBPACK_IMPORTED_MODULE_16__.RenderSystem(scene, camera, renderer);\n    const projectileSystem = new _systems_ProjectileSystem__WEBPACK_IMPORTED_MODULE_19__.ProjectileSystem(world);\n    const towerSystem = new _systems_TowerSystem__WEBPACK_IMPORTED_MODULE_23__.TowerSystem(world);\n    const summonedUnitSystem = new _systems_SummonedUnitSystem__WEBPACK_IMPORTED_MODULE_24__.SummonedUnitSystem(world);\n    const controlSystem = new _systems_ControlSystem__WEBPACK_IMPORTED_MODULE_17__.ControlSystem(camera, inputManager, world, projectileSystem);\n    const cameraSystem = new _systems_CameraSystem__WEBPACK_IMPORTED_MODULE_18__.CameraSystem(camera, inputManager, {\n        distance: 8,\n        height: 2,\n        mouseSensitivity: 0.005,\n        smoothing: 0.15\n    });\n    const interpolationSystem = new _systems_InterpolationSystem__WEBPACK_IMPORTED_MODULE_25__.InterpolationSystem();\n    // Connect systems\n    projectileSystem.setCombatSystem(combatSystem);\n    towerSystem.setProjectileSystem(projectileSystem);\n    summonedUnitSystem.setCombatSystem(combatSystem);\n    // Set up combat system to route player damage through PVP system\n    combatSystem.setPlayerDamageCallback(damagePlayerCallback);\n    // Set up tower system callback for tower damage\n    // TODO: Implement tower damage callback mapping similar to player damage\n    // Add systems to world (order matters for dependencies)\n    world.addSystem(physicsSystem);\n    world.addSystem(collisionSystem);\n    world.addSystem(combatSystem);\n    world.addSystem(interpolationSystem); // Add interpolation system before render system\n    world.addSystem(renderSystem);\n    world.addSystem(projectileSystem);\n    world.addSystem(towerSystem);\n    world.addSystem(summonedUnitSystem);\n    world.addSystem(controlSystem);\n    world.addSystem(cameraSystem);\n    // Create player entity\n    const playerEntity = createPVPPlayer(world);\n    // Set player for control system and camera system\n    controlSystem.setPlayer(playerEntity);\n    cameraSystem.setTarget(playerEntity);\n    cameraSystem.snapToTarget();\n    console.log(\"\\uD83C\\uDF0D Total entities in PVP world:\", world.getAllEntities().length);\n    console.log(\"\\uD83D\\uDC64 Player entity created with ID: \".concat(playerEntity.id));\n    return {\n        player: playerEntity,\n        controlSystem,\n        towerSystem,\n        summonedUnitSystem\n    };\n}\nfunction createPVPPlayer(world) {\n    // Create player entity\n    const player = world.createEntity();\n    // Add Transform component\n    const transform = world.createComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform);\n    transform.setPosition(0, 0.5, 0); // Position sphere center at radius height above ground\n    player.addComponent(transform);\n    // NOTE: Local players do NOT get interpolation buffers\n    // Only remote players use interpolation for smooth movement\n    // Add Movement component\n    const movement = world.createComponent(_ecs_components_Movement__WEBPACK_IMPORTED_MODULE_8__.Movement);\n    movement.maxSpeed = 3.75; // Reduced from 8 to 3.65 for slower movement\n    movement.jumpForce = 8;\n    movement.friction = 0.85;\n    player.addComponent(movement);\n    // Add Health component with level-based max health\n    const maxHealth = _utils_ExperienceSystem__WEBPACK_IMPORTED_MODULE_53__.ExperienceSystem.getMaxHealthForLevel(1); // Start at level 1\n    const health = new _ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health(maxHealth);\n    health.enableRegeneration(2, 5); // Slower regen in PVP: 1 HP per second after 10 seconds\n    player.addComponent(health);\n    // Add Shield component with 100 max shield\n    const shield = new _ecs_components_Shield__WEBPACK_IMPORTED_MODULE_10__.Shield(250, 20, 2); // 100 max shield, 20/s regen, 5s delay\n    player.addComponent(shield);\n    // Add Collider component for environment collision and PVP damage detection\n    const collider = world.createComponent(_ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.Collider);\n    collider.type = _ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.ColliderType.SPHERE;\n    collider.radius = 1.2; // Reduced collision radius for better player proximity in PVP\n    collider.layer = _ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.CollisionLayer.PLAYER; // Use player layer for local player\n    // Set collision mask to collide with environment only - NO player-to-player collision in PVP\n    collider.setMask(_ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.CollisionLayer.ENVIRONMENT);\n    collider.setOffset(0, 0.5, 0); // Center on player\n    player.addComponent(collider);\n    console.log(\"\\uD83D\\uDC64 PVP player entity created with components:\", {\n        transform: !!player.getComponent(_ecs_components_Transform__WEBPACK_IMPORTED_MODULE_7__.Transform),\n        movement: !!player.getComponent(_ecs_components_Movement__WEBPACK_IMPORTED_MODULE_8__.Movement),\n        health: !!player.getComponent(_ecs_components_Health__WEBPACK_IMPORTED_MODULE_9__.Health),\n        shield: !!player.getComponent(_ecs_components_Shield__WEBPACK_IMPORTED_MODULE_10__.Shield),\n        collider: !!player.getComponent(_ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.Collider)\n    });\n    const localCollider = player.getComponent(_ecs_components_Collider__WEBPACK_IMPORTED_MODULE_12__.Collider);\n    return player;\n}\nfunction updateFPSCounter(fps) {\n    const fpsElement = document.getElementById(\"fps-counter\");\n    if (fpsElement) {\n        fpsElement.textContent = \"FPS: \".concat(fps);\n    }\n}\nvar _c, _c1;\n$RefreshReg$(_c, \"PVPReanimateEffect\");\n$RefreshReg$(_c1, \"PVPGameScene\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL1BWUEdhbWVTY2VuZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFd0U7QUFDaEI7QUFDOEY7QUFDakc7QUFDVTtBQUUvRCx5QkFBeUI7QUFDYztBQUNIO0FBQ21CO0FBQ0Y7QUFDSjtBQUNBO0FBRUk7QUFDOEI7QUFDcEM7QUFDYztBQUNRO0FBQ2Y7QUFDRTtBQUNGO0FBQ1E7QUFDTjtBQUNJO0FBQ047QUFDRjtBQUNjO0FBQ0U7QUFDSztBQUkxQjtBQUM4QjtBQUNaO0FBQ3FCO0FBQ1A7QUFDVjtBQUNWO0FBQ0o7QUFDa0I7QUFHVjtBQUNEO0FBQ0Q7QUFDRTtBQU9oQjtBQUNPO0FBQzJCO0FBQ3NCO0FBQ007QUFDL0M7QUFDQTtBQUNPO0FBdUM4QjtBQUNwQztBQUNZO0FBQ1U7QUFDTjtBQUNuQjtBQUc1RCw2REFBNkQ7QUFDN0QsTUFBTTBFLG1DQUE4RTFFLGlEQUFVLElBQUM7UUFBQyxFQUFFNEUsUUFBUSxFQUFFQyxVQUFVLEVBQUU7O0lBQ3RILE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHNUUsK0NBQVFBLENBQUM7SUFDakMsTUFBTTZFLFdBQVc7SUFFakIxRSw4RkFBUUEsQ0FBQyxDQUFDMkUsR0FBR0M7UUFDWEgsUUFBUUksQ0FBQUE7WUFDTixNQUFNQyxVQUFVRCxPQUFPRDtZQUN2QixJQUFJRSxXQUFXSixVQUFVO2dCQUN2Qkg7WUFDRjtZQUNBLE9BQU9PO1FBQ1Q7SUFDRjtJQUVBLE1BQU1DLFdBQVdQLE9BQU9FO0lBQ3hCLE1BQU1NLFVBQVVDLEtBQUtDLEdBQUcsQ0FBQ0gsV0FBV0UsS0FBS0UsRUFBRTtJQUMzQyxNQUFNQyxRQUFRLElBQUlMLFdBQVc7SUFFN0IscUJBQ0UsOERBQUNNO1FBQU1mLFVBQVVBLFNBQVNnQixPQUFPOztZQUU5QjttQkFBSUMsTUFBTTthQUFHLENB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QUFZLENBQUNPO0lBRXBCN0wsUUFBUUMsR0FBRyxDQUFDLDJEQUFpRDtRQUMzRHNLLFdBQVcsQ0FBQyxDQUFDM0YsT0FBTy9GLFlBQVksQ0FBQ3BNLGdFQUFTQTtRQUMxQytZLFVBQVUsQ0FBQyxDQUFDNUcsT0FBTy9GLFlBQVksQ0FBQ25NLDhEQUFRQTtRQUN4QzZPLFFBQVEsQ0FBQyxDQUFDcUQsT0FBTy9GLFlBQVksQ0FBQ2xNLDBEQUFNQTtRQUNwQ2tYLFFBQVEsQ0FBQyxDQUFDakYsT0FBTy9GLFlBQVksQ0FBQ2pNLDJEQUFNQTtRQUNwQ2laLFVBQVUsQ0FBQyxDQUFDakgsT0FBTy9GLFlBQVksQ0FBQy9MLCtEQUFRQTtJQUMxQztJQUVBLE1BQU0wbkIsZ0JBQWdCNVYsT0FBTy9GLFlBQVksQ0FBQy9MLCtEQUFRQTtJQUVsRCxPQUFPOFI7QUFDVDtBQUVBLFNBQVNnTixpQkFBaUI2SSxHQUFXO0lBQ25DLE1BQU1DLGFBQWFDLFNBQVNDLGNBQWMsQ0FBQztJQUMzQyxJQUFJRixZQUFZO1FBQ2RBLFdBQVdHLFdBQVcsR0FBRyxRQUFZLE9BQUpKO0lBQ25DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2NvbXBvbmVudHMvUFZQR2FtZVNjZW5lLnRzeD9mZmZiIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VUaHJlZSwgdXNlRnJhbWUgfSBmcm9tICdAcmVhY3QtdGhyZWUvZmliZXInO1xuaW1wb3J0IHsgVmVjdG9yMywgTWF0cml4NCwgQ2FtZXJhLCBQZXJzcGVjdGl2ZUNhbWVyYSwgU2NlbmUsIFdlYkdMUmVuZGVyZXIsIFBDRlNvZnRTaGFkb3dNYXAsIENvbG9yLCBRdWF0ZXJuaW9uLCBFdWxlciB9IGZyb20gJ0AvdXRpbHMvdGhyZWUtZXhwb3J0cyc7XG5pbXBvcnQgRHJhZ29uUmVuZGVyZXIgZnJvbSAnLi9kcmFnb24vRHJhZ29uUmVuZGVyZXInO1xuaW1wb3J0IHsgdXNlTXVsdGlwbGF5ZXIgfSBmcm9tICdAL2NvbnRleHRzL011bHRpcGxheWVyQ29udGV4dCc7XG5cbi8vIEltcG9ydCBvdXIgRUNTIHN5c3RlbXNcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gJ0AvY29yZS9FbmdpbmUnO1xuaW1wb3J0IHsgV29ybGQgfSBmcm9tICdAL2Vjcy9Xb3JsZCc7XG5pbXBvcnQgeyBUcmFuc2Zvcm0gfSBmcm9tICdAL2Vjcy9jb21wb25lbnRzL1RyYW5zZm9ybSc7XG5pbXBvcnQgeyBNb3ZlbWVudCB9IGZyb20gJ0AvZWNzL2NvbXBvbmVudHMvTW92ZW1lbnQnO1xuaW1wb3J0IHsgSGVhbHRoIH0gZnJvbSAnQC9lY3MvY29tcG9uZW50cy9IZWFsdGgnO1xuaW1wb3J0IHsgU2hpZWxkIH0gZnJvbSAnQC9lY3MvY29tcG9uZW50cy9TaGllbGQnO1xuaW1wb3J0IHsgUHJvamVjdGlsZSB9IGZyb20gJ0AvZWNzL2NvbXBvbmVudHMvUHJvamVjdGlsZSc7XG5pbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gJ0AvZWNzL2NvbXBvbmVudHMvUmVuZGVyZXInO1xuaW1wb3J0IHsgQ29sbGlkZXIsIENvbGxpc2lvbkxheWVyLCBDb2xsaWRlclR5cGUgfSBmcm9tICdAL2Vjcy9jb21wb25lbnRzL0NvbGxpZGVyJztcbmltcG9ydCB7IFRvd2VyIH0gZnJvbSAnQC9lY3MvY29tcG9uZW50cy9Ub3dlcic7XG5pbXBvcnQgeyBTdW1tb25lZFVuaXQgfSBmcm9tICdAL2Vjcy9jb21wb25lbnRzL1N1bW1vbmVkVW5pdCc7XG5pbXBvcnQgeyBJbnRlcnBvbGF0aW9uQnVmZmVyIH0gZnJvbSAnQC9lY3MvY29tcG9uZW50cy9JbnRlcnBvbGF0aW9uJztcbmltcG9ydCB7IFJlbmRlclN5c3RlbSB9IGZyb20gJ0Avc3lzdGVtcy9SZW5kZXJTeXN0ZW0nO1xuaW1wb3J0IHsgQ29udHJvbFN5c3RlbSB9IGZyb20gJ0Avc3lzdGVtcy9Db250cm9sU3lzdGVtJztcbmltcG9ydCB7IENhbWVyYVN5c3RlbSB9IGZyb20gJ0Avc3lzdGVtcy9DYW1lcmFTeXN0ZW0nO1xuaW1wb3J0IHsgUHJvamVjdGlsZVN5c3RlbSB9IGZyb20gJ0Avc3lzdGVtcy9Qcm9qZWN0aWxlU3lzdGVtJztcbmltcG9ydCB7IFBoeXNpY3NTeXN0ZW0gfSBmcm9tICdAL3N5c3RlbXMvUGh5c2ljc1N5c3RlbSc7XG5pbXBvcnQgeyBDb2xsaXNpb25TeXN0ZW0gfSBmcm9tICdAL3N5c3RlbXMvQ29sbGlzaW9uU3lzdGVtJztcbmltcG9ydCB7IENvbWJhdFN5c3RlbSB9IGZyb20gJ0Avc3lzdGVtcy9Db21iYXRTeXN0ZW0nO1xuaW1wb3J0IHsgVG93ZXJTeXN0ZW0gfSBmcm9tICdAL3N5c3RlbXMvVG93ZXJTeXN0ZW0nO1xuaW1wb3J0IHsgU3VtbW9uZWRVbml0U3lzdGVtIH0gZnJvbSAnQC9zeXN0ZW1zL1N1bW1vbmVkVW5pdFN5c3RlbSc7XG5pbXBvcnQgeyBJbnRlcnBvbGF0aW9uU3lzdGVtIH0gZnJvbSAnQC9zeXN0ZW1zL0ludGVycG9sYXRpb25TeXN0ZW0nO1xuaW1wb3J0IHsgV2VhcG9uVHlwZSwgV2VhcG9uU3ViY2xhc3MgfSBmcm9tICdAL2NvbXBvbmVudHMvZHJhZ29uL3dlYXBvbnMnO1xuaW1wb3J0IHsgUmVhbmltYXRlUmVmIH0gZnJvbSAnQC9jb21wb25lbnRzL3dlYXBvbnMvUmVhbmltYXRlJztcbmltcG9ydCBSZWFuaW1hdGUgZnJvbSAnQC9jb21wb25lbnRzL3dlYXBvbnMvUmVhbmltYXRlJztcbmltcG9ydCBSdW5lYmxhZGUgZnJvbSAnQC9jb21wb25lbnRzL3dlYXBvbnMvUnVuZWJsYWRlJztcbmltcG9ydCBTbWl0ZSBmcm9tICdAL2NvbXBvbmVudHMvd2VhcG9ucy9TbWl0ZSc7XG5pbXBvcnQgRGVhdGhHcmFzcFByb2plY3RpbGUgZnJvbSAnQC9jb21wb25lbnRzL3dlYXBvbnMvRGVhdGhHcmFzcFByb2plY3RpbGUnO1xuaW1wb3J0IERlYXRoR3Jhc3BQdWxsIGZyb20gJ0AvY29tcG9uZW50cy93ZWFwb25zL0RlYXRoR3Jhc3BQdWxsJztcbmltcG9ydCBVbmlmaWVkUHJvamVjdGlsZU1hbmFnZXIgZnJvbSAnQC9jb21wb25lbnRzL21hbmFnZXJzL1VuaWZpZWRQcm9qZWN0aWxlTWFuYWdlcic7XG5pbXBvcnQgQm93UG93ZXJzaG90TWFuYWdlciBmcm9tICdAL2NvbXBvbmVudHMvcHJvamVjdGlsZXMvQm93UG93ZXJzaG90TWFuYWdlcic7XG5pbXBvcnQgRnJvc3ROb3ZhTWFuYWdlciBmcm9tICdAL2NvbXBvbmVudHMvd2VhcG9ucy9Gcm9zdE5vdmFNYW5hZ2VyJztcbmltcG9ydCBTdHVuTWFuYWdlciBmcm9tICdAL2NvbXBvbmVudHMvd2VhcG9ucy9TdHVuTWFuYWdlcic7XG5pbXBvcnQgRnJvc3ROb3ZhIGZyb20gJ0AvY29tcG9uZW50cy93ZWFwb25zL0Zyb3N0Tm92YSc7XG5pbXBvcnQgQ29icmFTaG90TWFuYWdlciBmcm9tICdAL2NvbXBvbmVudHMvcHJvamVjdGlsZXMvQ29icmFTaG90TWFuYWdlcic7XG5pbXBvcnQgeyBDb2JyYVNob3RQcm9qZWN0aWxlIH0gZnJvbSAnQC9jb21wb25lbnRzL3Byb2plY3RpbGVzL0NvYnJhU2hvdCc7XG5pbXBvcnQgVmlwZXJTdGluZ01hbmFnZXIgZnJvbSAnQC9jb21wb25lbnRzL3Byb2plY3RpbGVzL1ZpcGVyU3RpbmdNYW5hZ2VyJztcbmltcG9ydCBWZW5vbUVmZmVjdCBmcm9tICdAL2NvbXBvbmVudHMvcHJvamVjdGlsZXMvVmVub21FZmZlY3QnO1xuaW1wb3J0IERlYnVmZkluZGljYXRvciBmcm9tICdAL2NvbXBvbmVudHMvdWkvRGVidWZmSW5kaWNhdG9yJztcbmltcG9ydCBGcm96ZW5FZmZlY3QgZnJvbSAnQC9jb21wb25lbnRzL3dlYXBvbnMvRnJvemVuRWZmZWN0JztcbmltcG9ydCBTdHVubmVkRWZmZWN0IGZyb20gJ0AvY29tcG9uZW50cy93ZWFwb25zL1N0dW5uZWRFZmZlY3QnO1xuaW1wb3J0IHtcbiAgT3B0aW1pemVkUFZQQ29icmFTaG90TWFuYWdlcixcbiAgT3B0aW1pemVkUFZQQmFycmFnZU1hbmFnZXIsXG4gIE9wdGltaXplZFBWUEZyb3N0Tm92YU1hbmFnZXIsXG4gIE9wdGltaXplZFBWUFZpcGVyU3RpbmdNYW5hZ2VyLFxuICB1c2VPcHRpbWl6ZWRQVlBFZmZlY3RzXG59IGZyb20gJ0AvY29tcG9uZW50cy9wdnAvT3B0aW1pemVkUFZQTWFuYWdlcnMnO1xuaW1wb3J0IHsgcHZwT2JqZWN0UG9vbCB9IGZyb20gJ0AvdXRpbHMvUFZQT2JqZWN0UG9vbCc7XG5pbXBvcnQgeyBwdnBTdGF0ZUJhdGNoZXIsIFBWUFN0YXRlVXBkYXRlSGVscGVycyB9IGZyb20gJ0AvdXRpbHMvUFZQU3RhdGVCYXRjaGVyJztcbmltcG9ydCBEaXZpbmVTdG9ybU1hbmFnZXIsIHsgdHJpZ2dlckdsb2JhbERpdmluZVN0b3JtIH0gZnJvbSAnQC9jb21wb25lbnRzL3dlYXBvbnMvRGl2aW5lU3Rvcm1NYW5hZ2VyJztcbmltcG9ydCBEZWZsZWN0U2hpZWxkTWFuYWdlciwgeyB0cmlnZ2VyR2xvYmFsRGVmbGVjdFNoaWVsZCB9IGZyb20gJ0AvY29tcG9uZW50cy93ZWFwb25zL0RlZmxlY3RTaGllbGRNYW5hZ2VyJztcbmltcG9ydCBQbGF5ZXJIZWFsdGhCYXIgZnJvbSAnQC9jb21wb25lbnRzL3VpL1BsYXllckhlYWx0aEJhcic7XG5pbXBvcnQgVG93ZXJSZW5kZXJlciBmcm9tICdAL2NvbXBvbmVudHMvdG93ZXJzL1Rvd2VyUmVuZGVyZXInO1xuaW1wb3J0IFN1bW1vbmVkVW5pdFJlbmRlcmVyIGZyb20gJ0AvY29tcG9uZW50cy9TdW1tb25lZFVuaXRSZW5kZXJlcic7XG5cbi8vIFBWUC1zcGVjaWZpYyBDb2JyYSBTaG90IE1hbmFnZXIgZm9yIGhpdHRpbmcgcGxheWVyc1xuaW50ZXJmYWNlIFBWUENvYnJhU2hvdE1hbmFnZXJQcm9wcyB7XG4gIHdvcmxkOiBXb3JsZDtcbiAgcGxheWVyczogQXJyYXk8eyBpZDogc3RyaW5nOyBwb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyIH07IGhlYWx0aDogbnVtYmVyIH0+O1xuICBvblBsYXllckhpdDogKHBsYXllcklkOiBzdHJpbmcsIGRhbWFnZTogbnVtYmVyKSA9PiB2b2lkO1xuICBvblBsYXllclZlbm9tZWQ6IChwbGF5ZXJJZDogc3RyaW5nLCBwb3NpdGlvbjogVmVjdG9yMykgPT4gdm9pZDtcbiAgc2VydmVyUGxheWVyRW50aXRpZXM6IFJlYWN0Lk11dGFibGVSZWZPYmplY3Q8TWFwPHN0cmluZywgbnVtYmVyPj47XG4gIGxvY2FsU29ja2V0SWQ/OiBzdHJpbmc7XG59XG5cbi8vIFBWUC1zcGVjaWZpYyBCYXJyYWdlIE1hbmFnZXIgZm9yIGhpdHRpbmcgcGxheWVycyB3aXRoIHNsb3cgZWZmZWN0XG5pbnRlcmZhY2UgUFZQQmFycmFnZU1hbmFnZXJQcm9wcyB7XG4gIHdvcmxkOiBXb3JsZDtcbiAgcGxheWVyczogQXJyYXk8eyBpZDogc3RyaW5nOyBwb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgejogbnVtYmVyIH07IGhlYWx0aDogbnVtYmVyIH0+O1xuICBvblBsYXllckhpdDogKHBsYXllcklkOiBzdHJpbmcsIGRhbWFnZTogbnVtYmVyKSA9PiB2b2lkO1xuICBvblBsYXllclNsb3dlZDogKHBsYXllcklkOiBzdHJpbmcsIHBvc2l0aW9uOiBWZWN0b3IzKSA9PiB2b2lkO1xuICBzZXJ2ZXJQbGF5ZXJFbnRpdGllczogUmVhY3QuTXV0YWJsZVJlZk9iamVjdDxNYXA8c3RyaW5nLCBudW1iZXI+PjtcbiAgbG9jYWxTb2NrZXRJZD86IHN0cmluZztcbn1cblxuLy8gUFZQLXNwZWNpZmljIEZyb3N0Tm92YSBNYW5hZ2VyIGZvciBoaXR0aW5nIHBsYXllcnMgd2l0aCBmcmVlemUgZWZmZWN0XG5pbnRlcmZhY2UgUFZQRnJvc3ROb3ZhTWFuYWdlclByb3BzIHtcbiAgd29ybGQ6IFdvcmxkO1xuICBwbGF5ZXJzOiBBcnJheTx7IGlkOiBzdHJpbmc7IHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB6OiBudW1iZXIgfTsgaGVhbHRoOiBudW1iZXIgfT47XG4gIG9uUGxheWVySGl0OiAocGxheWVySWQ6IHN0cmluZywgZGFtYWdlOiBudW1iZXIpID0+IHZvaWQ7XG4gIG9uUGxheWVyRnJvemVuOiAocGxheWVySWQ6IHN0cmluZywgcG9zaXRpb246IFZlY3RvcjMpID0+IHZvaWQ7XG4gIHNlcnZlclBsYXllckVudGl0aWVzOiBSZWFjdC5NdXRhYmxlUmVmT2JqZWN0PE1hcDxzdHJpbmcsIG51bWJlcj4+O1xuICBsb2NhbFNvY2tldElkPzogc3RyaW5nO1xufVxuXG4vLyBPbGQgUFZQIG1hbmFnZXJzIHJlbW92ZWQgLSB1c2luZyBvcHRpbWl6ZWQgdmVyc2lvbnMgd2l0aCBvYmplY3QgcG9vbGluZ1xuXG4vLyBPbGQgUFZQQmFycmFnZU1hbmFnZXIgcmVtb3ZlZCAtIHVzaW5nIG9wdGltaXplZCB2ZXJzaW9uXG5cbi8vIE9sZCBQVlBGcm9zdE5vdmFNYW5hZ2VyIHJlbW92ZWQgLSB1c2luZyBvcHRpbWl6ZWQgdmVyc2lvblxuXG5pbXBvcnQgeyBEYW1hZ2VOdW1iZXJEYXRhIH0gZnJvbSAnQC9jb21wb25lbnRzL0RhbWFnZU51bWJlcnMnO1xuaW1wb3J0IHsgc2V0R2xvYmFsQ3JpdGljYWxSdW5lQ291bnQsIHNldEdsb2JhbENyaXREYW1hZ2VSdW5lQ291bnQgfSBmcm9tICdAL2NvcmUvRGFtYWdlQ2FsY3VsYXRvcic7XG5pbXBvcnQgRW52aXJvbm1lbnQgZnJvbSAnQC9jb21wb25lbnRzL2Vudmlyb25tZW50L0Vudmlyb25tZW50JztcbmltcG9ydCB7IHVzZUJvd1Bvd2Vyc2hvdCB9IGZyb20gJ0AvY29tcG9uZW50cy9wcm9qZWN0aWxlcy91c2VCb3dQb3dlcnNob3QnO1xuaW1wb3J0IHsgdHJpZ2dlckdsb2JhbFZpcGVyU3RpbmcgfSBmcm9tICdAL2NvbXBvbmVudHMvcHJvamVjdGlsZXMvVmlwZXJTdGluZ01hbmFnZXInO1xuaW1wb3J0IHsgdHJpZ2dlckdsb2JhbEJhcnJhZ2UgfSBmcm9tICdAL2NvbXBvbmVudHMvcHJvamVjdGlsZXMvQmFycmFnZU1hbmFnZXInO1xuaW1wb3J0IHsgRXhwZXJpZW5jZVN5c3RlbSB9IGZyb20gJ0AvdXRpbHMvRXhwZXJpZW5jZVN5c3RlbSc7XG5pbXBvcnQgRXhwZXJpZW5jZUJhciBmcm9tICdAL2NvbXBvbmVudHMvdWkvRXhwZXJpZW5jZUJhcic7XG5cbi8vIFBWUCBSZWFuaW1hdGUgRWZmZWN0IENvbXBvbmVudCAoc3RhbmRhbG9uZSBoZWFsaW5nIGVmZmVjdClcbmNvbnN0IFBWUFJlYW5pbWF0ZUVmZmVjdDogUmVhY3QuRkM8eyBwb3NpdGlvbjogVmVjdG9yMzsgb25Db21wbGV0ZTogKCkgPT4gdm9pZCB9PiA9IFJlYWN0Lm1lbW8oKHsgcG9zaXRpb24sIG9uQ29tcGxldGUgfSkgPT4ge1xuICBjb25zdCBbdGltZSwgc2V0VGltZV0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgZHVyYXRpb24gPSAxLjU7XG4gIFxuICB1c2VGcmFtZSgoXywgZGVsdGEpID0+IHtcbiAgICBzZXRUaW1lKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3VGltZSA9IHByZXYgKyBkZWx0YTtcbiAgICAgIGlmIChuZXdUaW1lID49IGR1cmF0aW9uKSB7XG4gICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdUaW1lO1xuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCBwcm9ncmVzcyA9IHRpbWUgLyBkdXJhdGlvbjtcbiAgY29uc3Qgb3BhY2l0eSA9IE1hdGguc2luKHByb2dyZXNzICogTWF0aC5QSSk7XG4gIGNvbnN0IHNjYWxlID0gMSArIHByb2dyZXNzICogMjtcblxuICByZXR1cm4gKFxuICAgIDxncm91cCBwb3NpdGlvbj17cG9zaXRpb24udG9BcnJheSgpfT5cbiAgICAgIHsvKiBSaXNpbmcgaGVhbGluZyByaW5ncyAqL31cbiAgICAgIHtbLi4uQXJyYXkoMyldLm1hcCgoXywgaSkgPT4gKFxuICAgICAgICA8bWVzaFxuICAgICAgICAgIGtleT17YHJpbmctJHtpfWB9XG4gICAgICAgICAgcG9zaXRpb249e1swLCBwcm9ncmVzcyAqIDIgKyBpICogMC41LCAwXX1cbiAgICAgICAgICByb3RhdGlvbj17W01hdGguUEkgLyAyLCAwLCB0aW1lICogMl19XG4gICAgICAgID5cbiAgICAgICAgICA8dG9ydXNHZW9tZXRyeSBhcmdzPXtbMC44IC0gaSAqIDAuMiwgMC4wNSwgMTYsIDMyXX0gLz5cbiAgICAgICAgICA8bWVzaFN0YW5kYXJkTWF0ZXJpYWxcbiAgICAgICAgICAgIGNvbG9yPVwiIzYwRkYzOFwiXG4gICAgICAgICAgICBlbWlzc2l2ZT1cIiM2MEZGMzhcIlxuICAgICAgICAgICAgZW1pc3NpdmVJbnRlbnNpdHk9ezEuNX1cbiAgICAgICAgICAgIHRyYW5zcGFyZW50XG4gICAgICAgICAgICBvcGFjaXR5PXtvcGFjaXR5ICogKDEgLSBpICogMC4yKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L21lc2g+XG4gICAgICApKX1cblxuICAgICAgey8qIENlbnRyYWwgaGVhbGluZyBnbG93ICovfVxuICAgICAgPG1lc2ggc2NhbGU9e1tzY2FsZSwgc2NhbGUsIHNjYWxlXX0+XG4gICAgICAgIDxzcGhlcmVHZW9tZXRyeSBhcmdzPXtbMC41LCAzMiwgMzJdfSAvPlxuICAgICAgICA8bWVzaFN0YW5kYXJkTWF0ZXJpYWxcbiAgICAgICAgICBjb2xvcj1cIiM2MEZGMzhcIlxuICAgICAgICAgIGVtaXNzaXZlPVwiIzYwRkYzOFwiXG4gICAgICAgICAgZW1pc3NpdmVJbnRlbnNpdHk9ezJ9XG4gICAgICAgICAgdHJhbnNwYXJlbnRcbiAgICAgICAgICBvcGFjaXR5PXtvcGFjaXR5ICogMC4zfVxuICAgICAgICAvPlxuICAgICAgPC9tZXNoPlxuXG4gICAgICB7LyogSGVhbGluZyBwYXJ0aWNsZXMgKi99XG4gICAgICB7Wy4uLkFycmF5KDEyKV0ubWFwKChfLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gKGkgLyAxMikgKiBNYXRoLlBJICogMjtcbiAgICAgICAgY29uc3QgcmFkaXVzID0gMC43NSArIHByb2dyZXNzO1xuICAgICAgICBjb25zdCB5T2Zmc2V0ID0gcHJvZ3Jlc3MgKiAyO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8bWVzaFxuICAgICAgICAgICAga2V5PXtgcGFydGljbGUtJHtpfWB9XG4gICAgICAgICAgICBwb3NpdGlvbj17W1xuICAgICAgICAgICAgICBNYXRoLmNvcyhhbmdsZSArIHRpbWUgKiAyKSAqIHJhZGl1cy8xLjEsXG4gICAgICAgICAgICAgIHlPZmZzZXQgKyBNYXRoLnNpbih0aW1lICogMyArIGkpICogMC41LFxuICAgICAgICAgICAgICBNYXRoLnNpbihhbmdsZSArIHRpbWUgKiAyKSAqIHJhZGl1cy8xLjFcbiAgICAgICAgICAgIF19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHNwaGVyZUdlb21ldHJ5IGFyZ3M9e1swLjA5NSwgOCwgOF19IC8+XG4gICAgICAgICAgICA8bWVzaFN0YW5kYXJkTWF0ZXJpYWxcbiAgICAgICAgICAgICAgY29sb3I9XCIjNjBGRjM4XCJcbiAgICAgICAgICAgICAgZW1pc3NpdmU9XCIjNjBGRjM4XCJcbiAgICAgICAgICAgICAgZW1pc3NpdmVJbnRlbnNpdHk9ezIuNX1cbiAgICAgICAgICAgICAgdHJhbnNwYXJlbnRcbiAgICAgICAgICAgICAgb3BhY2l0eT17b3BhY2l0eSAqIDAuOH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9tZXNoPlxuICAgICAgICApO1xuICAgICAgfSl9XG5cbiAgICAgIHsvKiBMaWdodCBzb3VyY2UgKi99XG4gICAgICA8cG9pbnRMaWdodFxuICAgICAgICBjb2xvcj1cIiM2MEZGMzhcIlxuICAgICAgICBpbnRlbnNpdHk9ezIgKiBvcGFjaXR5fVxuICAgICAgICBkaXN0YW5jZT17NX1cbiAgICAgICAgZGVjYXk9ezJ9XG4gICAgICAvPlxuICAgIDwvZ3JvdXA+XG4gICk7XG59KTtcblxuUFZQUmVhbmltYXRlRWZmZWN0LmRpc3BsYXlOYW1lID0gJ1BWUFJlYW5pbWF0ZUVmZmVjdCc7XG5cbmludGVyZmFjZSBQVlBHYW1lU2NlbmVQcm9wcyB7XG4gIG9uRGFtYWdlTnVtYmVyc1VwZGF0ZT86IChkYW1hZ2VOdW1iZXJzOiBEYW1hZ2VOdW1iZXJEYXRhW10pID0+IHZvaWQ7XG4gIG9uRGFtYWdlTnVtYmVyQ29tcGxldGU/OiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgb25DYW1lcmFVcGRhdGU/OiAoY2FtZXJhOiBDYW1lcmEsIHNpemU6IHsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXIgfSkgPT4gdm9pZDtcbiAgb25HYW1lU3RhdGVVcGRhdGU/OiAoZ2FtZVN0YXRlOiB7XG4gICAgcGxheWVySGVhbHRoOiBudW1iZXI7XG4gICAgbWF4SGVhbHRoOiBudW1iZXI7XG4gICAgcGxheWVyU2hpZWxkOiBudW1iZXI7XG4gICAgbWF4U2hpZWxkOiBudW1iZXI7XG4gICAgY3VycmVudFdlYXBvbjogV2VhcG9uVHlwZTtcbiAgICBjdXJyZW50U3ViY2xhc3M6IFdlYXBvblN1YmNsYXNzO1xuICB9KSA9PiB2b2lkO1xuICBvbkNvbnRyb2xTeXN0ZW1VcGRhdGU/OiAoY29udHJvbFN5c3RlbTogYW55KSA9PiB2b2lkO1xuICBvbkV4cGVyaWVuY2VVcGRhdGU/OiAoZXhwZXJpZW5jZTogbnVtYmVyLCBsZXZlbDogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUFZQR2FtZVNjZW5lKHsgb25EYW1hZ2VOdW1iZXJzVXBkYXRlLCBvbkRhbWFnZU51bWJlckNvbXBsZXRlLCBvbkNhbWVyYVVwZGF0ZSwgb25HYW1lU3RhdGVVcGRhdGUsIG9uQ29udHJvbFN5c3RlbVVwZGF0ZSwgb25FeHBlcmllbmNlVXBkYXRlIH06IFBWUEdhbWVTY2VuZVByb3BzID0ge30pIHtcbiAgY29uc3QgeyBzY2VuZSwgY2FtZXJhLCBnbCwgc2l6ZSB9ID0gdXNlVGhyZWUoKTtcbiAgY29uc3Qge1xuICAgIHBsYXllcnMsXG4gICAgdG93ZXJzLFxuICAgIGdhbWVTdGFydGVkLFxuICAgIGlzSW5Sb29tLFxuICAgIHVwZGF0ZVBsYXllclBvc2l0aW9uLFxuICAgIHVwZGF0ZVBsYXllcldlYXBvbixcbiAgICB1cGRhdGVQbGF5ZXJIZWFsdGgsXG4gICAgYnJvYWRjYXN0UGxheWVyQXR0YWNrLFxuICAgIGJyb2FkY2FzdFBsYXllckFiaWxpdHksXG4gICAgYnJvYWRjYXN0UGxheWVyQW5pbWF0aW9uU3RhdGUsXG4gICAgYnJvYWRjYXN0UGxheWVyRGFtYWdlLCAvLyBOZXcgZnVuY3Rpb24gZm9yIFBWUCBkYW1hZ2VcbiAgICBicm9hZGNhc3RQbGF5ZXJFZmZlY3QsIC8vIEZvciBicm9hZGNhc3RpbmcgdmVub20gZWZmZWN0c1xuICAgIGJyb2FkY2FzdFBsYXllckRlYnVmZiwgLy8gRm9yIGJyb2FkY2FzdGluZyBkZWJ1ZmYgZWZmZWN0c1xuICAgIGRhbWFnZVRvd2VyLCAvLyBOZXcgZnVuY3Rpb24gZm9yIHRvd2VyIGRhbWFnZVxuICAgIHNvY2tldFxuICB9ID0gdXNlTXVsdGlwbGF5ZXIoKTtcbiAgXG4gIGNvbnN0IGVuZ2luZVJlZiA9IHVzZVJlZjxFbmdpbmUgfCBudWxsPihudWxsKTtcbiAgY29uc3QgcGxheWVyRW50aXR5UmVmID0gdXNlUmVmPG51bWJlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBjb250cm9sU3lzdGVtUmVmID0gdXNlUmVmPENvbnRyb2xTeXN0ZW0gfCBudWxsPihudWxsKTtcbiAgY29uc3QgdG93ZXJTeXN0ZW1SZWYgPSB1c2VSZWY8VG93ZXJTeXN0ZW0gfCBudWxsPihudWxsKTtcbiAgY29uc3Qgc3VtbW9uZWRVbml0U3lzdGVtUmVmID0gdXNlUmVmPFN1bW1vbmVkVW5pdFN5c3RlbSB8IG51bGw+KG51bGwpO1xuICBjb25zdCByZWFuaW1hdGVSZWYgPSB1c2VSZWY8UmVhbmltYXRlUmVmPihudWxsKTtcbiAgY29uc3QgaXNJbml0aWFsaXplZCA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IGxhc3RBbmltYXRpb25Ccm9hZGNhc3QgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IFtwbGF5ZXJQb3NpdGlvbiwgc2V0UGxheWVyUG9zaXRpb25dID0gdXNlU3RhdGUobmV3IFZlY3RvcjMoMCwgMC41LCAwKSk7XG4gIGNvbnN0IFtwbGF5ZXJFbnRpdHksIHNldFBsYXllckVudGl0eV0gPSB1c2VTdGF0ZTxhbnk+KG51bGwpO1xuICBcbiAgLy8gQ3JlYXRlIGEgcmVmIGZvciB0aGUgVmlwZXIgU3RpbmcgbWFuYWdlciB0aGF0IGluY2x1ZGVzIHBvc2l0aW9uIGFuZCByb3RhdGlvblxuICBjb25zdCB2aXBlclN0aW5nUGFyZW50UmVmID0gdXNlUmVmKHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoMCwgMC41LCAwKSxcbiAgICBxdWF0ZXJuaW9uOiB7IHg6IDAsIHk6IDAsIHo6IDAsIHc6IDEgfVxuICB9KTtcbiAgXG4gIC8vIFRyYWNrIHNlcnZlciBwbGF5ZXIgdG8gbG9jYWwgRUNTIGVudGl0eSBtYXBwaW5nIGZvciBQVlAgZGFtYWdlXG4gIGNvbnN0IHNlcnZlclBsYXllckVudGl0aWVzID0gdXNlUmVmPE1hcDxzdHJpbmcsIG51bWJlcj4+KG5ldyBNYXAoKSk7XG4gIFxuICAvLyBUcmFjayBzZXJ2ZXIgdG93ZXIgdG8gbG9jYWwgRUNTIGVudGl0eSBtYXBwaW5nXG4gIGNvbnN0IHNlcnZlclRvd2VyRW50aXRpZXMgPSB1c2VSZWY8TWFwPHN0cmluZywgbnVtYmVyPj4obmV3IE1hcCgpKTtcblxuICAvLyBUcmFjayBzZXJ2ZXIgc3VtbW9uZWQgdW5pdCB0byBsb2NhbCBFQ1MgZW50aXR5IG1hcHBpbmdcbiAgY29uc3Qgc2VydmVyU3VtbW9uZWRVbml0RW50aXRpZXMgPSB1c2VSZWY8TWFwPHN0cmluZywgbnVtYmVyPj4obmV3IE1hcCgpKTtcblxuICAvLyBFeHBlcmllbmNlIHN5c3RlbSBzdGF0ZVxuICBjb25zdCBbcGxheWVyRXhwZXJpZW5jZSwgc2V0UGxheWVyRXhwZXJpZW5jZV0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3BsYXllckxldmVsLCBzZXRQbGF5ZXJMZXZlbF0gPSB1c2VTdGF0ZSgxKTtcblxuLy8gTWFuYSBzeXN0ZW0gc3RhdGUgZm9yIHdlYXBvbnNcbmNvbnN0IFtjdXJyZW50TWFuYSwgc2V0Q3VycmVudE1hbmFdID0gdXNlU3RhdGUoMTUwKTtcbmNvbnN0IFttYXhNYW5hLCBzZXRNYXhNYW5hXSA9IHVzZVN0YXRlKDE1MCk7XG5cbiAgLy8gVHJhY2sgY3VycmVudCB3ZWFwb24gZm9yIG1hbmEgbWFuYWdlbWVudFxuICBjb25zdCBbY3VycmVudFdlYXBvbiwgc2V0Q3VycmVudFdlYXBvbl0gPSB1c2VTdGF0ZTxXZWFwb25UeXBlPihXZWFwb25UeXBlLkJPVyk7XG5cbiAgLy8gUFZQIFJlYW5pbWF0ZSBFZmZlY3QgTWFuYWdlbWVudFxuICBjb25zdCBbcHZwUmVhbmltYXRlRWZmZWN0cywgc2V0UHZwUmVhbmltYXRlRWZmZWN0c10gPSB1c2VTdGF0ZTxBcnJheTx7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBwbGF5ZXJJZDogc3RyaW5nO1xuICAgIHBvc2l0aW9uOiBWZWN0b3IzO1xuICAgIHN0YXJ0VGltZTogbnVtYmVyO1xuICAgIGR1cmF0aW9uOiBudW1iZXI7XG4gIH0+PihbXSk7XG4gIGNvbnN0IG5leHRSZWFuaW1hdGVFZmZlY3RJZCA9IHVzZVJlZigwKTtcblxuICAvLyBQVlAgU21pdGUgRWZmZWN0IE1hbmFnZW1lbnRcbiAgY29uc3QgW3B2cFNtaXRlRWZmZWN0cywgc2V0UHZwU21pdGVFZmZlY3RzXSA9IHVzZVN0YXRlPEFycmF5PHtcbiAgICBpZDogbnVtYmVyO1xuICAgIHBsYXllcklkOiBzdHJpbmc7XG4gICAgcG9zaXRpb246IFZlY3RvcjM7XG4gICAgc3RhcnRUaW1lOiBudW1iZXI7XG4gICAgZHVyYXRpb246IG51bWJlcjtcbiAgICBvbkRhbWFnZURlYWx0PzogKGRhbWFnZURlYWx0OiBib29sZWFuKSA9PiB2b2lkO1xuICB9Pj4oW10pO1xuICBjb25zdCBuZXh0U21pdGVFZmZlY3RJZCA9IHVzZVJlZigwKTtcblxuICAvLyBQVlAgRGVhdGhHcmFzcCBFZmZlY3QgTWFuYWdlbWVudFxuICBjb25zdCBbcHZwRGVhdGhHcmFzcEVmZmVjdHMsIHNldFB2cERlYXRoR3Jhc3BFZmZlY3RzXSA9IHVzZVN0YXRlPEFycmF5PHtcbiAgICBpZDogbnVtYmVyO1xuICAgIHBsYXllcklkOiBzdHJpbmc7XG4gICAgc3RhcnRQb3NpdGlvbjogVmVjdG9yMztcbiAgICBkaXJlY3Rpb246IFZlY3RvcjM7XG4gICAgc3RhcnRUaW1lOiBudW1iZXI7XG4gICAgZHVyYXRpb246IG51bWJlcjtcbiAgICBwdWxsVHJpZ2dlcmVkOiBib29sZWFuO1xuICB9Pj4oW10pO1xuICBjb25zdCBuZXh0RGVhdGhHcmFzcEVmZmVjdElkID0gdXNlUmVmKDApO1xuXG4gIC8vIFBWUCBEZWF0aEdyYXNwIFB1bGwgTWFuYWdlbWVudFxuICBjb25zdCBbcHZwRGVhdGhHcmFzcFB1bGxzLCBzZXRQdnBEZWF0aEdyYXNwUHVsbHNdID0gdXNlU3RhdGU8QXJyYXk8e1xuICAgIGlkOiBudW1iZXI7XG4gICAgdGFyZ2V0UGxheWVySWQ6IHN0cmluZztcbiAgICBjYXN0ZXJQb3NpdGlvbjogVmVjdG9yMztcbiAgICBzdGFydFRpbWU6IG51bWJlcjtcbiAgICBkdXJhdGlvbjogbnVtYmVyO1xuICAgIGlzQWN0aXZlOiBib29sZWFuO1xuICB9Pj4oW10pO1xuICBjb25zdCBuZXh0RGVhdGhHcmFzcFB1bGxJZCA9IHVzZVJlZigwKTtcbiAgXG4gIC8vIFBWUCBWZW5vbSBFZmZlY3QgTWFuYWdlbWVudFxuICBjb25zdCBbcHZwVmVub21FZmZlY3RzLCBzZXRQdnBWZW5vbUVmZmVjdHNdID0gdXNlU3RhdGU8QXJyYXk8e1xuICAgIGlkOiBudW1iZXI7XG4gICAgcGxheWVySWQ6IHN0cmluZztcbiAgICBwb3NpdGlvbjogVmVjdG9yMztcbiAgICBzdGFydFRpbWU6IG51bWJlcjtcbiAgICBkdXJhdGlvbjogbnVtYmVyO1xuICB9Pj4oW10pO1xuICBjb25zdCBuZXh0VmVub21FZmZlY3RJZCA9IHVzZVJlZigwKTtcblxuICAvLyBQVlAgRGVidWZmIE1hbmFnZW1lbnRcbiAgY29uc3QgW3B2cERlYnVmZkVmZmVjdHMsIHNldFB2cERlYnVmZkVmZmVjdHNdID0gdXNlU3RhdGU8QXJyYXk8e1xuICAgIGlkOiBudW1iZXI7XG4gICAgcGxheWVySWQ6IHN0cmluZztcbiAgICBkZWJ1ZmZUeXBlOiAnZnJvemVuJyB8ICdzbG93ZWQnIHwgJ3N0dW5uZWQnO1xuICAgIHBvc2l0aW9uOiBWZWN0b3IzO1xuICAgIHN0YXJ0VGltZTogbnVtYmVyO1xuICAgIGR1cmF0aW9uOiBudW1iZXI7XG4gIH0+PihbXSk7XG4gIGNvbnN0IG5leHREZWJ1ZmZFZmZlY3RJZCA9IHVzZVJlZigwKTtcblxuICAvLyBQVlAgRnJvc3QgTm92YSBFZmZlY3QgTWFuYWdlbWVudFxuICBjb25zdCBbcHZwRnJvc3ROb3ZhRWZmZWN0cywgc2V0UHZwRnJvc3ROb3ZhRWZmZWN0c10gPSB1c2VTdGF0ZTxBcnJheTx7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBwbGF5ZXJJZDogc3RyaW5nO1xuICAgIHBvc2l0aW9uOiBWZWN0b3IzO1xuICAgIHN0YXJ0VGltZTogbnVtYmVyO1xuICAgIGR1cmF0aW9uOiBudW1iZXI7XG4gIH0+PihbXSk7XG4gIGNvbnN0IG5leHRGcm9zdE5vdmFFZmZlY3RJZCA9IHVzZVJlZigwKTtcbiAgXG4gIC8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSB2ZW5vbSBlZmZlY3Qgb24gUFZQIHBsYXllcnNcbiAgLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGRlYnVmZiBlZmZlY3Qgb24gUFZQIHBsYXllcnNcbiAgY29uc3QgY3JlYXRlUHZwRGVidWZmRWZmZWN0ID0gdXNlQ2FsbGJhY2soKHBsYXllcklkOiBzdHJpbmcsIGRlYnVmZlR5cGU6ICdmcm96ZW4nIHwgJ3Nsb3dlZCcgfCAnc3R1bm5lZCcsIHBvc2l0aW9uOiBWZWN0b3IzLCBkdXJhdGlvbjogbnVtYmVyID0gNTAwMCkgPT4ge1xuICAgIC8vIERlYnVnOiBDaGVjayBpZiB0aGlzIGlzIHRoZSBsb2NhbCBwbGF5ZXJcbiAgICBjb25zdCBpc0xvY2FsUGxheWVyID0gcGxheWVySWQgPT09IHNvY2tldD8uaWQ7XG4gICAgXG4gICAgY29uc3QgZGVidWZmRWZmZWN0ID0ge1xuICAgICAgaWQ6IG5leHREZWJ1ZmZFZmZlY3RJZC5jdXJyZW50KyssXG4gICAgICBwbGF5ZXJJZCxcbiAgICAgIGRlYnVmZlR5cGUsXG4gICAgICBwb3NpdGlvbjogcG9zaXRpb24uY2xvbmUoKSxcbiAgICAgIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcbiAgICAgIGR1cmF0aW9uXG4gICAgfTtcbiAgICBcbiAgICAvLyBVc2UgYmF0Y2hlZCB1cGRhdGVzIGZvciBkZWJ1ZmYgZWZmZWN0c1xuICAgIFBWUFN0YXRlVXBkYXRlSGVscGVycy5iYXRjaEVmZmVjdFVwZGF0ZXMoW3tcbiAgICAgIHR5cGU6ICdhZGQnLFxuICAgICAgZWZmZWN0VHlwZTogJ2RlYnVmZicsXG4gICAgICBzZXR0ZXI6IHNldFB2cERlYnVmZkVmZmVjdHMsXG4gICAgICBkYXRhOiBkZWJ1ZmZFZmZlY3RcbiAgICB9XSk7XG4gICAgXG4gICAgLy8gQXBwbHkgdGhlIGRlYnVmZiB0byB0aGUgbG9jYWwgcGxheWVyJ3MgbW92ZW1lbnQgaWYgdGhpcyBpcyB0YXJnZXRpbmcgdXNcbiAgICBpZiAoaXNMb2NhbFBsYXllciAmJiBwbGF5ZXJFbnRpdHkpIHtcbiAgICAgIGNvbnN0IHBsYXllck1vdmVtZW50ID0gcGxheWVyRW50aXR5LmdldENvbXBvbmVudChNb3ZlbWVudCk7XG4gICAgICBpZiAocGxheWVyTW92ZW1lbnQpIHtcbiAgICAgICAgaWYgKGRlYnVmZlR5cGUgPT09ICdmcm96ZW4nKSB7XG4gICAgICAgICAgcGxheWVyTW92ZW1lbnQuZnJlZXplKGR1cmF0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChkZWJ1ZmZUeXBlID09PSAnc2xvd2VkJykge1xuICAgICAgICAgIHBsYXllck1vdmVtZW50LnNsb3coZHVyYXRpb24sIDAuNSk7IC8vIDUwJSBzcGVlZCByZWR1Y3Rpb25cbiAgICAgICAgfSBlbHNlIGlmIChkZWJ1ZmZUeXBlID09PSAnc3R1bm5lZCcpIHtcbiAgICAgICAgICBwbGF5ZXJNb3ZlbWVudC5mcmVlemUoZHVyYXRpb24pOyAvLyBTdHVuIHVzZXMgc2FtZSBtb3ZlbWVudCByZXN0cmljdGlvbiBhcyBmcmVlemVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbiB1cCBkZWJ1ZmYgZWZmZWN0IGFmdGVyIGR1cmF0aW9uIHVzaW5nIGJhdGNoZWQgdXBkYXRlc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgUFZQU3RhdGVVcGRhdGVIZWxwZXJzLmJhdGNoRWZmZWN0VXBkYXRlcyhbe1xuICAgICAgICB0eXBlOiAncmVtb3ZlJyxcbiAgICAgICAgZWZmZWN0VHlwZTogJ2RlYnVmZicsXG4gICAgICAgIHNldHRlcjogc2V0UHZwRGVidWZmRWZmZWN0cyxcbiAgICAgICAgZmlsdGVySWQ6IGRlYnVmZkVmZmVjdC5pZFxuICAgICAgfV0pO1xuICAgIH0sIGRlYnVmZkVmZmVjdC5kdXJhdGlvbik7XG4gIH0sIFtzb2NrZXQ/LmlkLCBwbGF5ZXJFbnRpdHldKTtcblxuICAvLyBGdW5jdGlvbiB0byBjcmVhdGUgZnJvemVuIGVmZmVjdCBvbiBQVlAgcGxheWVycyAoY2FsbGVkIGJ5IFBWUEZyb3N0Tm92YU1hbmFnZXIpXG4gIGNvbnN0IGNyZWF0ZVB2cEZyb3plbkVmZmVjdCA9IHVzZUNhbGxiYWNrKChwbGF5ZXJJZDogc3RyaW5nLCBwb3NpdGlvbjogVmVjdG9yMykgPT4ge1xuICAgIC8vIERlYnVnOiBDaGVjayBpZiB0aGlzIGlzIHRoZSBsb2NhbCBwbGF5ZXJcbiAgICBjb25zdCBpc0xvY2FsUGxheWVyID0gcGxheWVySWQgPT09IHNvY2tldD8uaWQ7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHRoZSBmcm96ZW4gZGVidWZmIGVmZmVjdCAoMyBzZWNvbmQgZnJlZXplKVxuICAgIGNyZWF0ZVB2cERlYnVmZkVmZmVjdChwbGF5ZXJJZCwgJ2Zyb3plbicsIHBvc2l0aW9uLCA1MDAwKTtcbiAgICBcbiAgICAvLyBCcm9hZGNhc3QgZGVidWZmIGVmZmVjdCB0byBhbGwgcGxheWVycyBzbyB0aGV5IGNhbiBzZWUgaXRcbiAgICBpZiAoYnJvYWRjYXN0UGxheWVyRGVidWZmKSB7XG4gICAgICBicm9hZGNhc3RQbGF5ZXJEZWJ1ZmYocGxheWVySWQsICdmcm96ZW4nLCA1MDAwLCB7XG4gICAgICAgIHBvc2l0aW9uOiB7IHg6IHBvc2l0aW9uLngsIHk6IHBvc2l0aW9uLnksIHo6IHBvc2l0aW9uLnogfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbY3JlYXRlUHZwRGVidWZmRWZmZWN0LCBicm9hZGNhc3RQbGF5ZXJEZWJ1ZmZdKTtcblxuICAvLyBGdW5jdGlvbiB0byBjcmVhdGUgcmVhbmltYXRlIGVmZmVjdCBvbiBQVlAgcGxheWVyc1xuICBjb25zdCBjcmVhdGVQdnBSZWFuaW1hdGVFZmZlY3QgPSB1c2VDYWxsYmFjaygocGxheWVySWQ6IHN0cmluZywgcG9zaXRpb246IFZlY3RvcjMpID0+IHtcblxuICAgIGNvbnN0IHJlYW5pbWF0ZUVmZmVjdCA9IHtcbiAgICAgIGlkOiBuZXh0UmVhbmltYXRlRWZmZWN0SWQuY3VycmVudCsrLFxuICAgICAgcGxheWVySWQsXG4gICAgICBwb3NpdGlvbjogcG9zaXRpb24uY2xvbmUoKSxcbiAgICAgIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcbiAgICAgIGR1cmF0aW9uOiAxNTAwIC8vIDEuNSBzZWNvbmRzIHJlYW5pbWF0ZSBkdXJhdGlvbiAobWF0Y2hlcyBSZWFuaW1hdGUgY29tcG9uZW50KVxuICAgIH07XG5cbiAgICAvLyBVc2UgYmF0Y2hlZCB1cGRhdGVzIGZvciByZWFuaW1hdGUgZWZmZWN0c1xuICAgIFBWUFN0YXRlVXBkYXRlSGVscGVycy5iYXRjaEVmZmVjdFVwZGF0ZXMoW3tcbiAgICAgIHR5cGU6ICdhZGQnLFxuICAgICAgZWZmZWN0VHlwZTogJ3JlYW5pbWF0ZScsXG4gICAgICBzZXR0ZXI6IHNldFB2cFJlYW5pbWF0ZUVmZmVjdHMsXG4gICAgICBkYXRhOiByZWFuaW1hdGVFZmZlY3RcbiAgICB9XSk7XG5cbiAgICAvLyBDbGVhbiB1cCByZWFuaW1hdGUgZWZmZWN0IGFmdGVyIGR1cmF0aW9uIHVzaW5nIGJhdGNoZWQgdXBkYXRlc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgUFZQU3RhdGVVcGRhdGVIZWxwZXJzLmJhdGNoRWZmZWN0VXBkYXRlcyhbe1xuICAgICAgICB0eXBlOiAncmVtb3ZlJyxcbiAgICAgICAgZWZmZWN0VHlwZTogJ3JlYW5pbWF0ZScsXG4gICAgICAgIHNldHRlcjogc2V0UHZwUmVhbmltYXRlRWZmZWN0cyxcbiAgICAgICAgZmlsdGVySWQ6IHJlYW5pbWF0ZUVmZmVjdC5pZFxuICAgICAgfV0pO1xuICAgIH0sIHJlYW5pbWF0ZUVmZmVjdC5kdXJhdGlvbik7XG4gIH0sIFtdKTtcblxuICAvLyBGdW5jdGlvbiB0byBjcmVhdGUgc21pdGUgZWZmZWN0IG9uIFBWUCBwbGF5ZXJzXG4gIGNvbnN0IGNyZWF0ZVB2cFNtaXRlRWZmZWN0ID0gdXNlQ2FsbGJhY2soKHBsYXllcklkOiBzdHJpbmcsIHBvc2l0aW9uOiBWZWN0b3IzLCBvbkRhbWFnZURlYWx0PzogKGRhbWFnZURlYWx0OiBib29sZWFuKSA9PiB2b2lkKSA9PiB7XG5cbiAgICBjb25zdCBzbWl0ZUVmZmVjdCA9IHtcbiAgICAgIGlkOiBuZXh0U21pdGVFZmZlY3RJZC5jdXJyZW50KyssXG4gICAgICBwbGF5ZXJJZCxcbiAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgc3RhcnRUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgZHVyYXRpb246IDkwMCwgLy8gMC45IHNlY29uZHMgc21pdGUgZHVyYXRpb24gKG1hdGNoZXMgU21pdGUgY29tcG9uZW50KVxuICAgICAgb25EYW1hZ2VEZWFsdDogb25EYW1hZ2VEZWFsdCAvLyBJbmNsdWRlIGhlYWxpbmcgY2FsbGJhY2tcbiAgICB9O1xuXG4gICAgLy8gVXNlIGJhdGNoZWQgdXBkYXRlcyBmb3Igc21pdGUgZWZmZWN0c1xuICAgIFBWUFN0YXRlVXBkYXRlSGVscGVycy5iYXRjaEVmZmVjdFVwZGF0ZXMoW3tcbiAgICAgIHR5cGU6ICdhZGQnLFxuICAgICAgZWZmZWN0VHlwZTogJ3NtaXRlJyxcbiAgICAgIHNldHRlcjogc2V0UHZwU21pdGVFZmZlY3RzLFxuICAgICAgZGF0YTogc21pdGVFZmZlY3RcbiAgICB9XSk7XG5cbiAgICAvLyBDbGVhbiB1cCBzbWl0ZSBlZmZlY3QgYWZ0ZXIgZHVyYXRpb24gdXNpbmcgYmF0Y2hlZCB1cGRhdGVzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBQVlBTdGF0ZVVwZGF0ZUhlbHBlcnMuYmF0Y2hFZmZlY3RVcGRhdGVzKFt7XG4gICAgICAgIHR5cGU6ICdyZW1vdmUnLFxuICAgICAgICBlZmZlY3RUeXBlOiAnc21pdGUnLFxuICAgICAgICBzZXR0ZXI6IHNldFB2cFNtaXRlRWZmZWN0cyxcbiAgICAgICAgZmlsdGVySWQ6IHNtaXRlRWZmZWN0LmlkXG4gICAgICB9XSk7XG4gICAgfSwgc21pdGVFZmZlY3QuZHVyYXRpb24pO1xuICB9LCBbXSk7XG5cbiAgLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGRlYXRoIGdyYXNwIGVmZmVjdCBvbiBQVlAgcGxheWVyc1xuICBjb25zdCBjcmVhdGVQdnBEZWF0aEdyYXNwRWZmZWN0ID0gdXNlQ2FsbGJhY2soKHBsYXllcklkOiBzdHJpbmcsIHN0YXJ0UG9zaXRpb246IFZlY3RvcjMsIGRpcmVjdGlvbjogVmVjdG9yMykgPT4ge1xuXG4gICAgY29uc3QgZGVhdGhHcmFzcEVmZmVjdCA9IHtcbiAgICAgIGlkOiBuZXh0RGVhdGhHcmFzcEVmZmVjdElkLmN1cnJlbnQrKyxcbiAgICAgIHBsYXllcklkLFxuICAgICAgc3RhcnRQb3NpdGlvbjogc3RhcnRQb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb24uY2xvbmUoKSxcbiAgICAgIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcbiAgICAgIGR1cmF0aW9uOiAxMjAwLCAvLyAxLjIgc2Vjb25kcyBkZWF0aCBncmFzcCBkdXJhdGlvbiAobWF0Y2hlcyBEZWF0aEdyYXNwUHJvamVjdGlsZSBjb21wb25lbnQpXG4gICAgICBwdWxsVHJpZ2dlcmVkOiBmYWxzZVxuICAgIH07XG5cbiAgICAvLyBVc2UgYmF0Y2hlZCB1cGRhdGVzIGZvciBkZWF0aCBncmFzcCBlZmZlY3RzXG4gICAgUFZQU3RhdGVVcGRhdGVIZWxwZXJzLmJhdGNoRWZmZWN0VXBkYXRlcyhbe1xuICAgICAgdHlwZTogJ2FkZCcsXG4gICAgICBlZmZlY3RUeXBlOiAnZGVhdGhncmFzcCcsXG4gICAgICBzZXR0ZXI6IHNldFB2cERlYXRoR3Jhc3BFZmZlY3RzLFxuICAgICAgZGF0YTogZGVhdGhHcmFzcEVmZmVjdFxuICAgIH1dKTtcblxuICAgIC8vIENsZWFuIHVwIGRlYXRoIGdyYXNwIGVmZmVjdCBhZnRlciBkdXJhdGlvbiB1c2luZyBiYXRjaGVkIHVwZGF0ZXNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIFBWUFN0YXRlVXBkYXRlSGVscGVycy5iYXRjaEVmZmVjdFVwZGF0ZXMoW3tcbiAgICAgICAgdHlwZTogJ3JlbW92ZScsXG4gICAgICAgIGVmZmVjdFR5cGU6ICdkZWF0aGdyYXNwJyxcbiAgICAgICAgc2V0dGVyOiBzZXRQdnBEZWF0aEdyYXNwRWZmZWN0cyxcbiAgICAgICAgZmlsdGVySWQ6IGRlYXRoR3Jhc3BFZmZlY3QuaWRcbiAgICAgIH1dKTtcbiAgICB9LCBkZWF0aEdyYXNwRWZmZWN0LmR1cmF0aW9uKTtcbiAgfSwgW10pO1xuXG4gIC8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBkZWF0aCBncmFzcCBwdWxsIGVmZmVjdCBvbiBQVlAgcGxheWVyc1xuICBjb25zdCBjcmVhdGVQdnBEZWF0aEdyYXNwUHVsbCA9IHVzZUNhbGxiYWNrKCh0YXJnZXRQbGF5ZXJJZDogc3RyaW5nLCBjYXN0ZXJQb3NpdGlvbjogVmVjdG9yMykgPT4ge1xuICAgIGNvbnNvbGUubG9nKGDwn46jIENyZWF0aW5nIERlYXRoR3Jhc3BQdWxsIGVmZmVjdCBmb3IgdGFyZ2V0ICR7dGFyZ2V0UGxheWVySWR9IGZyb20gcG9zaXRpb246YCwgY2FzdGVyUG9zaXRpb24pO1xuXG4gICAgY29uc3QgZGVhdGhHcmFzcFB1bGwgPSB7XG4gICAgICBpZDogbmV4dERlYXRoR3Jhc3BQdWxsSWQuY3VycmVudCsrLFxuICAgICAgdGFyZ2V0UGxheWVySWQsXG4gICAgICBjYXN0ZXJQb3NpdGlvbjogY2FzdGVyUG9zaXRpb24uY2xvbmUoKSxcbiAgICAgIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcbiAgICAgIGR1cmF0aW9uOiA2MDAsIC8vIDAuNiBzZWNvbmRzIHB1bGwgZHVyYXRpb24gKG1hdGNoZXMgRGVhdGhHcmFzcFB1bGwgY29tcG9uZW50KVxuICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICB9O1xuXG4gICAgY29uc29sZS5sb2coYPCfjqMgRGVhdGhHcmFzcFB1bGwgY3JlYXRlZCB3aXRoIElEICR7ZGVhdGhHcmFzcFB1bGwuaWR9YCk7XG5cbiAgICAvLyBVc2UgYmF0Y2hlZCB1cGRhdGVzIGZvciBkZWF0aCBncmFzcCBwdWxsc1xuICAgIFBWUFN0YXRlVXBkYXRlSGVscGVycy5iYXRjaEVmZmVjdFVwZGF0ZXMoW3tcbiAgICAgIHR5cGU6ICdhZGQnLFxuICAgICAgZWZmZWN0VHlwZTogJ2RlYXRoZ3Jhc3AnLFxuICAgICAgc2V0dGVyOiBzZXRQdnBEZWF0aEdyYXNwUHVsbHMsXG4gICAgICBkYXRhOiBkZWF0aEdyYXNwUHVsbFxuICAgIH1dKTtcblxuICAgIC8vIENsZWFuIHVwIGRlYXRoIGdyYXNwIHB1bGwgYWZ0ZXIgZHVyYXRpb24gdXNpbmcgYmF0Y2hlZCB1cGRhdGVzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBQVlBTdGF0ZVVwZGF0ZUhlbHBlcnMuYmF0Y2hFZmZlY3RVcGRhdGVzKFt7XG4gICAgICAgIHR5cGU6ICdyZW1vdmUnLFxuICAgICAgICBlZmZlY3RUeXBlOiAnZGVhdGhncmFzcCcsXG4gICAgICAgIHNldHRlcjogc2V0UHZwRGVhdGhHcmFzcFB1bGxzLFxuICAgICAgICBmaWx0ZXJJZDogZGVhdGhHcmFzcFB1bGwuaWRcbiAgICAgIH1dKTtcbiAgICB9LCBkZWF0aEdyYXNwUHVsbC5kdXJhdGlvbik7XG4gIH0sIFtdKTtcblxuICAvLyBGdW5jdGlvbiB0byBjcmVhdGUgZnJvc3Qgbm92YSBlZmZlY3Qgb24gUFZQIHBsYXllcnNcbiAgY29uc3QgY3JlYXRlUHZwRnJvc3ROb3ZhRWZmZWN0ID0gdXNlQ2FsbGJhY2soKHBsYXllcklkOiBzdHJpbmcsIHBvc2l0aW9uOiBWZWN0b3IzKSA9PiB7XG4gICAgXG4gICAgY29uc3QgZnJvc3ROb3ZhRWZmZWN0ID0ge1xuICAgICAgaWQ6IG5leHRGcm9zdE5vdmFFZmZlY3RJZC5jdXJyZW50KyssXG4gICAgICBwbGF5ZXJJZCxcbiAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgc3RhcnRUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgZHVyYXRpb246IDEyMDAgLy8gMS4yIHNlY29uZHMgZnJvc3Qgbm92YSBkdXJhdGlvbiAobWF0Y2hlcyBGcm9zdE5vdmFNYW5hZ2VyKVxuICAgIH07XG4gICAgXG4gICAgLy8gVXNlIGJhdGNoZWQgdXBkYXRlcyBmb3IgZnJvc3Qgbm92YSBlZmZlY3RzXG4gICAgUFZQU3RhdGVVcGRhdGVIZWxwZXJzLmJhdGNoRWZmZWN0VXBkYXRlcyhbe1xuICAgICAgdHlwZTogJ2FkZCcsXG4gICAgICBlZmZlY3RUeXBlOiAnZnJvc3ROb3ZhJyxcbiAgICAgIHNldHRlcjogc2V0UHZwRnJvc3ROb3ZhRWZmZWN0cyxcbiAgICAgIGRhdGE6IGZyb3N0Tm92YUVmZmVjdFxuICAgIH1dKTtcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBmcm9zdCBub3ZhIGVmZmVjdCBhZnRlciBkdXJhdGlvbiB1c2luZyBiYXRjaGVkIHVwZGF0ZXNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIFBWUFN0YXRlVXBkYXRlSGVscGVycy5iYXRjaEVmZmVjdFVwZGF0ZXMoW3tcbiAgICAgICAgdHlwZTogJ3JlbW92ZScsXG4gICAgICAgIGVmZmVjdFR5cGU6ICdmcm9zdE5vdmEnLFxuICAgICAgICBzZXR0ZXI6IHNldFB2cEZyb3N0Tm92YUVmZmVjdHMsXG4gICAgICAgIGZpbHRlcklkOiBmcm9zdE5vdmFFZmZlY3QuaWRcbiAgICAgIH1dKTtcbiAgICB9LCBmcm9zdE5vdmFFZmZlY3QuZHVyYXRpb24pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY3JlYXRlUHZwVmVub21FZmZlY3QgPSB1c2VDYWxsYmFjaygocGxheWVySWQ6IHN0cmluZywgcG9zaXRpb246IFZlY3RvcjMpID0+IHtcbiAgICAvLyBEZWJ1ZzogQ2hlY2sgaWYgdGhpcyBpcyB0aGUgbG9jYWwgcGxheWVyXG4gICAgY29uc3QgaXNMb2NhbFBsYXllciA9IHBsYXllcklkID09PSBzb2NrZXQ/LmlkO1xuICAgIFxuICAgIC8vIFNBRkVUWSBDSEVDSzogRG9uJ3QgY3JlYXRlIHZlbm9tIGVmZmVjdHMgb24gdGhlIGxvY2FsIHBsYXllclxuICAgIGlmIChpc0xvY2FsUGxheWVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHZlbm9tRWZmZWN0ID0ge1xuICAgICAgaWQ6IG5leHRWZW5vbUVmZmVjdElkLmN1cnJlbnQrKyxcbiAgICAgIHBsYXllcklkLFxuICAgICAgcG9zaXRpb246IHBvc2l0aW9uLmNsb25lKCksXG4gICAgICBzdGFydFRpbWU6IERhdGUubm93KCksXG4gICAgICBkdXJhdGlvbjogNjAwMCAvLyA2IHNlY29uZHMgdmVub20gZHVyYXRpb25cbiAgICB9O1xuICAgIFxuICAgIC8vIFVzZSBiYXRjaGVkIHVwZGF0ZXMgZm9yIHZlbm9tIGVmZmVjdHNcbiAgICBQVlBTdGF0ZVVwZGF0ZUhlbHBlcnMuYmF0Y2hFZmZlY3RVcGRhdGVzKFt7XG4gICAgICB0eXBlOiAnYWRkJyxcbiAgICAgIGVmZmVjdFR5cGU6ICd2ZW5vbScsXG4gICAgICBzZXR0ZXI6IHNldFB2cFZlbm9tRWZmZWN0cyxcbiAgICAgIGRhdGE6IHZlbm9tRWZmZWN0XG4gICAgfV0pO1xuICAgIFxuICAgIC8vIEFwcGx5IERvVCBkYW1hZ2Ugb3ZlciB0aW1lXG4gICAgY29uc3QgdmVub21EYW1hZ2VQZXJTZWNvbmQgPSAxNztcbiAgICBjb25zdCB0aWNrSW50ZXJ2YWwgPSAxMDAwOyAvLyAxIHNlY29uZCBwZXIgdGlja1xuICAgIGxldCB0aWNrQ291bnQgPSAwO1xuICAgIGNvbnN0IG1heFRpY2tzID0gNjsgLy8gNiBzZWNvbmRzIHRvdGFsXG4gICAgXG4gICAgY29uc3QgdmVub21JbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRpY2tDb3VudCsrO1xuICAgICAgaWYgKHRpY2tDb3VudCA+IG1heFRpY2tzKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodmVub21JbnRlcnZhbCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQXBwbHkgdmVub20gZGFtYWdlXG4gICAgICBpZiAoYnJvYWRjYXN0UGxheWVyRGFtYWdlKSB7XG4gICAgICAgIGJyb2FkY2FzdFBsYXllckRhbWFnZShwbGF5ZXJJZCwgdmVub21EYW1hZ2VQZXJTZWNvbmQpO1xuICAgICAgfVxuICAgIH0sIHRpY2tJbnRlcnZhbCk7XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgdmVub20gZWZmZWN0IGFmdGVyIGR1cmF0aW9uIHVzaW5nIGJhdGNoZWQgdXBkYXRlc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgUFZQU3RhdGVVcGRhdGVIZWxwZXJzLmJhdGNoRWZmZWN0VXBkYXRlcyhbe1xuICAgICAgICB0eXBlOiAncmVtb3ZlJyxcbiAgICAgICAgZWZmZWN0VHlwZTogJ3Zlbm9tJyxcbiAgICAgICAgc2V0dGVyOiBzZXRQdnBWZW5vbUVmZmVjdHMsXG4gICAgICAgIGZpbHRlcklkOiB2ZW5vbUVmZmVjdC5pZFxuICAgICAgfV0pO1xuICAgIH0sIHZlbm9tRWZmZWN0LmR1cmF0aW9uKTtcbiAgfSwgW3NvY2tldD8uaWQsIGJyb2FkY2FzdFBsYXllckRhbWFnZV0pO1xuXG4gIC8vIEZ1bmN0aW9uIHRvIGhhbmRsZSB3YXZlIGNvbXBsZXRpb24gYW5kIGF3YXJkIGV4cGVyaWVuY2VcbiAgY29uc3QgaGFuZGxlV2F2ZUNvbXBsZXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGDwn4yKIFdhdmUgY29tcGxldGVkISBBd2FyZGluZyAxMCBFWFAgdG8gYm90aCBwbGF5ZXJzYCk7XG5cbiAgICAvLyBBd2FyZCAxMCBFWFAgdG8gQk9USCBwbGF5ZXJzIHdoZW4gYSB3YXZlIGNvbXBsZXRlc1xuICAgIGNvbnN0IGFsbFBsYXllcklkcyA9IEFycmF5LmZyb20ocGxheWVycy5rZXlzKCkpO1xuXG4gICAgYWxsUGxheWVySWRzLmZvckVhY2gocGxheWVySWQgPT4ge1xuICAgICAgaWYgKHBsYXllcklkID09PSBzb2NrZXQ/LmlkKSB7XG4gICAgICAgIC8vIExvY2FsIHBsYXllciBnZXRzIHRoZSBleHBlcmllbmNlXG4gICAgICAgIHNldFBsYXllckV4cGVyaWVuY2UocHJldiA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3RXhwID0gcHJldiArIDEwO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIGxldmVsIHVwXG4gICAgICAgICAgY29uc3QgbmV3TGV2ZWwgPSBFeHBlcmllbmNlU3lzdGVtLmdldExldmVsRnJvbUV4cGVyaWVuY2UobmV3RXhwKTtcbiAgICAgICAgICBpZiAobmV3TGV2ZWwgPiBwbGF5ZXJMZXZlbCkge1xuICAgICAgICAgICAgc2V0UGxheWVyTGV2ZWwobmV3TGV2ZWwpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYPCfjokgTGV2ZWwgdXAhIFBsYXllciByZWFjaGVkIGxldmVsICR7bmV3TGV2ZWx9YCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIG1heCBoZWFsdGggYmFzZWQgb24gbmV3IGxldmVsXG4gICAgICAgIGlmIChwbGF5ZXJFbnRpdHkpIHtcbiAgICAgICAgICBjb25zdCBoZWFsdGggPSBwbGF5ZXJFbnRpdHkuZ2V0Q29tcG9uZW50KEhlYWx0aCk7XG4gICAgICAgICAgaWYgKGhlYWx0aCkge1xuICAgICAgICAgICAgY29uc3QgbmV3TWF4SGVhbHRoID0gRXhwZXJpZW5jZVN5c3RlbS5nZXRNYXhIZWFsdGhGb3JMZXZlbChuZXdMZXZlbCk7XG4gICAgICAgICAgICBjb25zdCBvbGRNYXhIZWFsdGggPSBoZWFsdGgubWF4SGVhbHRoO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgbWF4IGhlYWx0aCBhbmQgc2NhbGUgY3VycmVudCBoZWFsdGggcHJvcG9ydGlvbmFsbHlcbiAgICAgICAgICAgIGhlYWx0aC5zZXRNYXhIZWFsdGgobmV3TWF4SGVhbHRoKTtcblxuICAgICAgICAgICAgLy8gU3luY2hyb25pemUgdGhlIHVwZGF0ZWQgaGVhbHRoIHdpdGggc2VydmVyIGFuZCBvdGhlciBwbGF5ZXJzXG4gICAgICAgICAgICB1cGRhdGVQbGF5ZXJIZWFsdGgoaGVhbHRoLmN1cnJlbnRIZWFsdGgsIGhlYWx0aC5tYXhIZWFsdGgpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+SmiBIZWFsdGggdXBkYXRlZDogJHtvbGRNYXhIZWFsdGh9IC0+ICR7bmV3TWF4SGVhbHRofSBIUCAoY3VycmVudDogJHtoZWFsdGguY3VycmVudEhlYWx0aH0vJHtoZWFsdGgubWF4SGVhbHRofSlgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBMb2NhbCBwbGF5ZXIgJHtwbGF5ZXJJZH0gZ2FpbmVkIDEwIEVYUCBmcm9tIHdhdmUgY29tcGxldGlvbiAodG90YWw6ICR7bmV3RXhwfSlgKTtcbiAgICAgICAgICByZXR1cm4gbmV3RXhwO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFVwZGF0ZSBvcHBvbmVudCdzIGV4cGVyaWVuY2UgKHdpbGwgYmUgaGFuZGxlZCBieSBzZXJ2ZXIgaW4gcmVhbCBpbXBsZW1lbnRhdGlvbilcbiAgICAgICAgY29uc29sZS5sb2coYPCfjq8gT3Bwb25lbnQgJHtwbGF5ZXJJZH0gZ2FpbmVkIDEwIEVYUCBmcm9tIHdhdmUgY29tcGxldGlvbmApO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbc29ja2V0Py5pZCwgcGxheWVyTGV2ZWwsIHBsYXllckVudGl0eSwgcGxheWVyc10pO1xuXG4gIC8vIE5vdGlmeSBwYXJlbnQgY29tcG9uZW50IG9mIGV4cGVyaWVuY2UgdXBkYXRlc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChvbkV4cGVyaWVuY2VVcGRhdGUpIHtcbiAgICAgIG9uRXhwZXJpZW5jZVVwZGF0ZShwbGF5ZXJFeHBlcmllbmNlLCBwbGF5ZXJMZXZlbCk7XG4gICAgfVxuICB9LCBbcGxheWVyRXhwZXJpZW5jZSwgcGxheWVyTGV2ZWwsIG9uRXhwZXJpZW5jZVVwZGF0ZV0pO1xuXG4gIGNvbnN0IFt3ZWFwb25TdGF0ZSwgc2V0V2VhcG9uU3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIGN1cnJlbnRXZWFwb246IFdlYXBvblR5cGUuQk9XLFxuICAgIGN1cnJlbnRTdWJjbGFzczogV2VhcG9uU3ViY2xhc3MuRUxFTUVOVEFMLFxuICAgIGlzQ2hhcmdpbmc6IGZhbHNlLFxuICAgIGNoYXJnZVByb2dyZXNzOiAwLFxuICAgIGlzU3dpbmdpbmc6IGZhbHNlLFxuICAgIGlzU3Bpbm5pbmc6IGZhbHNlLFxuICAgIHN3b3JkQ29tYm9TdGVwOiAxIGFzIDEgfCAyIHwgMyxcbiAgICBpc0RpdmluZVN0b3JtaW5nOiBmYWxzZSxcbiAgICBpc1N3b3JkQ2hhcmdpbmc6IGZhbHNlLFxuICAgIGlzRGVmbGVjdGluZzogZmFsc2UsXG4gICAgaXNWaXBlclN0aW5nQ2hhcmdpbmc6IGZhbHNlLFxuICAgIHZpcGVyU3RpbmdDaGFyZ2VQcm9ncmVzczogMCxcbiAgICBpc0JhcnJhZ2VDaGFyZ2luZzogZmFsc2UsXG4gICAgYmFycmFnZUNoYXJnZVByb2dyZXNzOiAwLFxuICAgIGlzQ29icmFTaG90Q2hhcmdpbmc6IGZhbHNlLFxuICAgIGNvYnJhU2hvdENoYXJnZVByb2dyZXNzOiAwLFxuICAgIGlzU2t5ZmFsbGluZzogZmFsc2UsXG4gICAgaXNCYWNrc3RhYmJpbmc6IGZhbHNlLFxuICAgIGlzU3VuZGVyaW5nOiBmYWxzZVxuICB9KTtcbiAgXG4gIC8vIFRyYWNrIHByZXZpb3VzIHdlYXBvbiBzdGF0ZSBmb3IgY2hhbmdlIGRldGVjdGlvblxuICBjb25zdCBwcmV2V2VhcG9uUmVmID0gdXNlUmVmPHsgd2VhcG9uOiBXZWFwb25UeXBlOyBzdWJjbGFzczogV2VhcG9uU3ViY2xhc3MgfT4oe1xuICAgIHdlYXBvbjogV2VhcG9uVHlwZS5CT1csXG4gICAgc3ViY2xhc3M6IFdlYXBvblN1YmNsYXNzLkVMRU1FTlRBTFxuICB9KTtcbiAgXG4gIC8vIFRyYWNrIG11bHRpcGxheWVyIHBsYXllciBzdGF0ZXMgZm9yIGFuaW1hdGlvbnNcbiAgY29uc3QgW211bHRpcGxheWVyUGxheWVyU3RhdGVzLCBzZXRNdWx0aXBsYXllclBsYXllclN0YXRlc10gPSB1c2VTdGF0ZTxNYXA8c3RyaW5nLCB7XG4gICAgaXNDaGFyZ2luZzogYm9vbGVhbjtcbiAgICBjaGFyZ2VQcm9ncmVzczogbnVtYmVyO1xuICAgIGlzU3dpbmdpbmc6IGJvb2xlYW47XG4gICAgc3dvcmRDb21ib1N0ZXA6IDEgfCAyIHwgMztcbiAgICBpc0RpdmluZVN0b3JtaW5nOiBib29sZWFuO1xuICAgIGlzU3Bpbm5pbmc6IGJvb2xlYW47XG4gICAgaXNTd29yZENoYXJnaW5nOiBib29sZWFuO1xuICAgIGlzRGVmbGVjdGluZzogYm9vbGVhbjtcbiAgICBpc1ZpcGVyU3RpbmdDaGFyZ2luZzogYm9vbGVhbjtcbiAgICB2aXBlclN0aW5nQ2hhcmdlUHJvZ3Jlc3M6IG51bWJlcjtcbiAgICBpc0JhcnJhZ2VDaGFyZ2luZzogYm9vbGVhbjtcbiAgICBiYXJyYWdlQ2hhcmdlUHJvZ3Jlc3M6IG51bWJlcjtcbiAgICBpc0NvYnJhU2hvdENoYXJnaW5nOiBib29sZWFuO1xuICAgIGNvYnJhU2hvdENoYXJnZVByb2dyZXNzOiBudW1iZXI7XG4gICAgaXNTa3lmYWxsaW5nOiBib29sZWFuO1xuICAgIGlzQmFja3N0YWJiaW5nOiBib29sZWFuO1xuICAgIGxhc3RBdHRhY2tUeXBlPzogc3RyaW5nO1xuICAgIGxhc3RBdHRhY2tUaW1lPzogbnVtYmVyO1xuICAgIGxhc3RBbmltYXRpb25VcGRhdGU/OiBudW1iZXI7XG4gIH0+PihuZXcgTWFwKCkpO1xuICBcbiAgLy8gUGVyZmVjdCBzaG90IHN5c3RlbVxuICBjb25zdCB7IGNyZWF0ZVBvd2Vyc2hvdEVmZmVjdCB9ID0gdXNlQm93UG93ZXJzaG90KCk7XG4gIFxuICAvLyBPcHRpbWl6ZWQgUFZQIGVmZmVjdHMgd2l0aCBvYmplY3QgcG9vbGluZ1xuICBjb25zdCB7IGNyZWF0ZU9wdGltaXplZFZlbm9tRWZmZWN0LCBjcmVhdGVPcHRpbWl6ZWREZWJ1ZmZFZmZlY3QsIGdldFBvb2xTdGF0cyB9ID0gdXNlT3B0aW1pemVkUFZQRWZmZWN0cygpO1xuXG4vLyBNYW5hIHJlZ2VuZXJhdGlvbiBmb3Igd2VhcG9ucyB0aGF0IHVzZSBtYW5hIChTY3l0aGUgYW5kIFJ1bmVibGFkZSlcbnVzZUVmZmVjdCgoKSA9PiB7XG4gIGlmIChjdXJyZW50V2VhcG9uID09PSBXZWFwb25UeXBlLlNDWVRIRSB8fCBjdXJyZW50V2VhcG9uID09PSBXZWFwb25UeXBlLlJVTkVCTEFERSkge1xuICAgIGNvbnN0IHJlZ2VuUmF0ZSA9IGN1cnJlbnRXZWFwb24gPT09IFdlYXBvblR5cGUuU0NZVEhFID8gNSA6IDQ7IC8vIDEwIG1hbmEvcyBmb3IgU2N5dGhlLCA4IG1hbmEvcyBmb3IgUnVuZWJsYWRlXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzZXRDdXJyZW50TWFuYShwcmV2ID0+IE1hdGgubWluKG1heE1hbmEsIHByZXYgKyByZWdlblJhdGUpKTtcbiAgICB9LCA1MDApO1xuXG4gICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICB9XG59LCBbY3VycmVudFdlYXBvbiwgbWF4TWFuYV0pO1xuXG4gIC8vIFN5bmMgY3VycmVudFdlYXBvbiB3aXRoIHdlYXBvblN0YXRlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0Q3VycmVudFdlYXBvbih3ZWFwb25TdGF0ZS5jdXJyZW50V2VhcG9uKTtcbiAgfSwgW3dlYXBvblN0YXRlLmN1cnJlbnRXZWFwb25dKTtcblxuLy8gV2VhcG9uIHN3aXRjaGluZyAtIHNldCBtYXggbWFuYSBhbmQgcmVzZXQgY3VycmVudCBtYW5hIGJhc2VkIG9uIHdlYXBvbiB0eXBlXG51c2VFZmZlY3QoKCkgPT4ge1xuICBsZXQgbmV3TWF4TWFuYSA9IDA7XG4gIGlmIChjdXJyZW50V2VhcG9uID09PSBXZWFwb25UeXBlLlNDWVRIRSkge1xuICAgIG5ld01heE1hbmEgPSAyNTA7XG4gIH0gZWxzZSBpZiAoY3VycmVudFdlYXBvbiA9PT0gV2VhcG9uVHlwZS5SVU5FQkxBREUpIHtcbiAgICBuZXdNYXhNYW5hID0gMTUwO1xuICB9XG5cbiAgaWYgKG5ld01heE1hbmEgPiAwKSB7XG4gICAgc2V0TWF4TWFuYShuZXdNYXhNYW5hKTtcbiAgICBzZXRDdXJyZW50TWFuYShuZXdNYXhNYW5hKTsgLy8gU3RhcnQgd2l0aCBmdWxsIG1hbmEgd2hlbiBzd2l0Y2hpbmdcbiAgfVxufSwgW2N1cnJlbnRXZWFwb25dKTtcblxuLy8gRnVuY3Rpb24gdG8gY29uc3VtZSBtYW5hIGZvciB3ZWFwb24gYWJpbGl0aWVzIChTY3l0aGUgYW5kIFJ1bmVibGFkZSlcbmNvbnN0IGNvbnN1bWVNYW5hID0gdXNlQ2FsbGJhY2soKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5SNIERFQlVHOiBjb25zdW1lTWFuYSBjYWxsZWQgLSBjdXJyZW50V2VhcG9uOicsIGN1cnJlbnRXZWFwb24sICdhbW91bnQ6JywgYW1vdW50KTtcbiAgaWYgKGN1cnJlbnRXZWFwb24gPT09IFdlYXBvblR5cGUuU0NZVEhFIHx8IGN1cnJlbnRXZWFwb24gPT09IFdlYXBvblR5cGUuUlVORUJMQURFKSB7XG4gICAgc2V0Q3VycmVudE1hbmEocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IE1hdGgubWF4KDAsIHByZXYgLSBhbW91bnQpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gREVCVUc6IGNvbnN1bWVNYW5hIC0gb2xkIG1hbmE6JywgcHJldiwgJ25ldyBtYW5hOicsIG5ld1ZhbHVlKTtcbiAgICAgIHJldHVybiBuZXdWYWx1ZTtcbiAgICB9KTtcbiAgfVxufSwgW2N1cnJlbnRXZWFwb25dKTtcblxuLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgY3VycmVudCB3ZWFwb24gaGFzIGVub3VnaCBtYW5hXG5jb25zdCBoYXNNYW5hID0gdXNlQ2FsbGJhY2soKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5SNIERFQlVHOiBoYXNNYW5hIGNhbGxlZCAtIGN1cnJlbnRNYW5hOicsIGN1cnJlbnRNYW5hLCAnYW1vdW50OicsIGFtb3VudCk7XG4gIGNvbnN0IHJlc3VsdCA9IGN1cnJlbnRNYW5hID49IGFtb3VudDtcbiAgY29uc29sZS5sb2coJ/CflI0gREVCVUc6IGhhc01hbmEgcmVzdWx0OicsIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59LCBbY3VycmVudE1hbmFdKTtcblxuICAvLyBTZXQgdXAgUFZQIGV2ZW50IGxpc3RlbmVycyBmb3IgcGxheWVyIGFjdGlvbnMgYW5kIGRhbWFnZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc29ja2V0KSByZXR1cm47XG5cbiAgICBjb25zdCBoYW5kbGVQbGF5ZXJBdHRhY2sgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgICBpZiAoZGF0YS5wbGF5ZXJJZCAhPT0gc29ja2V0LmlkICYmIGVuZ2luZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIC8vIEhhbmRsZSBwZXJmZWN0IHNob3QgYmVhbSBlZmZlY3RzXG4gICAgICAgIGlmIChkYXRhLmF0dGFja1R5cGUgPT09ICdib3dfcmVsZWFzZScgJiYgZGF0YS5hbmltYXRpb25EYXRhPy5pc1BlcmZlY3RTaG90KSB7XG4gICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgVmVjdG9yMyhkYXRhLnBvc2l0aW9uLngsIGRhdGEucG9zaXRpb24ueSwgZGF0YS5wb3NpdGlvbi56KTtcbiAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBuZXcgVmVjdG9yMyhkYXRhLmRpcmVjdGlvbi54LCBkYXRhLmRpcmVjdGlvbi55LCBkYXRhLmRpcmVjdGlvbi56KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBHZXQgdGhlIHBsYXllcidzIHN1YmNsYXNzIGZyb20gdGhlIHBsYXllcnMgbWFwXG4gICAgICAgICAgY29uc3QgcGxheWVyID0gcGxheWVycy5nZXQoZGF0YS5wbGF5ZXJJZCk7XG4gICAgICAgICAgY29uc3Qgc3ViY2xhc3MgPSBwbGF5ZXI/LnN1YmNsYXNzIHx8IFdlYXBvblN1YmNsYXNzLkVMRU1FTlRBTDtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDcmVhdGUgcGVyZmVjdCBzaG90IGJlYW0gZWZmZWN0XG4gICAgICAgICAgY3JlYXRlUG93ZXJzaG90RWZmZWN0KFxuICAgICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgICAgICBzdWJjbGFzcyxcbiAgICAgICAgICAgIHRydWUsIC8vIGlzUGVyZmVjdFNob3RcbiAgICAgICAgICAgIHRydWUgIC8vIGlzRWxlbWVudGFsU2hvdHNVbmxvY2tlZFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBzcGVjaWFsIGFiaWxpdHkgcHJvamVjdGlsZXMgdGhhdCBuZWVkIGN1c3RvbSB2aXN1YWwgZWZmZWN0c1xuICAgICAgICBpZiAoZGF0YS5hdHRhY2tUeXBlID09PSAndmlwZXJfc3RpbmdfcHJvamVjdGlsZScpIHtcbiAgICAgICAgICAvLyBTa2lwIHByb2Nlc3Npbmcgb3VyIG93biB2aXBlciBzdGluZyBwcm9qZWN0aWxlcyB0byBwcmV2ZW50IHNlbGYtZGFtYWdlXG4gICAgICAgICAgaWYgKGRhdGEucGxheWVySWQgPT09IHNvY2tldC5pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IFZlY3RvcjMoZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnksIGRhdGEucG9zaXRpb24ueik7XG4gICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gbmV3IFZlY3RvcjMoZGF0YS5kaXJlY3Rpb24ueCwgZGF0YS5kaXJlY3Rpb24ueSwgZGF0YS5kaXJlY3Rpb24ueik7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgdGhlIEVDUyBwcm9qZWN0aWxlIGZvciBkYW1hZ2VcbiAgICAgICAgICBjb25zdCBwcm9qZWN0aWxlU3lzdGVtID0gZW5naW5lUmVmLmN1cnJlbnQuZ2V0V29ybGQoKS5nZXRTeXN0ZW0oUHJvamVjdGlsZVN5c3RlbSk7XG4gICAgICAgICAgaWYgKHByb2plY3RpbGVTeXN0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dGFja2VyRW50aXR5SWQgPSBzZXJ2ZXJQbGF5ZXJFbnRpdGllcy5jdXJyZW50LmdldChkYXRhLnBsYXllcklkKSB8fCAtTWF0aC5hYnMoZGF0YS5wbGF5ZXJJZC5sZW5ndGggKiAxMDAwICsgRGF0ZS5ub3coKSAlIDEwMDApO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgVmlwZXIgU3RpbmcgcHJvamVjdGlsZSBmb3IgZGFtYWdlXG4gICAgICAgICAgICBwcm9qZWN0aWxlU3lzdGVtLmNyZWF0ZVByb2plY3RpbGUoXG4gICAgICAgICAgICAgIGVuZ2luZVJlZi5jdXJyZW50LmdldFdvcmxkKCksXG4gICAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgICAgICAgIGF0dGFja2VyRW50aXR5SWQsXG4gICAgICAgICAgICAgIHsgc3BlZWQ6IDE2LCBkYW1hZ2U6IDYxLCBsaWZldGltZTogNSwgcGllcmNpbmc6IHRydWUsIG9wYWNpdHk6IDAuOCwgcHJvamVjdGlsZVR5cGU6ICd2aXBlcl9zdGluZycgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVHJpZ2dlciB2aXN1YWwgZWZmZWN0IGZvciBWaXBlciBTdGluZyBwcm9qZWN0aWxlXG4gICAgICAgICAgY29uc3QgeyB0cmlnZ2VyR2xvYmFsVmlwZXJTdGluZyB9ID0gcmVxdWlyZSgnQC9jb21wb25lbnRzL3Byb2plY3RpbGVzL1ZpcGVyU3RpbmdNYW5hZ2VyJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBWaXBlciBTdGluZyBwYXJlbnQgcmVmIHRvIHRoZSBvdGhlciBwbGF5ZXIncyBwb3NpdGlvbiBmb3IgdmlzdWFsIGVmZmVjdFxuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUG9zaXRpb24gPSB2aXBlclN0aW5nUGFyZW50UmVmLmN1cnJlbnQucG9zaXRpb24uY2xvbmUoKTtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbFF1YXRlcm5pb24gPSB7IC4uLnZpcGVyU3RpbmdQYXJlbnRSZWYuY3VycmVudC5xdWF0ZXJuaW9uIH07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGVtcG9yYXJpbHkgc2V0IHRoZSBwYXJlbnQgcmVmIHRvIHRoZSBvdGhlciBwbGF5ZXIncyBwb3NpdGlvbiBhbmQgZGlyZWN0aW9uXG4gICAgICAgICAgdmlwZXJTdGluZ1BhcmVudFJlZi5jdXJyZW50LnBvc2l0aW9uLmNvcHkocG9zaXRpb24pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENhbGN1bGF0ZSBxdWF0ZXJuaW9uIGZyb20gdGhlIG90aGVyIHBsYXllcidzIGRpcmVjdGlvblxuICAgICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMihkaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnopO1xuICAgICAgICAgIHZpcGVyU3RpbmdQYXJlbnRSZWYuY3VycmVudC5xdWF0ZXJuaW9uID0ge1xuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IE1hdGguc2luKGFuZ2xlIC8gMiksXG4gICAgICAgICAgICB6OiAwLFxuICAgICAgICAgICAgdzogTWF0aC5jb3MoYW5nbGUgLyAyKVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVHJpZ2dlciB0aGUgVmlwZXIgU3RpbmcgdmlzdWFsIGVmZmVjdFxuICAgICAgICAgIHRyaWdnZXJHbG9iYWxWaXBlclN0aW5nKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBwYXJlbnQgcmVmIHBvc2l0aW9uIGFuZCByb3RhdGlvblxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdmlwZXJTdGluZ1BhcmVudFJlZi5jdXJyZW50LnBvc2l0aW9uLmNvcHkob3JpZ2luYWxQb3NpdGlvbik7XG4gICAgICAgICAgICB2aXBlclN0aW5nUGFyZW50UmVmLmN1cnJlbnQucXVhdGVybmlvbiA9IG9yaWdpbmFsUXVhdGVybmlvbjtcbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGEuYXR0YWNrVHlwZSA9PT0gJ2NvYnJhX3Nob3RfcHJvamVjdGlsZScpIHtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBOb3RlOiBDb2JyYSBTaG90IGRhbWFnZSBpcyBoYW5kbGVkIGJ5IFBWUENvYnJhU2hvdE1hbmFnZXIgdGhyb3VnaCB2aXN1YWwgcHJvamVjdGlsZXNcbiAgICAgICAgICAvLyBObyBuZWVkIHRvIGNyZWF0ZSBFQ1MgcHJvamVjdGlsZXMgdGhhdCBzaG93IHVwIGFzIHJlZ3VsYXIgYXJyb3dzXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVHJpZ2dlciB2aXN1YWwgZWZmZWN0IGZvciBDb2JyYSBTaG90IHByb2plY3RpbGUgKHRoaXMgY3JlYXRlcyB0aGUgdmlzdWFsIHByb2plY3RpbGUgdGhhdCBQVlBDb2JyYVNob3RNYW5hZ2VyIG1vbml0b3JzKVxuICAgICAgICAgIGNvbnN0IHsgdHJpZ2dlckdsb2JhbENvYnJhU2hvdCB9ID0gcmVxdWlyZSgnQC9jb21wb25lbnRzL3Byb2plY3RpbGVzL0NvYnJhU2hvdE1hbmFnZXInKTtcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IzKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55LCBkYXRhLnBvc2l0aW9uLnopO1xuICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ldyBWZWN0b3IzKGRhdGEuZGlyZWN0aW9uLngsIGRhdGEuZGlyZWN0aW9uLnksIGRhdGEuZGlyZWN0aW9uLnopO1xuICAgICAgICAgIHRyaWdnZXJHbG9iYWxDb2JyYVNob3QocG9zaXRpb24sIGRpcmVjdGlvbik7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgc3dvcmQgY2hhcmdlIGhpdCBhdHRhY2tzXG4gICAgICAgIGlmIChkYXRhLmF0dGFja1R5cGUgPT09ICdzd29yZF9jaGFyZ2VfaGl0Jykge1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZhbGlkYXRlIGFuaW1hdGlvbkRhdGEgb2JqZWN0IGV4aXN0cyBhbmQgaGFzIHJlcXVpcmVkIHByb3BlcnRpZXNcbiAgICAgICAgICBpZiAoIWRhdGEuYW5pbWF0aW9uRGF0YSB8fCB0eXBlb2YgZGF0YS5hbmltYXRpb25EYXRhLmRhbWFnZSAhPT0gJ251bWJlcicgfHwgdHlwZW9mIGRhdGEuYW5pbWF0aW9uRGF0YS50YXJnZXRJZCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBoaXQgdGFyZ2V0cyB0aGUgbG9jYWwgcGxheWVyXG4gICAgICAgICAgY29uc3QgdGFyZ2V0RW50aXR5SWQgPSBzZXJ2ZXJQbGF5ZXJFbnRpdGllcy5jdXJyZW50LmdldChzb2NrZXQ/LmlkIHx8ICcnKTtcbiAgICAgICAgICBpZiAodGFyZ2V0RW50aXR5SWQgPT09IGRhdGEuYW5pbWF0aW9uRGF0YS50YXJnZXRJZCkge1xuICAgICAgICAgICAgLy8gQXBwbHkgZGFtYWdlIGRpcmVjdGx5IHRvIGxvY2FsIHBsYXllclxuICAgICAgICAgICAgaWYgKHBsYXllckVudGl0eSAmJiBicm9hZGNhc3RQbGF5ZXJEYW1hZ2UgJiYgc29ja2V0Py5pZCkge1xuICAgICAgICAgICAgICBjb25zdCBoZWFsdGggPSBwbGF5ZXJFbnRpdHkuZ2V0Q29tcG9uZW50KEhlYWx0aCk7XG4gICAgICAgICAgICAgIGlmIChoZWFsdGgpIHtcbiAgICAgICAgICAgICAgICAvLyBBcHBseSBkYW1hZ2UgdGhyb3VnaCBQVlAgc3lzdGVtXG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0UGxheWVyRGFtYWdlKHNvY2tldC5pZCwgZGF0YS5hbmltYXRpb25EYXRhLmRhbWFnZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuOyAvLyBEb24ndCBwcm9jZXNzIGFzIHJlZ3VsYXIgcHJvamVjdGlsZVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgcmVndWxhciBwcm9qZWN0aWxlIGF0dGFja3MgLSBjcmVhdGUgcHJvamVjdGlsZXMgdGhhdCBjYW4gaGl0IHRoZSBsb2NhbCBwbGF5ZXJcbiAgICAgICAgY29uc3QgcHJvamVjdGlsZVR5cGVzID0gWydyZWd1bGFyX2Fycm93JywgJ2NoYXJnZWRfYXJyb3cnLCAnZW50cm9waWNfYm9sdCcsICdjcm9zc2VudHJvcHlfYm9sdCcsICdwZXJmZWN0X3Nob3QnLCAnYmFycmFnZV9wcm9qZWN0aWxlJ107XG4gICAgICAgIGlmIChwcm9qZWN0aWxlVHlwZXMuaW5jbHVkZXMoZGF0YS5hdHRhY2tUeXBlKSkge1xuXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ3JlYXRlIGEgcHJvamVjdGlsZSB0aGF0IGNhbiBkYW1hZ2UgdGhlIGxvY2FsIHBsYXllclxuICAgICAgICAgIGNvbnN0IHByb2plY3RpbGVTeXN0ZW0gPSBlbmdpbmVSZWYuY3VycmVudC5nZXRXb3JsZCgpLmdldFN5c3RlbShQcm9qZWN0aWxlU3lzdGVtKTtcbiAgICAgICAgICBpZiAocHJvamVjdGlsZVN5c3RlbSkge1xuICAgICAgICAgICAgLy8gVXNlIHBvb2xlZCBWZWN0b3IzIG9iamVjdHMgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBwdnBPYmplY3RQb29sLmFjcXVpcmVWZWN0b3IzKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55LCBkYXRhLnBvc2l0aW9uLnopO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gcHZwT2JqZWN0UG9vbC5hY3F1aXJlVmVjdG9yMyhkYXRhLmRpcmVjdGlvbi54LCBkYXRhLmRpcmVjdGlvbi55LCBkYXRhLmRpcmVjdGlvbi56KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR2V0IHRoZSBhdHRhY2tlcidzIGxvY2FsIEVDUyBlbnRpdHkgSUQgKGlmIGl0IGV4aXN0cykgb3IgdXNlIGEgdW5pcXVlIG5lZ2F0aXZlIElEXG4gICAgICAgICAgICBjb25zdCBhdHRhY2tlckVudGl0eUlkID0gc2VydmVyUGxheWVyRW50aXRpZXMuY3VycmVudC5nZXQoZGF0YS5wbGF5ZXJJZCkgfHwgLU1hdGguYWJzKGRhdGEucGxheWVySWQubGVuZ3RoICogMTAwMCArIERhdGUubm93KCkgJSAxMDAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFwcHJvcHJpYXRlIHByb2plY3RpbGUgdHlwZSB3aXRoIFBWUCBkYW1hZ2UgZW5hYmxlZFxuICAgICAgICAgICAgc3dpdGNoIChkYXRhLmF0dGFja1R5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAncmVndWxhcl9hcnJvdyc6XG4gICAgICAgICAgICAgICAgcHJvamVjdGlsZVN5c3RlbS5jcmVhdGVQcm9qZWN0aWxlKFxuICAgICAgICAgICAgICAgICAgZW5naW5lUmVmLmN1cnJlbnQuZ2V0V29ybGQoKSxcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgYXR0YWNrZXJFbnRpdHlJZCwgLy8gVXNlIGF0dGFja2VyJ3MgZW50aXR5IElEIGFzIG93bmVyXG4gICAgICAgICAgICAgICAgICB7IHNwZWVkOiAyNSwgZGFtYWdlOiAxMCwgbGlmZXRpbWU6IDMsIG1heERpc3RhbmNlOiAyNSwgb3BhY2l0eTogMC44IH0gLy8gUFZQIGRhbWFnZSBoYW5kbGVkIGJ5IENvbWJhdFN5c3RlbVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2NoYXJnZWRfYXJyb3cnOlxuICAgICAgICAgICAgICAgIHByb2plY3RpbGVTeXN0ZW0uY3JlYXRlQ2hhcmdlZEFycm93UHJvamVjdGlsZShcbiAgICAgICAgICAgICAgICAgIGVuZ2luZVJlZi5jdXJyZW50LmdldFdvcmxkKCksXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgIGF0dGFja2VyRW50aXR5SWQsXG4gICAgICAgICAgICAgICAgICB7IHNwZWVkOiAzNSwgZGFtYWdlOiA1MCwgbGlmZXRpbWU6IDMsIHBpZXJjaW5nOiB0cnVlLCBvcGFjaXR5OiAwLjggfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2VudHJvcGljX2JvbHQnOlxuICAgICAgICAgICAgICAgIHByb2plY3RpbGVTeXN0ZW0uY3JlYXRlRW50cm9waWNCb2x0UHJvamVjdGlsZShcbiAgICAgICAgICAgICAgICAgIGVuZ2luZVJlZi5jdXJyZW50LmdldFdvcmxkKCksXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgIGF0dGFja2VyRW50aXR5SWQsXG4gICAgICAgICAgICAgICAgICB7IHNwZWVkOiAyMCwgZGFtYWdlOiAyMCwgbGlmZXRpbWU6IDEuNzUsIHBpZXJjaW5nOiBmYWxzZSwgb3BhY2l0eTogMC44IH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlICdjcm9zc2VudHJvcHlfYm9sdCc6XG4gICAgICAgICAgICAgICAgcHJvamVjdGlsZVN5c3RlbS5jcmVhdGVDcm9zc2VudHJvcHlCb2x0UHJvamVjdGlsZShcbiAgICAgICAgICAgICAgICAgIGVuZ2luZVJlZi5jdXJyZW50LmdldFdvcmxkKCksXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgIGF0dGFja2VyRW50aXR5SWQsXG4gICAgICAgICAgICAgICAgICB7IHNwZWVkOiAxNSwgZGFtYWdlOiA5MCwgbGlmZXRpbWU6IDIuNSwgcGllcmNpbmc6IGZhbHNlLCBvcGFjaXR5OiAwLjggfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ3BlcmZlY3Rfc2hvdCc6XG4gICAgICAgICAgICAgICAgcHJvamVjdGlsZVN5c3RlbS5jcmVhdGVDaGFyZ2VkQXJyb3dQcm9qZWN0aWxlKFxuICAgICAgICAgICAgICAgICAgZW5naW5lUmVmLmN1cnJlbnQuZ2V0V29ybGQoKSxcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgYXR0YWNrZXJFbnRpdHlJZCxcbiAgICAgICAgICAgICAgICAgIHsgc3BlZWQ6IDQwLCBkYW1hZ2U6IDc1LCBsaWZldGltZTogMywgcGllcmNpbmc6IHRydWUsIG9wYWNpdHk6IDEuMCB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnYmFycmFnZV9wcm9qZWN0aWxlJzpcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgQmFycmFnZSBwcm9qZWN0aWxlcyBmb3IgUFZQXG4gICAgICAgICAgICAgICAgY29uc3QgYmFycmFnZUVudGl0eSA9IHByb2plY3RpbGVTeXN0ZW0uY3JlYXRlUHJvamVjdGlsZShcbiAgICAgICAgICAgICAgICAgIGVuZ2luZVJlZi5jdXJyZW50LmdldFdvcmxkKCksXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgIGF0dGFja2VyRW50aXR5SWQsXG4gICAgICAgICAgICAgICAgICB7IHNwZWVkOiAyMiwgZGFtYWdlOiAzMCwgbGlmZXRpbWU6IDMsIG1heERpc3RhbmNlOiAyNSwgcGllcmNpbmc6IGZhbHNlLCBvcGFjaXR5OiAwLjggfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gTWFyayBhcyBiYXJyYWdlIGFycm93IGZvciBwcm9wZXIgdmlzdWFsIHJlbmRlcmluZ1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbmRlcmVyID0gYmFycmFnZUVudGl0eS5nZXRDb21wb25lbnQoUmVuZGVyZXIpO1xuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlcj8ubWVzaCkge1xuICAgICAgICAgICAgICAgICAgcmVuZGVyZXIubWVzaC51c2VyRGF0YS5pc0JhcnJhZ2VBcnJvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICByZW5kZXJlci5tZXNoLnVzZXJEYXRhLmlzUmVndWxhckFycm93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWxlYXNlIHBvb2xlZCBWZWN0b3IzIG9iamVjdHMgYmFjayB0byBwb29sIGFmdGVyIHVzZVxuICAgICAgICAgICAgcHZwT2JqZWN0UG9vbC5yZWxlYXNlVmVjdG9yMyhwb3NpdGlvbik7XG4gICAgICAgICAgICBwdnBPYmplY3RQb29sLnJlbGVhc2VWZWN0b3IzKGRpcmVjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIHBsYXllciBzdGF0ZSB0byBzaG93IGF0dGFjayBhbmltYXRpb24gdXNpbmcgYmF0Y2hlZCB1cGRhdGVzXG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbkRhdGEgPSBkYXRhLmFuaW1hdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IGFuaW1hdGlvblVwZGF0ZVRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBcbiAgICAgICAgUFZQU3RhdGVVcGRhdGVIZWxwZXJzLmJhdGNoUGxheWVyU3RhdGVVcGRhdGVzKHNldE11bHRpcGxheWVyUGxheWVyU3RhdGVzLCBbe1xuICAgICAgICAgIHBsYXllcklkOiBkYXRhLnBsYXllcklkLFxuICAgICAgICAgIHN0YXRlVXBkYXRlOiB7XG4gICAgICAgICAgICBpc1N3aW5naW5nOiBkYXRhLmF0dGFja1R5cGUuaW5jbHVkZXMoJ3N3aW5nJykgfHwgKGRhdGEuYXR0YWNrVHlwZS5pbmNsdWRlcygnc3dvcmQnKSAmJiAhZGF0YS5hdHRhY2tUeXBlLmluY2x1ZGVzKCdjaGFyZ2UnKSksXG4gICAgICAgICAgICBpc0NoYXJnaW5nOiBkYXRhLmF0dGFja1R5cGUuaW5jbHVkZXMoJ2JvdycpICYmIGRhdGEuYXR0YWNrVHlwZS5pbmNsdWRlcygnY2hhcmdlJyksXG4gICAgICAgICAgICBpc1NwaW5uaW5nOiBkYXRhLmF0dGFja1R5cGUuaW5jbHVkZXMoJ3NjeXRoZScpIHx8IGRhdGEuYXR0YWNrVHlwZS5pbmNsdWRlcygnZW50cm9waWNfYm9sdCcpIHx8IGRhdGEuYXR0YWNrVHlwZS5pbmNsdWRlcygnY3Jvc3NlbnRyb3B5X2JvbHQnKSB8fCBkYXRhLmF0dGFja1R5cGUuaW5jbHVkZXMoJ3N3b3JkX2NoYXJnZV9zcGluJykgfHwgYW5pbWF0aW9uRGF0YS5pc1NwaW5uaW5nIHx8IGZhbHNlLFxuICAgICAgICAgICAgaXNTd29yZENoYXJnaW5nOiBkYXRhLmF0dGFja1R5cGUgPT09ICdzd29yZF9jaGFyZ2Vfc3BpbicgfHwgZGF0YS5hdHRhY2tUeXBlID09PSAnc3dvcmRfY2hhcmdlX3N0YXJ0JyB8fCBhbmltYXRpb25EYXRhLmlzU3Bpbm5pbmcgfHwgYW5pbWF0aW9uRGF0YS5pc1N3b3JkQ2hhcmdpbmcgfHwgZmFsc2UsXG4gICAgICAgICAgICBzd29yZENvbWJvU3RlcDogYW5pbWF0aW9uRGF0YS5jb21ib1N0ZXAgfHwgMSxcbiAgICAgICAgICAgIGNoYXJnZVByb2dyZXNzOiBhbmltYXRpb25EYXRhLmNoYXJnZVByb2dyZXNzIHx8IDAsXG4gICAgICAgICAgICBsYXN0QXR0YWNrVHlwZTogZGF0YS5hdHRhY2tUeXBlLFxuICAgICAgICAgICAgbGFzdEF0dGFja1RpbWU6IGFuaW1hdGlvblVwZGF0ZVRpbWUsXG4gICAgICAgICAgICBsYXN0QW5pbWF0aW9uVXBkYXRlOiBhbmltYXRpb25VcGRhdGVUaW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IHRoZSBwbGF5ZXIncyB3ZWFwb24gYW5kIHN1YmNsYXNzIGZvciBwcm9wZXIgYW5pbWF0aW9uIHRpbWluZ1xuICAgICAgICAgIGNvbnN0IHBsYXllciA9IHBsYXllcnMuZ2V0KGRhdGEucGxheWVySWQpO1xuICAgICAgICAgIGNvbnN0IHBsYXllcldlYXBvbiA9IHBsYXllcj8ud2VhcG9uIHx8IFdlYXBvblR5cGUuQk9XO1xuICAgICAgICAgIGNvbnN0IHBsYXllclN1YmNsYXNzID0gcGxheWVyPy5zdWJjbGFzcztcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDYWxjdWxhdGUgd2VhcG9uLXNwZWNpZmljIGFuaW1hdGlvbiBkdXJhdGlvbiBiYXNlZCBvbiBhY3R1YWwgd2VhcG9uIHRpbWluZ1xuICAgICAgICAgIC8vIFRoZXNlIGR1cmF0aW9ucyBtYXRjaCB0aGUgcmVhbCBhbmltYXRpb24gY2FsY3VsYXRpb25zIGluIGVhY2ggd2VhcG9uIGNvbXBvbmVudFxuICAgICAgICAgIGxldCByZXNldER1cmF0aW9uID0gMTAwOyAvLyBEZWZhdWx0XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3Igc3dvcmQgY2hhcmdlIGF0dGFja3NcbiAgICAgICAgICBpZiAoZGF0YS5hdHRhY2tUeXBlID09PSAnc3dvcmRfY2hhcmdlX3NwaW4nKSB7XG4gICAgICAgICAgICAvLyBDaGFyZ2Ugc3BpbiBsYXN0cyBhYm91dCAxIGZ1bGwgcm90YXRpb24gYXQgMjcuNSByb3RhdGlvbiBzcGVlZFxuICAgICAgICAgICAgLy8gKE1hdGguUEkgKiAyKSAvIDI3LjUgLyAoMS82MCkg4omIIDY4NW1zIGZvciBvbmUgZnVsbCByb3RhdGlvblxuICAgICAgICAgICAgcmVzZXREdXJhdGlvbiA9IDUwO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5hdHRhY2tUeXBlID09PSAnc3dvcmRfY2hhcmdlX3N0YXJ0Jykge1xuICAgICAgICAgICAgLy8gQ2hhcmdlIG1vdmVtZW50IGxhc3RzIGFib3V0IDEuNSBzZWNvbmRzIChtYXRjaGVzIENvbnRyb2xTeXN0ZW0gY2hhcmdlRHVyYXRpb24pXG4gICAgICAgICAgICByZXNldER1cmF0aW9uID0gNDUwO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHBsYXllcldlYXBvbikge1xuICAgICAgICAgICAgICBjYXNlIFdlYXBvblR5cGUuU0NZVEhFOlxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGR1YWwgd2llbGRpbmcgKEFieXNzYWwgc3ViY2xhc3MgbGV2ZWwgMispXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllclN1YmNsYXNzID09PSBXZWFwb25TdWJjbGFzcy5BQllTU0FMKSB7XG4gICAgICAgICAgICAgICAgICAvLyBEdWFsIHNjeXRoZSB0aW1pbmc6IHNpbWlsYXIgdG8gU2FicmVzIHdpdGggZGVsYXlzXG4gICAgICAgICAgICAgICAgICByZXNldER1cmF0aW9uID0gMzUwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBTaW5nbGUgc2N5dGhlOiBzd2luZ1Byb2dyZXNzICs9IGRlbHRhICogOCB1bnRpbCA+PSBNYXRoLlBJICogMC44NVxuICAgICAgICAgICAgICAgICAgLy8gQXQgNjBmcHM6IChNYXRoLlBJICogMC44NSkgLyA4IC8gKDEvNjApIOKJiCAzMzVtc1xuICAgICAgICAgICAgICAgICAgcmVzZXREdXJhdGlvbiA9IDE2Ny41O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBXZWFwb25UeXBlLlNXT1JEOlxuICAgICAgICAgICAgICAgIC8vIHN3aW5nUHJvZ3Jlc3MgKz0gZGVsdGEgKiA2Ljc1IHVudGlsID49IE1hdGguUEkgKiAwLjU1IChvciAwLjkgZm9yIGNvbWJvIHN0ZXAgMylcbiAgICAgICAgICAgICAgICAvLyBBdCA2MGZwczogKE1hdGguUEkgKiAwLjU1KSAvIDYuNzUgLyAoMS82MCkg4omIIDQwMG1zXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogM3JkIGNvbWJvIGhpdCB0YWtlcyBsb25nZXIgYnV0IHdlIHVzZSBhdmVyYWdlIHRpbWluZyBmb3IgbXVsdGlwbGF5ZXIgc3luY1xuICAgICAgICAgICAgICAgIHJlc2V0RHVyYXRpb24gPSA4MFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBXZWFwb25UeXBlLlNBQlJFUzpcbiAgICAgICAgICAgICAgLy8gVHdvIHN3aW5ncyB3aXRoIGRlbGF5cyAtIHRvdGFsIGR1cmF0aW9uIHJvdWdobHkgMzUwbXNcbiAgICAgICAgICAgICAgcmVzZXREdXJhdGlvbiA9IDI3NTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFdlYXBvblR5cGUuUlVORUJMQURFOlxuICAgICAgICAgICAgICAvLyBTYW1lIHRpbWluZyBhcyBzd29yZDogc3dpbmdQcm9ncmVzcyArPSBkZWx0YSAqIDYuNzUgdW50aWwgPj0gTWF0aC5QSSAqIDAuNTUgKG9yIDAuOSBmb3IgY29tYm8gc3RlcCAzKVxuICAgICAgICAgICAgICAvLyBBdCA2MGZwczogKE1hdGguUEkgKiAwLjU1KSAvIDYuNzUgLyAoMS82MCkg4omIIDQwMG1zXG4gICAgICAgICAgICAgIC8vIE5vdGU6IDNyZCBjb21ibyBoaXQgdGFrZXMgbG9uZ2VyIGJ1dCB3ZSB1c2UgYXZlcmFnZSB0aW1pbmcgZm9yIG11bHRpcGxheWVyIHN5bmNcbiAgICAgICAgICAgICAgcmVzZXREdXJhdGlvbiA9IDgwO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgV2VhcG9uVHlwZS5CT1c6XG4gICAgICAgICAgICAgIHJlc2V0RHVyYXRpb24gPSAzMDA7IC8vIFF1aWNrIHNob3RzXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgcmVzZXREdXJhdGlvbiA9IDEwMDsgLy8gRGVmYXVsdCBmb3Igb3RoZXIgd2VhcG9uc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTY2hlZHVsZSBhbmltYXRpb24gcmVzZXQgdXNpbmcgYmF0Y2hlZCB1cGRhdGVzXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBQVlBTdGF0ZVVwZGF0ZUhlbHBlcnMuYmF0Y2hQbGF5ZXJTdGF0ZVVwZGF0ZXMoc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMsIFt7XG4gICAgICAgICAgICAgIHBsYXllcklkOiBkYXRhLnBsYXllcklkLFxuICAgICAgICAgICAgICBzdGF0ZVVwZGF0ZToge1xuICAgICAgICAgICAgICAgIGlzU3dpbmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzQ2hhcmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzU3Bpbm5pbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzU3dvcmRDaGFyZ2luZzogZmFsc2VcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV0pO1xuICAgICAgICAgIH0sIHJlc2V0RHVyYXRpb24pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVQbGF5ZXJBYmlsaXR5ID0gKGRhdGE6IGFueSkgPT4ge1xuICAgICAgaWYgKGRhdGEucGxheWVySWQgIT09IHNvY2tldC5pZCkge1xuICAgICAgICAvLyBIYW5kbGUgc3BlY2lhbCBhYmlsaXRpZXMgbGlrZSBEaXZpbmUgU3Rvcm0sIFZpcGVyIFN0aW5nLCBhbmQgQmFycmFnZVxuICAgICAgICBpZiAoZGF0YS5hYmlsaXR5VHlwZSA9PT0gJ2RpdmluZV9zdG9ybScpIHtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUcmlnZ2VyIHZpc3VhbCBEaXZpbmUgU3Rvcm0gZWZmZWN0IGF0IHRoZSBwbGF5ZXIncyBwb3NpdGlvblxuICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gcHZwT2JqZWN0UG9vbC5hY3F1aXJlVmVjdG9yMyhkYXRhLnBvc2l0aW9uLngsIGRhdGEucG9zaXRpb24ueSwgZGF0YS5wb3NpdGlvbi56KTtcbiAgICAgICAgICB0cmlnZ2VyR2xvYmFsRGl2aW5lU3Rvcm0ocG9zaXRpb24sIGRhdGEucGxheWVySWQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlbGVhc2UgcG9vbGVkIFZlY3RvcjMgYWZ0ZXIgdXNlXG4gICAgICAgICAgcHZwT2JqZWN0UG9vbC5yZWxlYXNlVmVjdG9yMyhwb3NpdGlvbik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXNlIGJhdGNoZWQgdXBkYXRlcyBmb3IgRGl2aW5lIFN0b3JtIGFuaW1hdGlvblxuICAgICAgICAgIFBWUFN0YXRlVXBkYXRlSGVscGVycy5iYXRjaFBsYXllclN0YXRlVXBkYXRlcyhzZXRNdWx0aXBsYXllclBsYXllclN0YXRlcywgW3tcbiAgICAgICAgICAgIHBsYXllcklkOiBkYXRhLnBsYXllcklkLFxuICAgICAgICAgICAgc3RhdGVVcGRhdGU6IHtcbiAgICAgICAgICAgICAgaXNEaXZpbmVTdG9ybWluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgaXNTcGlubmluZzogdHJ1ZSwgLy8gRW5hYmxlIHNwaW5uaW5nIGFuaW1hdGlvbiBmb3IgRGl2aW5lIFN0b3JtXG4gICAgICAgICAgICAgIGlzU3dvcmRDaGFyZ2luZzogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzZXQgRGl2aW5lIFN0b3JtIHN0YXRlIGFmdGVyIGR1cmF0aW9uIHVzaW5nIGJhdGNoZWQgdXBkYXRlc1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgUFZQU3RhdGVVcGRhdGVIZWxwZXJzLmJhdGNoUGxheWVyU3RhdGVVcGRhdGVzKHNldE11bHRpcGxheWVyUGxheWVyU3RhdGVzLCBbe1xuICAgICAgICAgICAgICBwbGF5ZXJJZDogZGF0YS5wbGF5ZXJJZCxcbiAgICAgICAgICAgICAgc3RhdGVVcGRhdGU6IHtcbiAgICAgICAgICAgICAgICBpc0RpdmluZVN0b3JtaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc1NwaW5uaW5nOiBmYWxzZSAvLyBSZXNldCBzcGlubmluZyBhbmltYXRpb25cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV0pO1xuICAgICAgICAgIH0sIDQwMDApOyAvLyBEaXZpbmUgU3Rvcm0gbGFzdHMgNCBzZWNvbmRzXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5hYmlsaXR5VHlwZSA9PT0gJ3ZpcGVyX3N0aW5nJykge1xuICAgICAgICAgIC8vIFNraXAgcHJvY2Vzc2luZyBvdXIgb3duIHZpcGVyIHN0aW5nIGFiaWxpdGllcyB0byBwcmV2ZW50IGFueSBwb3RlbnRpYWwgaXNzdWVzXG4gICAgICAgICAgaWYgKGRhdGEucGxheWVySWQgPT09IHNvY2tldC5pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRyaWdnZXIgdmlzdWFsIGVmZmVjdCAtIHRoaXMgc2hvdWxkIGNyZWF0ZSB0aGUgcHJvcGVyIFZpcGVyIFN0aW5nIHByb2plY3RpbGVzXG4gICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgVmVjdG9yMyhkYXRhLnBvc2l0aW9uLngsIGRhdGEucG9zaXRpb24ueSwgZGF0YS5wb3NpdGlvbi56KTtcbiAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBuZXcgVmVjdG9yMyhkYXRhLmRpcmVjdGlvbi54LCBkYXRhLmRpcmVjdGlvbi55LCBkYXRhLmRpcmVjdGlvbi56KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIFZpcGVyIFN0aW5nIHBhcmVudCByZWYgdG8gdGhlIG90aGVyIHBsYXllcidzIHBvc2l0aW9uIGZvciB2aXN1YWwgZWZmZWN0XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxQb3NpdGlvbiA9IHZpcGVyU3RpbmdQYXJlbnRSZWYuY3VycmVudC5wb3NpdGlvbi5jbG9uZSgpO1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUXVhdGVybmlvbiA9IHsgLi4udmlwZXJTdGluZ1BhcmVudFJlZi5jdXJyZW50LnF1YXRlcm5pb24gfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUZW1wb3JhcmlseSBzZXQgdGhlIHBhcmVudCByZWYgdG8gdGhlIG90aGVyIHBsYXllcidzIHBvc2l0aW9uIGFuZCBkaXJlY3Rpb25cbiAgICAgICAgICB2aXBlclN0aW5nUGFyZW50UmVmLmN1cnJlbnQucG9zaXRpb24uY29weShwb3NpdGlvbik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIHF1YXRlcm5pb24gZnJvbSB0aGUgb3RoZXIgcGxheWVyJ3MgZGlyZWN0aW9uXG4gICAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLmF0YW4yKGRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueik7XG4gICAgICAgICAgdmlwZXJTdGluZ1BhcmVudFJlZi5jdXJyZW50LnF1YXRlcm5pb24gPSB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogTWF0aC5zaW4oYW5nbGUgLyAyKSxcbiAgICAgICAgICAgIHo6IDAsXG4gICAgICAgICAgICB3OiBNYXRoLmNvcyhhbmdsZSAvIDIpXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBWaXBlciBTdGluZyB2aXN1YWwgZWZmZWN0XG4gICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IHRyaWdnZXJHbG9iYWxWaXBlclN0aW5nKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBwYXJlbnQgcmVmIHBvc2l0aW9uIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHZpcGVyU3RpbmdQYXJlbnRSZWYuY3VycmVudC5wb3NpdGlvbi5jb3B5KG9yaWdpbmFsUG9zaXRpb24pO1xuICAgICAgICAgICAgdmlwZXJTdGluZ1BhcmVudFJlZi5jdXJyZW50LnF1YXRlcm5pb24gPSBvcmlnaW5hbFF1YXRlcm5pb247XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICBcbiAgICAgICAgICBzZXRNdWx0aXBsYXllclBsYXllclN0YXRlcyhwcmV2ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gdXBkYXRlZC5nZXQoZGF0YS5wbGF5ZXJJZCkgfHwge1xuICAgICAgICAgICAgICBpc0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzU3dpbmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBzd29yZENvbWJvU3RlcDogMSBhcyAxIHwgMiB8IDMsXG4gICAgICAgICAgICAgIGlzRGl2aW5lU3Rvcm1pbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1NwaW5uaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNTd29yZENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNEZWZsZWN0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNWaXBlclN0aW5nQ2hhcmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICB2aXBlclN0aW5nQ2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzQmFycmFnZUNoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgYmFycmFnZUNoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc0NvYnJhU2hvdENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29icmFTaG90Q2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzU2t5ZmFsbGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzQmFja3N0YWJiaW5nOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdXBkYXRlZC5zZXQoZGF0YS5wbGF5ZXJJZCwge1xuICAgICAgICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgICAgICAgIGlzVmlwZXJTdGluZ0NoYXJnaW5nOiB0cnVlLFxuICAgICAgICAgICAgICB2aXBlclN0aW5nQ2hhcmdlUHJvZ3Jlc3M6IDEuMCAvLyBGdWxsIGNoYXJnZSB3aGVuIHRyaWdnZXJlZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc2V0IFZpcGVyIFN0aW5nIHN0YXRlIGFmdGVyIGR1cmF0aW9uXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IG5ldyBNYXAocHJldik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB1cGRhdGVkLmdldChkYXRhLnBsYXllcklkKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZWQuc2V0KGRhdGEucGxheWVySWQsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzVmlwZXJTdGluZ0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdmlwZXJTdGluZ0NoYXJnZVByb2dyZXNzOiAwXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMjAwMCk7IC8vIFZpcGVyIFN0aW5nIGxhc3RzIDIgc2Vjb25kc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmFiaWxpdHlUeXBlID09PSAnYmFycmFnZScpIHtcbiAgICAgICAgICAvLyBTa2lwIHByb2Nlc3Npbmcgb3VyIG93biBiYXJyYWdlIGFiaWxpdGllcyB0byBwcmV2ZW50IGFueSBwb3RlbnRpYWwgaXNzdWVzXG4gICAgICAgICAgaWYgKGRhdGEucGxheWVySWQgPT09IHNvY2tldC5pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRyaWdnZXIgdmlzdWFsIGVmZmVjdFxuICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IFZlY3RvcjMoZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnksIGRhdGEucG9zaXRpb24ueik7XG4gICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gbmV3IFZlY3RvcjMoZGF0YS5kaXJlY3Rpb24ueCwgZGF0YS5kaXJlY3Rpb24ueSwgZGF0YS5kaXJlY3Rpb24ueik7XG4gICAgICAgICAgdHJpZ2dlckdsb2JhbEJhcnJhZ2UocG9zaXRpb24sIGRpcmVjdGlvbik7XG4gICAgICAgICAgXG4gICAgICAgICAgc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMocHJldiA9PiB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHVwZGF0ZWQuZ2V0KGRhdGEucGxheWVySWQpIHx8IHtcbiAgICAgICAgICAgICAgaXNDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGNoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc1N3aW5naW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgc3dvcmRDb21ib1N0ZXA6IDEgYXMgMSB8IDIgfCAzLFxuICAgICAgICAgICAgICBpc0RpdmluZVN0b3JtaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNTcGlubmluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzU3dvcmRDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzRGVmbGVjdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzVmlwZXJTdGluZ0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgdmlwZXJTdGluZ0NoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc0JhcnJhZ2VDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGJhcnJhZ2VDaGFyZ2VQcm9ncmVzczogMCxcbiAgICAgICAgICAgICAgaXNDb2JyYVNob3RDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGNvYnJhU2hvdENoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc1NreWZhbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc0JhY2tzdGFiYmluZzogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHVwZGF0ZWQuc2V0KGRhdGEucGxheWVySWQsIHtcbiAgICAgICAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICAgICAgICBpc0JhcnJhZ2VDaGFyZ2luZzogdHJ1ZSxcbiAgICAgICAgICAgICAgYmFycmFnZUNoYXJnZVByb2dyZXNzOiAxLjAgLy8gRnVsbCBjaGFyZ2Ugd2hlbiB0cmlnZ2VyZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNldCBCYXJyYWdlIHN0YXRlIGFmdGVyIGR1cmF0aW9uXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IG5ldyBNYXAocHJldik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB1cGRhdGVkLmdldChkYXRhLnBsYXllcklkKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZWQuc2V0KGRhdGEucGxheWVySWQsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzQmFycmFnZUNoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYmFycmFnZUNoYXJnZVByb2dyZXNzOiAwXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMTUwMCk7IC8vIEJhcnJhZ2UgbGFzdHMgMS41IHNlY29uZHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5hYmlsaXR5VHlwZSA9PT0gJ2Zyb3N0X25vdmEnKSB7XG4gICAgICAgICAgLy8gQ3JlYXRlIGZyb3N0IG5vdmEgdmlzdWFsIGVmZmVjdCBhdCB0aGUgcGxheWVyJ3MgcG9zaXRpb25cbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IzKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55LCBkYXRhLnBvc2l0aW9uLnopO1xuICAgICAgICAgIGNyZWF0ZVB2cEZyb3N0Tm92YUVmZmVjdChkYXRhLnBsYXllcklkLCBwb3NpdGlvbik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTm90ZTogUFZQIGRhbWFnZSBhbmQgZnJlZXplIGVmZmVjdHMgYXJlIG5vdyBoYW5kbGVkIGJ5IFBWUEZyb3N0Tm92YU1hbmFnZXJcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmFiaWxpdHlUeXBlID09PSAncmVhbmltYXRlJykge1xuXG4gICAgICAgICAgLy8gQ3JlYXRlIHJlYW5pbWF0ZSB2aXN1YWwgZWZmZWN0IGF0IHRoZSBwbGF5ZXIncyBwb3NpdGlvblxuICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IFZlY3RvcjMoZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnksIGRhdGEucG9zaXRpb24ueik7XG4gICAgICAgICAgY3JlYXRlUHZwUmVhbmltYXRlRWZmZWN0KGRhdGEucGxheWVySWQsIHBvc2l0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmFiaWxpdHlUeXBlID09PSAnc21pdGUnKSB7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgc21pdGUgdmlzdWFsIGVmZmVjdCBhdCB0aGUgcGxheWVyJ3MgcG9zaXRpb25cbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IzKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55LCBkYXRhLnBvc2l0aW9uLnopO1xuICAgICAgICAgIGNyZWF0ZVB2cFNtaXRlRWZmZWN0KGRhdGEucGxheWVySWQsIHBvc2l0aW9uLCB1bmRlZmluZWQpOyAvLyBObyBoZWFsaW5nIGNhbGxiYWNrIGZvciByZW1vdGUgcGxheWVyc1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEuYWJpbGl0eVR5cGUgPT09ICdkZWF0aGdyYXNwJykge1xuXG4gICAgICAgICAgLy8gQ3JlYXRlIGRlYXRoIGdyYXNwIHZpc3VhbCBlZmZlY3RcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IzKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55LCBkYXRhLnBvc2l0aW9uLnopO1xuICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ldyBWZWN0b3IzKGRhdGEuZGlyZWN0aW9uLngsIGRhdGEuZGlyZWN0aW9uLnksIGRhdGEuZGlyZWN0aW9uLnopO1xuICAgICAgICAgIGNvbnN0IHRhcmdldFBvc2l0aW9uID0gcG9zaXRpb24uY2xvbmUoKS5hZGQoZGlyZWN0aW9uLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoOCkpO1xuXG4gICAgICAgICAgY3JlYXRlUHZwRGVhdGhHcmFzcEVmZmVjdChkYXRhLnBsYXllcklkLCBwb3NpdGlvbiwgZGlyZWN0aW9uKTtcblxuICAgICAgICAgIC8vIEZpbmQgdGFyZ2V0IHBsYXllciB0byBwdWxsIChjbG9zZXN0IHBsYXllciBpbiBmcm9udCBvZiBjYXN0ZXIpXG4gICAgICAgICAgbGV0IGNsb3Nlc3RUYXJnZXQ6IHsgaWQ6IHN0cmluZzsgZGlzdGFuY2U6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgcGxheWVycy5mb3JFYWNoKChwbGF5ZXI6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYgKHBsYXllci5pZCA9PT0gZGF0YS5wbGF5ZXJJZCkgcmV0dXJuOyAvLyBEb24ndCBwdWxsIHNlbGZcblxuICAgICAgICAgICAgY29uc3QgcGxheWVyUG9zID0gbmV3IFZlY3RvcjMocGxheWVyLnBvc2l0aW9uLngsIHBsYXllci5wb3NpdGlvbi55LCBwbGF5ZXIucG9zaXRpb24ueik7XG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHBvc2l0aW9uLmRpc3RhbmNlVG8ocGxheWVyUG9zKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcGxheWVyIGlzIGluIGZyb250IG9mIGNhc3RlciBhbmQgd2l0aGluIHJhbmdlXG4gICAgICAgICAgICBjb25zdCB0b1BsYXllciA9IHBsYXllclBvcy5jbG9uZSgpLnN1Yihwb3NpdGlvbikubm9ybWFsaXplKCk7XG4gICAgICAgICAgICBjb25zdCBkb3RQcm9kdWN0ID0gZGlyZWN0aW9uLmRvdCh0b1BsYXllcik7XG5cbiAgICAgICAgICAgIGlmIChkb3RQcm9kdWN0ID4gMC41ICYmIGRpc3RhbmNlIDw9IDgpIHsgLy8gNjAgZGVncmVlIGNvbmUsIDggdW5pdCByYW5nZVxuICAgICAgICAgICAgICBpZiAoIWNsb3Nlc3RUYXJnZXQgfHwgZGlzdGFuY2UgPCBjbG9zZXN0VGFyZ2V0LmRpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFRhcmdldCA9IHsgaWQ6IHBsYXllci5pZCwgZGlzdGFuY2UgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gUHVsbCB0aGUgY2xvc2VzdCB0YXJnZXQgcGxheWVyIGlmIGZvdW5kXG4gICAgICAgICAgaWYgKGNsb3Nlc3RUYXJnZXQgIT09IG51bGwgJiYgY2xvc2VzdFRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBjbG9zZXN0VGFyZ2V0IGFzIHsgaWQ6IHN0cmluZzsgZGlzdGFuY2U6IG51bWJlciB9O1xuICAgICAgICAgICAgY3JlYXRlUHZwRGVhdGhHcmFzcFB1bGwodGFyZ2V0LmlkLCBwb3NpdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEuYWJpbGl0eVR5cGUgPT09ICdjaGFyZ2UnKSB7XG4gICAgICAgICAgc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMocHJldiA9PiB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHVwZGF0ZWQuZ2V0KGRhdGEucGxheWVySWQpIHx8IHtcbiAgICAgICAgICAgICAgaXNDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGNoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc1N3aW5naW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgc3dvcmRDb21ib1N0ZXA6IDEgYXMgMSB8IDIgfCAzLFxuICAgICAgICAgICAgICBpc0RpdmluZVN0b3JtaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNTcGlubmluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzU3dvcmRDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzRGVmbGVjdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzVmlwZXJTdGluZ0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgdmlwZXJTdGluZ0NoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc0JhcnJhZ2VDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGJhcnJhZ2VDaGFyZ2VQcm9ncmVzczogMCxcbiAgICAgICAgICAgICAgaXNDb2JyYVNob3RDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGNvYnJhU2hvdENoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc1NreWZhbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc0JhY2tzdGFiYmluZzogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHVwZGF0ZWQuc2V0KGRhdGEucGxheWVySWQsIHtcbiAgICAgICAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICAgICAgICBpc1N3b3JkQ2hhcmdpbmc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNldCBDaGFyZ2Ugc3RhdGUgYWZ0ZXIgZHVyYXRpb24gKGNoYXJnZSBsYXN0cyBhYm91dCAyIHNlY29uZHMpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IG5ldyBNYXAocHJldik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB1cGRhdGVkLmdldChkYXRhLnBsYXllcklkKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZWQuc2V0KGRhdGEucGxheWVySWQsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzU3dvcmRDaGFyZ2luZzogZmFsc2VcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5hYmlsaXR5VHlwZSA9PT0gJ2RlZmxlY3QnKSB7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVHJpZ2dlciB2aXN1YWwgRGVmbGVjdCBTaGllbGQgZWZmZWN0IGF0IHRoZSBwbGF5ZXIncyBwb3NpdGlvblxuICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IFZlY3RvcjMoZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnksIGRhdGEucG9zaXRpb24ueik7XG4gICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gbmV3IFZlY3RvcjMoZGF0YS5kaXJlY3Rpb24ueCwgZGF0YS5kaXJlY3Rpb24ueSwgZGF0YS5kaXJlY3Rpb24ueik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIHJvdGF0aW9uIGZyb20gZGlyZWN0aW9uIGZvciBzaGllbGQgcG9zaXRpb25pbmdcbiAgICAgICAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBWZWN0b3IzKDAsIE1hdGguYXRhbjIoZGlyZWN0aW9uLngsIGRpcmVjdGlvbi56KSwgMCk7XG4gICAgICAgICAgdHJpZ2dlckdsb2JhbERlZmxlY3RTaGllbGQocG9zaXRpb24sIHJvdGF0aW9uLCBkYXRhLnBsYXllcklkKTtcbiAgICAgICAgICBcbiAgICAgICAgICBzZXRNdWx0aXBsYXllclBsYXllclN0YXRlcyhwcmV2ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gdXBkYXRlZC5nZXQoZGF0YS5wbGF5ZXJJZCkgfHwge1xuICAgICAgICAgICAgICBpc0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzU3dpbmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBzd29yZENvbWJvU3RlcDogMSBhcyAxIHwgMiB8IDMsXG4gICAgICAgICAgICAgIGlzRGl2aW5lU3Rvcm1pbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1NwaW5uaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNTd29yZENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNEZWZsZWN0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNWaXBlclN0aW5nQ2hhcmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICB2aXBlclN0aW5nQ2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzQmFycmFnZUNoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgYmFycmFnZUNoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc0NvYnJhU2hvdENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29icmFTaG90Q2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzU2t5ZmFsbGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzQmFja3N0YWJiaW5nOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdXBkYXRlZC5zZXQoZGF0YS5wbGF5ZXJJZCwge1xuICAgICAgICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgICAgICAgIGlzRGVmbGVjdGluZzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc2V0IERlZmxlY3Qgc3RhdGUgYWZ0ZXIgZHVyYXRpb24gKGRlZmxlY3QgbGFzdHMgMyBzZWNvbmRzKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHNldE11bHRpcGxheWVyUGxheWVyU3RhdGVzKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdXBkYXRlZC5nZXQoZGF0YS5wbGF5ZXJJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVkLnNldChkYXRhLnBsYXllcklkLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgICAgICAgICBpc0RlZmxlY3Rpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEuYWJpbGl0eVR5cGUgPT09ICdza3lmYWxsJykge1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCB0aGUgc2t5ZmFsbCBhbmltYXRpb24gc3RhdGUgZm9yIHRoZSBhdHRhY2tpbmcgcGxheWVyXG4gICAgICAgICAgc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMocHJldiA9PiB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHVwZGF0ZWQuZ2V0KGRhdGEucGxheWVySWQpIHx8IHtcbiAgICAgICAgICAgICAgaXNDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGNoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc1N3aW5naW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgc3dvcmRDb21ib1N0ZXA6IDEgYXMgMSB8IDIgfCAzLFxuICAgICAgICAgICAgICBpc0RpdmluZVN0b3JtaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNTcGlubmluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzU3dvcmRDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzRGVmbGVjdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzVmlwZXJTdGluZ0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgdmlwZXJTdGluZ0NoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc0JhcnJhZ2VDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGJhcnJhZ2VDaGFyZ2VQcm9ncmVzczogMCxcbiAgICAgICAgICAgICAgaXNDb2JyYVNob3RDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICAgIGNvYnJhU2hvdENoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc1NreWZhbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc0JhY2tzdGFiYmluZzogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHVwZGF0ZWQuc2V0KGRhdGEucGxheWVySWQsIHtcbiAgICAgICAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICAgICAgICBpc1NreWZhbGxpbmc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNldCBTa3lmYWxsIHN0YXRlIGFmdGVyIGR1cmF0aW9uIChza3lmYWxsIGxhc3RzIGFib3V0IDMtNCBzZWNvbmRzIHRvdGFsKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHNldE11bHRpcGxheWVyUGxheWVyU3RhdGVzKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdXBkYXRlZC5nZXQoZGF0YS5wbGF5ZXJJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVkLnNldChkYXRhLnBsYXllcklkLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgICAgICAgICBpc1NreWZhbGxpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMTc1MCk7IC8vIFNreWZhbGwgZHVyYXRpb25cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5hYmlsaXR5VHlwZSA9PT0gJ2JhY2tzdGFiJykge1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEJhY2tzdGFiIGlzIGFuIGluc3RhbnQgbWVsZWUgYXR0YWNrLCBzbyB3ZSBuZWVkIHRvOlxuICAgICAgICAgIC8vIDEuIENhbGN1bGF0ZSBkYW1hZ2UgYmFzZWQgb24gcG9zaXRpb24gcmVsYXRpdmUgdG8gdGFyZ2V0c1xuICAgICAgICAgIC8vIDIuIEFwcGx5IGRhbWFnZSB0byBwbGF5ZXJzIGluIHJhbmdlXG4gICAgICAgICAgLy8gMy4gU2hvdyBicmllZiBhbmltYXRpb24gc3RhdGVcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBhdHRhY2tlclBvc2l0aW9uID0gbmV3IFZlY3RvcjMoZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnksIGRhdGEucG9zaXRpb24ueik7XG4gICAgICAgICAgY29uc3QgYXR0YWNrZXJEaXJlY3Rpb24gPSBuZXcgVmVjdG9yMyhkYXRhLmRpcmVjdGlvbi54LCBkYXRhLmRpcmVjdGlvbi55LCBkYXRhLmRpcmVjdGlvbi56KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTZXQgdGhlIGJhY2tzdGFiIGFuaW1hdGlvbiBzdGF0ZSBmb3IgdGhlIGF0dGFja2luZyBwbGF5ZXJcbiAgICAgICAgICBzZXRNdWx0aXBsYXllclBsYXllclN0YXRlcyhwcmV2ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gdXBkYXRlZC5nZXQoZGF0YS5wbGF5ZXJJZCkgfHwge1xuICAgICAgICAgICAgICBpc0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzU3dpbmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBzd29yZENvbWJvU3RlcDogMSBhcyAxIHwgMiB8IDMsXG4gICAgICAgICAgICAgIGlzRGl2aW5lU3Rvcm1pbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1NwaW5uaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNEZWZsZWN0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNTd29yZENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNWaXBlclN0aW5nQ2hhcmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICB2aXBlclN0aW5nQ2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzQmFycmFnZUNoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgYmFycmFnZUNoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc0NvYnJhU2hvdENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29icmFTaG90Q2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzU2t5ZmFsbGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzQmFja3N0YWJiaW5nOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2V0IGJhY2tzdGFiIGFuaW1hdGlvbiBzdGF0ZVxuICAgICAgICAgICAgdXBkYXRlZC5zZXQoZGF0YS5wbGF5ZXJJZCwge1xuICAgICAgICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgICAgICAgIGlzQmFja3N0YWJiaW5nOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzZXQgYmFja3N0YWIgYW5pbWF0aW9uIGFmdGVyIGR1cmF0aW9uXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IG5ldyBNYXAocHJldik7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gdXBkYXRlZC5nZXQoZGF0YS5wbGF5ZXJJZCk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlZC5zZXQoZGF0YS5wbGF5ZXJJZCwge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzQmFja3N0YWJiaW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDEwMDApOyAvLyBNYXRjaCBiYWNrc3RhYiBkdXJhdGlvblxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaW5kIHRoZSBhdHRhY2tlciBwbGF5ZXIgdG8gZ2V0IHRoZWlyIHJvdGF0aW9uXG4gICAgICAgICAgY29uc3QgYXR0YWNrZXJQbGF5ZXIgPSBwbGF5ZXJzLmdldChkYXRhLnBsYXllcklkKTtcbiAgICAgICAgICBpZiAoYXR0YWNrZXJQbGF5ZXIpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGxvY2FsIHBsYXllciBpcyBpbiByYW5nZSBhbmQgY2FsY3VsYXRlIGRhbWFnZVxuICAgICAgICAgICAgY29uc3QgbG9jYWxQbGF5ZXIgPSBwbGF5ZXJzLmdldChzb2NrZXQ/LmlkIHx8ICcnKTtcbiAgICAgICAgICAgIGlmIChsb2NhbFBsYXllciAmJiBzb2NrZXQ/LmlkICE9PSBkYXRhLnBsYXllcklkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxvY2FsUGxheWVyUG9zID0gbmV3IFZlY3RvcjMobG9jYWxQbGF5ZXIucG9zaXRpb24ueCwgbG9jYWxQbGF5ZXIucG9zaXRpb24ueSwgbG9jYWxQbGF5ZXIucG9zaXRpb24ueik7XG4gICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gYXR0YWNrZXJQb3NpdGlvbi5kaXN0YW5jZVRvKGxvY2FsUGxheWVyUG9zKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8PSAyLjUpIHsgLy8gQmFja3N0YWIgcmFuZ2VcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhdHRhY2tlciBpcyBpbiBmcm9udCBvZiBsb2NhbCBwbGF5ZXIgKGNvbmUgYXR0YWNrKVxuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvblRvTG9jYWwgPSBuZXcgVmVjdG9yMygpXG4gICAgICAgICAgICAgICAgICAuc3ViVmVjdG9ycyhsb2NhbFBsYXllclBvcywgYXR0YWNrZXJQb3NpdGlvbilcbiAgICAgICAgICAgICAgICAgIC5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBkb3RQcm9kdWN0ID0gYXR0YWNrZXJEaXJlY3Rpb24uZG90KGRpcmVjdGlvblRvTG9jYWwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlVGhyZXNob2xkID0gTWF0aC5jb3MoTWF0aC5QSSAvIDMpOyAvLyA2MCBkZWdyZWUgY29uZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChkb3RQcm9kdWN0ID49IGFuZ2xlVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBMb2NhbCBwbGF5ZXIgaXMgaW4gdGhlIGF0dGFjayBjb25lLCBjYWxjdWxhdGUgYmFja3N0YWIgZGFtYWdlXG4gICAgICAgICAgICAgICAgICBsZXQgZGFtYWdlID0gNzU7IC8vIEJhc2UgZGFtYWdlXG4gICAgICAgICAgICAgICAgICBsZXQgaXNCYWNrc3RhYiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgbG9jYWwgcGxheWVyJ3MgZmFjaW5nIGRpcmVjdGlvbiBmcm9tIHRoZWlyIHJvdGF0aW9uXG4gICAgICAgICAgICAgICAgICBjb25zdCBsb2NhbEZhY2luZ0RpcmVjdGlvbiA9IG5ldyBWZWN0b3IzKFxuICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbihsb2NhbFBsYXllci5yb3RhdGlvbi55KSxcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5jb3MobG9jYWxQbGF5ZXIucm90YXRpb24ueSlcbiAgICAgICAgICAgICAgICAgICkubm9ybWFsaXplKCk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIFZlY3RvciBmcm9tIGxvY2FsIHBsYXllciB0byBhdHRhY2tlclxuICAgICAgICAgICAgICAgICAgY29uc3QgYXR0YWNrZXJEaXJlY3Rpb25Gcm9tTG9jYWwgPSBuZXcgVmVjdG9yMygpXG4gICAgICAgICAgICAgICAgICAgIC5zdWJWZWN0b3JzKGF0dGFja2VyUG9zaXRpb24sIGxvY2FsUGxheWVyUG9zKVxuICAgICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGF0dGFja2VyIGlzIGJlaGluZCBsb2NhbCBwbGF5ZXIgKGRvdCBwcm9kdWN0IDwgMCBtZWFucyBvcHBvc2l0ZSBkaXJlY3Rpb24pXG4gICAgICAgICAgICAgICAgICBjb25zdCBiZWhpbmREb3RQcm9kdWN0ID0gbG9jYWxGYWNpbmdEaXJlY3Rpb24uZG90KGF0dGFja2VyRGlyZWN0aW9uRnJvbUxvY2FsKTtcbiAgICAgICAgICAgICAgICAgIGlzQmFja3N0YWIgPSBiZWhpbmREb3RQcm9kdWN0IDwgLTAuMzsgLy8gNzAgZGVncmVlIGNvbmUgYmVoaW5kIHRhcmdldFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZiAoaXNCYWNrc3RhYikge1xuICAgICAgICAgICAgICAgICAgICBkYW1hZ2UgPSAxNTA7IC8vIEJhY2tzdGFiIGRhbWFnZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBBcHBseSBkYW1hZ2UgdG8gbG9jYWwgcGxheWVyXG4gICAgICAgICAgICAgICAgICBpZiAoYnJvYWRjYXN0UGxheWVyRGFtYWdlICYmIHNvY2tldD8uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJvYWRjYXN0UGxheWVyRGFtYWdlKHNvY2tldC5pZCwgZGFtYWdlLCAnYmFja3N0YWInKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2hvdyBicmllZiBiYWNrc3RhYiBhbmltYXRpb24gc3RhdGVcbiAgICAgICAgICBzZXRNdWx0aXBsYXllclBsYXllclN0YXRlcyhwcmV2ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgTWFwKHByZXYpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gdXBkYXRlZC5nZXQoZGF0YS5wbGF5ZXJJZCkgfHwge1xuICAgICAgICAgICAgICBpc0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgY2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzU3dpbmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBzd29yZENvbWJvU3RlcDogMSBhcyAxIHwgMiB8IDMsXG4gICAgICAgICAgICAgIGlzRGl2aW5lU3Rvcm1pbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1NwaW5uaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNTd29yZENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNEZWZsZWN0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNWaXBlclN0aW5nQ2hhcmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICB2aXBlclN0aW5nQ2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzQmFycmFnZUNoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgYmFycmFnZUNoYXJnZVByb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBpc0NvYnJhU2hvdENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29icmFTaG90Q2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICAgIGlzU2t5ZmFsbGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzQmFja3N0YWJiaW5nOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdXBkYXRlZC5zZXQoZGF0YS5wbGF5ZXJJZCwge1xuICAgICAgICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgICAgICAgIGlzU3dpbmdpbmc6IHRydWUgLy8gQnJpZWYgc3dpbmcgYW5pbWF0aW9uIGZvciBiYWNrc3RhYlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc2V0IHN3aW5nIHN0YXRlIGFmdGVyIGJyaWVmIGR1cmF0aW9uXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IG5ldyBNYXAocHJldik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB1cGRhdGVkLmdldChkYXRhLnBsYXllcklkKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZWQuc2V0KGRhdGEucGxheWVySWQsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzU3dpbmdpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMzAwKTsgLy8gQnJpZWYgMzAwbXMgYW5pbWF0aW9uXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVBsYXllckRhbWFnZWQgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgICAvLyBJZiB3ZSBhcmUgdGhlIHRhcmdldCwgYXBwbHkgZGFtYWdlIHRvIG91ciBwbGF5ZXJcbiAgICAgIGlmIChkYXRhLnRhcmdldFBsYXllcklkID09PSBzb2NrZXQuaWQgJiYgcGxheWVyRW50aXR5KSB7XG4gICAgICAgIGNvbnN0IGhlYWx0aCA9IHBsYXllckVudGl0eS5nZXRDb21wb25lbnQoSGVhbHRoKTtcbiAgICAgICAgY29uc3Qgc2hpZWxkID0gcGxheWVyRW50aXR5LmdldENvbXBvbmVudChTaGllbGQpO1xuICAgICAgICBpZiAoaGVhbHRoKSB7XG4gICAgICAgICAgLy8gUGFzcyB0aGUgZW50aXR5IHNvIEhlYWx0aCBjb21wb25lbnQgY2FuIHVzZSBTaGllbGQgZm9yIGRhbWFnZSBhYnNvcnB0aW9uXG4gICAgICAgICAgaGVhbHRoLnRha2VEYW1hZ2UoZGF0YS5kYW1hZ2UsIERhdGUubm93KCkgLyAxMDAwLCBwbGF5ZXJFbnRpdHkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVBsYXllckFuaW1hdGlvblN0YXRlID0gKGRhdGE6IGFueSkgPT4ge1xuICAgICAgXG4gICAgICBcbiAgICAgIGlmIChkYXRhLnBsYXllcklkICE9PSBzb2NrZXQuaWQpIHtcbiAgICAgICAgc2V0TXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMocHJldiA9PiB7XG4gICAgICAgICAgY29uc3QgdXBkYXRlZCA9IG5ldyBNYXAocHJldik7XG4gICAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gdXBkYXRlZC5nZXQoZGF0YS5wbGF5ZXJJZCkgfHwge1xuICAgICAgICAgICAgaXNDaGFyZ2luZzogZmFsc2UsXG4gICAgICAgICAgICBjaGFyZ2VQcm9ncmVzczogMCxcbiAgICAgICAgICAgIGlzU3dpbmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgc3dvcmRDb21ib1N0ZXA6IDEgfCAyIHwgMyxcbiAgICAgICAgICAgIGlzRGl2aW5lU3Rvcm1pbmc6IGZhbHNlLFxuICAgICAgICAgICAgaXNTcGlubmluZzogZmFsc2UsXG4gICAgICAgICAgICBpc1N3b3JkQ2hhcmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgaXNEZWZsZWN0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVmlwZXJTdGluZ0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHZpcGVyU3RpbmdDaGFyZ2VQcm9ncmVzczogMCxcbiAgICAgICAgICAgIGlzQmFycmFnZUNoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGJhcnJhZ2VDaGFyZ2VQcm9ncmVzczogMCxcbiAgICAgICAgICAgIGlzQ29icmFTaG90Q2hhcmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgY29icmFTaG90Q2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICBpc0JhY2tzdGFiYmluZzogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVwZGF0ZSB3aXRoIHRoZSByZWNlaXZlZCBhbmltYXRpb24gc3RhdGVcbiAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgICAgIC4uLmRhdGEuYW5pbWF0aW9uU3RhdGUsXG4gICAgICAgICAgICBsYXN0QW5pbWF0aW9uVXBkYXRlOiBEYXRlLm5vdygpXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgXG4gICAgICAgICAgXG4gICAgICAgICAgdXBkYXRlZC5zZXQoZGF0YS5wbGF5ZXJJZCwgbmV3U3RhdGUpO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlUGxheWVyRWZmZWN0ID0gKGRhdGE6IGFueSkgPT4ge1xuXG4gICAgICBpZiAoZGF0YS5lZmZlY3Q/LnR5cGUgPT09ICd2ZW5vbScpIHtcbiAgICAgICAgY29uc3QgeyB0YXJnZXRQbGF5ZXJJZCwgcG9zaXRpb24sIGR1cmF0aW9uIH0gPSBkYXRhLmVmZmVjdDtcblxuICAgICAgICAvLyBDcmVhdGUgdmVub20gZWZmZWN0IG9uIHRoZSB0YXJnZXQgcGxheWVyIChjb3VsZCBiZSBsb2NhbCBwbGF5ZXIgb3Igb3RoZXIgcGxheWVyKVxuICAgICAgICBpZiAodGFyZ2V0UGxheWVySWQgJiYgcG9zaXRpb24pIHtcbiAgICAgICAgICBjb25zdCB2ZW5vbVBvc2l0aW9uID0gbmV3IFZlY3RvcjMocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueik7XG4gICAgICAgICAgY3JlYXRlUHZwVmVub21FZmZlY3QodGFyZ2V0UGxheWVySWQsIHZlbm9tUG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLmVmZmVjdD8udHlwZSA9PT0gJ2RlYXRoZ3Jhc3BfcHVsbCcpIHtcbiAgICAgICAgY29uc3QgeyB0YXJnZXRQbGF5ZXJJZCwgcG9zaXRpb24sIGNhc3RlcklkIH0gPSBkYXRhLmVmZmVjdDtcbiAgICAgICAgY29uc29sZS5sb2coYPCfjqMgUmVjZWl2ZWQgRGVhdGhHcmFzcCBwdWxsIGVmZmVjdCBmb3IgdGFyZ2V0ICR7dGFyZ2V0UGxheWVySWR9IGZyb20gY2FzdGVyICR7Y2FzdGVySWR9YCk7XG5cbiAgICAgICAgLy8gSWYgdGhpcyBjbGllbnQgaXMgdGhlIHRhcmdldCBwbGF5ZXIsIHVwZGF0ZSB0aGUgbG9jYWwgcG9zaXRpb25cbiAgICAgICAgaWYgKHRhcmdldFBsYXllcklkID09PSBzb2NrZXQ/LmlkICYmIHBvc2l0aW9uKSB7XG4gICAgICAgICAgY29uc3QgcHVsbFBvc2l0aW9uID0gbmV3IFZlY3RvcjMocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueik7XG4gICAgICAgICAgY29uc29sZS5sb2coYPCfjqMgQXBwbHlpbmcgRGVhdGhHcmFzcCBwdWxsIHRvIGxvY2FsIHBsYXllciwgbW92aW5nIHRvOmAsIHB1bGxQb3NpdGlvbik7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgbG9jYWwgcGxheWVyIGVudGl0eSBwb3NpdGlvblxuICAgICAgICAgIGlmIChwbGF5ZXJFbnRpdHkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHBsYXllckVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtLnNldFBvc2l0aW9uKHB1bGxQb3NpdGlvbi54LCBwdWxsUG9zaXRpb24ueSwgcHVsbFBvc2l0aW9uLnopO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OoyBMb2NhbCBwbGF5ZXIgcG9zaXRpb24gdXBkYXRlZCB2aWEgRGVhdGhHcmFzcCBwdWxsYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVBsYXllckRlYnVmZiA9IChkYXRhOiBhbnkpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn46vIFJlY2VpdmVkIFBWUCBwbGF5ZXIgZGVidWZmOicsIGRhdGEpO1xuICAgICAgY29uc29sZS5sb2coYPCflI0gRGVidWc6IE15IHNvY2tldCBJRCBpcyBcIiR7c29ja2V0Py5pZH1cIiwgdGFyZ2V0IGlzIFwiJHtkYXRhLnRhcmdldFBsYXllcklkfVwiLCBhbSBJIHRoZSB0YXJnZXQ/ICR7c29ja2V0Py5pZCA9PT0gZGF0YS50YXJnZXRQbGF5ZXJJZH1gKTtcbiAgICAgIFxuICAgICAgY29uc3QgeyB0YXJnZXRQbGF5ZXJJZCwgZGVidWZmVHlwZSwgZHVyYXRpb24sIGVmZmVjdERhdGEgfSA9IGRhdGE7XG4gICAgICBcbiAgICAgIGlmICh0YXJnZXRQbGF5ZXJJZCAmJiBkZWJ1ZmZUeXBlICYmIGR1cmF0aW9uKSB7XG4gICAgICAgIGxldCBwb3NpdGlvbjogVmVjdG9yMztcbiAgICAgICAgXG4gICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGxvY2FsIHBsYXllciBiZWluZyBkZWJ1ZmZlZCwgdXNlIHRoZSBsb2NhbCBwbGF5ZXIgZW50aXR5IHBvc2l0aW9uIGZvciBhY2N1cmFjeVxuICAgICAgICBpZiAodGFyZ2V0UGxheWVySWQgPT09IHNvY2tldD8uaWQgJiYgcGxheWVyRW50aXR5KSB7XG4gICAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gcGxheWVyRW50aXR5LmdldENvbXBvbmVudChUcmFuc2Zvcm0pO1xuICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gdHJhbnNmb3JtLnBvc2l0aW9uLmNsb25lKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGN1cnJlbnQgcGxheWVyIHBvc2l0aW9uIGZyb20gc3RhdGVcbiAgICAgICAgICAgIHBvc2l0aW9uID0gcGxheWVyUG9zaXRpb24uY2xvbmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRm9yIG90aGVyIHBsYXllcnMsIHVzZSB0aGUgbXVsdGlwbGF5ZXIgY29udGV4dCBvciBlZmZlY3REYXRhXG4gICAgICAgICAgY29uc3QgdGFyZ2V0UGxheWVyID0gcGxheWVycy5nZXQodGFyZ2V0UGxheWVySWQpO1xuICAgICAgICAgIHBvc2l0aW9uID0gdGFyZ2V0UGxheWVyIFxuICAgICAgICAgICAgPyBuZXcgVmVjdG9yMyh0YXJnZXRQbGF5ZXIucG9zaXRpb24ueCwgdGFyZ2V0UGxheWVyLnBvc2l0aW9uLnksIHRhcmdldFBsYXllci5wb3NpdGlvbi56KVxuICAgICAgICAgICAgOiAoZWZmZWN0RGF0YT8ucG9zaXRpb24gXG4gICAgICAgICAgICAgICAgPyBuZXcgVmVjdG9yMyhlZmZlY3REYXRhLnBvc2l0aW9uLngsIGVmZmVjdERhdGEucG9zaXRpb24ueSwgZWZmZWN0RGF0YS5wb3NpdGlvbi56KVxuICAgICAgICAgICAgICAgIDogbmV3IFZlY3RvcjMoMCwgMCwgMCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjcmVhdGVQdnBEZWJ1ZmZFZmZlY3QodGFyZ2V0UGxheWVySWQsIGRlYnVmZlR5cGUsIHBvc2l0aW9uLCBkdXJhdGlvbik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHNvY2tldC5vbigncGxheWVyLWF0dGFja2VkJywgaGFuZGxlUGxheWVyQXR0YWNrKTtcbiAgICBzb2NrZXQub24oJ3BsYXllci11c2VkLWFiaWxpdHknLCBoYW5kbGVQbGF5ZXJBYmlsaXR5KTtcbiAgICBzb2NrZXQub24oJ3BsYXllci1kYW1hZ2VkJywgaGFuZGxlUGxheWVyRGFtYWdlZCk7XG4gICAgc29ja2V0Lm9uKCdwbGF5ZXItYW5pbWF0aW9uLXN0YXRlJywgaGFuZGxlUGxheWVyQW5pbWF0aW9uU3RhdGUpO1xuICAgIHNvY2tldC5vbigncGxheWVyLWVmZmVjdCcsIGhhbmRsZVBsYXllckVmZmVjdCk7XG4gICAgc29ja2V0Lm9uKCdwbGF5ZXItZGVidWZmJywgaGFuZGxlUGxheWVyRGVidWZmKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzb2NrZXQub2ZmKCdwbGF5ZXItYXR0YWNrZWQnLCBoYW5kbGVQbGF5ZXJBdHRhY2spO1xuICAgICAgc29ja2V0Lm9mZigncGxheWVyLXVzZWQtYWJpbGl0eScsIGhhbmRsZVBsYXllckFiaWxpdHkpO1xuICAgICAgc29ja2V0Lm9mZigncGxheWVyLWRhbWFnZWQnLCBoYW5kbGVQbGF5ZXJEYW1hZ2VkKTtcbiAgICAgIHNvY2tldC5vZmYoJ3BsYXllci1hbmltYXRpb24tc3RhdGUnLCBoYW5kbGVQbGF5ZXJBbmltYXRpb25TdGF0ZSk7XG4gICAgICBzb2NrZXQub2ZmKCdwbGF5ZXItZWZmZWN0JywgaGFuZGxlUGxheWVyRWZmZWN0KTtcbiAgICAgIHNvY2tldC5vZmYoJ3BsYXllci1kZWJ1ZmYnLCBoYW5kbGVQbGF5ZXJEZWJ1ZmYpO1xuICAgIH07XG4gIH0sIFtzb2NrZXQsIHBsYXllckVudGl0eV0pO1xuXG4gIC8vIEFkZCBhIGNsZWFudXAgZWZmZWN0IHRvIHByZXZlbnQgc3R1Y2sgYW5pbWF0aW9uc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNsZWFudXBJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHNldE11bHRpcGxheWVyUGxheWVyU3RhdGVzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCB1cGRhdGVkID0gbmV3IE1hcChwcmV2KTtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgbGV0IGhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIHVwZGF0ZWQuZm9yRWFjaCgoc3RhdGUsIHBsYXllcklkKSA9PiB7XG4gICAgICAgICAgLy8gSWYgYW4gYW5pbWF0aW9uIGhhcyBiZWVuIGFjdGl2ZSBmb3IgbW9yZSB0aGFuIDMgc2Vjb25kcywgZm9yY2UgcmVzZXQgaXRcbiAgICAgICAgICBpZiAoc3RhdGUubGFzdEFuaW1hdGlvblVwZGF0ZSAmJiBub3cgLSBzdGF0ZS5sYXN0QW5pbWF0aW9uVXBkYXRlID4gMzAwMCkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLmlzU3dpbmdpbmcgfHwgc3RhdGUuaXNDaGFyZ2luZyB8fCBzdGF0ZS5pc1NwaW5uaW5nKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SnIEZvcmNlIHJlc2V0dGluZyBzdHVjayBhbmltYXRpb24gZm9yIHBsYXllciAke3BsYXllcklkfWApO1xuICAgICAgICAgICAgICB1cGRhdGVkLnNldChwbGF5ZXJJZCwge1xuICAgICAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgICAgIGlzU3dpbmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzQ2hhcmdpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzU3Bpbm5pbmc6IGZhbHNlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZXMgPyB1cGRhdGVkIDogcHJldjtcbiAgICAgIH0pO1xuICAgIH0sIDEwMDApOyAvLyBDaGVjayBldmVyeSBzZWNvbmRcbiAgICBcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChjbGVhbnVwSW50ZXJ2YWwpO1xuICB9LCBbXSk7XG5cbiAgLy8gU3luYyBzZXJ2ZXIgcGxheWVycyBhbmQgdG93ZXJzIHdpdGggbG9jYWwgRUNTIGVudGl0aWVzIGZvciBQVlAgZGFtYWdlIHN5c3RlbVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZW5naW5lUmVmLmN1cnJlbnQgfHwgIWdhbWVTdGFydGVkKSByZXR1cm47XG4gICAgXG4gICAgY29uc3Qgd29ybGQgPSBlbmdpbmVSZWYuY3VycmVudC5nZXRXb3JsZCgpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBsb2NhbCBFQ1MgZW50aXRpZXMgZm9yIG90aGVyIHBsYXllcnMgKGZvciBjb2xsaXNpb24gZGV0ZWN0aW9uKVxuICAgIHBsYXllcnMuZm9yRWFjaCgoc2VydmVyUGxheWVyLCBwbGF5ZXJJZCkgPT4ge1xuICAgICAgLy8gU2tpcCBvdXIgb3duIHBsYXllclxuICAgICAgaWYgKHBsYXllcklkID09PSBzb2NrZXQ/LmlkKSByZXR1cm47XG4gICAgICBcbiAgICAgIGlmICghc2VydmVyUGxheWVyRW50aXRpZXMuY3VycmVudC5oYXMocGxheWVySWQpKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBsb2NhbCBFQ1MgZW50aXR5IGZvciB0aGlzIHNlcnZlciBwbGF5ZXJcbiAgICAgICAgY29uc3QgZW50aXR5ID0gd29ybGQuY3JlYXRlRW50aXR5KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgVHJhbnNmb3JtIGNvbXBvbmVudFxuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSB3b3JsZC5jcmVhdGVDb21wb25lbnQoVHJhbnNmb3JtKTtcbiAgICAgICAgdHJhbnNmb3JtLnNldFBvc2l0aW9uKHNlcnZlclBsYXllci5wb3NpdGlvbi54LCBzZXJ2ZXJQbGF5ZXIucG9zaXRpb24ueSwgc2VydmVyUGxheWVyLnBvc2l0aW9uLnopO1xuICAgICAgICBlbnRpdHkuYWRkQ29tcG9uZW50KHRyYW5zZm9ybSk7XG5cbiAgICAgICAgLy8gQWRkIEludGVycG9sYXRpb25CdWZmZXIgY29tcG9uZW50IGZvciBzbW9vdGggbW92ZW1lbnRcbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdGlvbkJ1ZmZlciA9IHdvcmxkLmNyZWF0ZUNvbXBvbmVudChJbnRlcnBvbGF0aW9uQnVmZmVyKTtcbiAgICAgICAgZW50aXR5LmFkZENvbXBvbmVudChpbnRlcnBvbGF0aW9uQnVmZmVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBIZWFsdGggY29tcG9uZW50IChmb3IgUFZQIGRhbWFnZSlcbiAgICAgICAgY29uc3QgaGVhbHRoID0gbmV3IEhlYWx0aChzZXJ2ZXJQbGF5ZXIubWF4SGVhbHRoKTtcbiAgICAgICAgaGVhbHRoLmN1cnJlbnRIZWFsdGggPSBzZXJ2ZXJQbGF5ZXIuaGVhbHRoO1xuICAgICAgICBlbnRpdHkuYWRkQ29tcG9uZW50KGhlYWx0aCk7XG5cbiAgICAgICAgLy8gQWRkIFNoaWVsZCBjb21wb25lbnQgKGZvciBQVlAgZGFtYWdlKVxuICAgICAgICBjb25zdCBzaGllbGQgPSBuZXcgU2hpZWxkKDEwMCwgMjAsIDUpOyAvLyAxMDAgbWF4IHNoaWVsZCwgMjAvcyByZWdlbiwgNXMgZGVsYXlcbiAgICAgICAgZW50aXR5LmFkZENvbXBvbmVudChzaGllbGQpO1xuXG4gICAgICAgIC8vIEFkZCBNb3ZlbWVudCBjb21wb25lbnQgZm9yIGVxdWFsIGNvbGxpc2lvbiB0cmVhdG1lbnQgd2l0aCBsb2NhbCBwbGF5ZXJcbiAgICAgICAgLy8gUmVtb3RlIHBsYXllcnMgZG9uJ3QgdXNlIHRoaXMgZm9yIGFjdHVhbCBtb3ZlbWVudCAodGhleSdyZSBwb3NpdGlvbi1zeW5jZWQgZnJvbSBzZXJ2ZXIpXG4gICAgICAgIC8vIGJ1dCBoYXZpbmcgaXQgZW5zdXJlcyBlcXVhbCBjb2xsaXNpb24gcmVzb2x1dGlvbiBpbiBDb2xsaXNpb25TeXN0ZW1cbiAgICAgICAgY29uc3QgbW92ZW1lbnQgPSB3b3JsZC5jcmVhdGVDb21wb25lbnQoTW92ZW1lbnQpO1xuICAgICAgICBtb3ZlbWVudC5tYXhTcGVlZCA9IDMuNzU7IC8vIE1hdGNoIGxvY2FsIHBsYXllciBzZXR0aW5nc1xuICAgICAgICBtb3ZlbWVudC5qdW1wRm9yY2UgPSA4O1xuICAgICAgICBtb3ZlbWVudC5mcmljdGlvbiA9IDAuODU7XG4gICAgICAgIG1vdmVtZW50LmNhbk1vdmUgPSBmYWxzZTsgLy8gRGlzYWJsZSBhY3R1YWwgbW92ZW1lbnQgc2luY2UgcG9zaXRpb24gY29tZXMgZnJvbSBzZXJ2ZXJcbiAgICAgICAgZW50aXR5LmFkZENvbXBvbmVudChtb3ZlbWVudCk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgQ29sbGlkZXIgY29tcG9uZW50IGZvciBQVlAgZGFtYWdlIGRldGVjdGlvblxuICAgICAgICBjb25zdCBjb2xsaWRlciA9IHdvcmxkLmNyZWF0ZUNvbXBvbmVudChDb2xsaWRlcik7XG4gICAgICAgIGNvbGxpZGVyLnR5cGUgPSBDb2xsaWRlclR5cGUuU1BIRVJFO1xuICAgICAgICBjb2xsaWRlci5yYWRpdXMgPSAwLjk7IC8vIFJlZHVjZWQgY29sbGlzaW9uIHJhZGl1cyBmb3IgYmV0dGVyIHBsYXllciBwcm94aW1pdHkgaW4gUFZQXG4gICAgICAgIGNvbGxpZGVyLmxheWVyID0gQ29sbGlzaW9uTGF5ZXIuRU5FTVk7IC8vIFVzZSBlbmVteSBsYXllciBzbyBwcm9qZWN0aWxlcyBjYW4gaGl0IHJlbW90ZSBwbGF5ZXJzIGluIFBWUFxuICAgICAgICAvLyBTZXQgY29sbGlzaW9uIG1hc2sgdG8gY29sbGlkZSB3aXRoIGVudmlyb25tZW50IG9ubHkgLSBOTyBwbGF5ZXItdG8tcGxheWVyIGNvbGxpc2lvbiBpbiBQVlBcbiAgICAgICAgY29sbGlkZXIuc2V0TWFzayhDb2xsaXNpb25MYXllci5FTlZJUk9OTUVOVCk7XG4gICAgICAgIGNvbGxpZGVyLnNldE9mZnNldCgwLCAwLjI1LCAwKTsgLy8gQ2VudGVyIG9uIHBsYXllclxuICAgICAgICBlbnRpdHkuYWRkQ29tcG9uZW50KGNvbGxpZGVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE5vdGlmeSBzeXN0ZW1zIHRoYXQgdGhlIGVudGl0eSBpcyByZWFkeVxuICAgICAgICB3b3JsZC5ub3RpZnlFbnRpdHlBZGRlZChlbnRpdHkpO1xuICAgICAgICBcbiAgICAgICAgLy8gU3RvcmUgdGhlIG1hcHBpbmdcbiAgICAgICAgc2VydmVyUGxheWVyRW50aXRpZXMuY3VycmVudC5zZXQocGxheWVySWQsIGVudGl0eS5pZCk7XG4gICAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgbG9jYWwgRUNTIGVudGl0eVxuICAgICAgICBjb25zdCBlbnRpdHlJZCA9IHNlcnZlclBsYXllckVudGl0aWVzLmN1cnJlbnQuZ2V0KHBsYXllcklkKSE7XG4gICAgICAgIGNvbnN0IGVudGl0eSA9IHdvcmxkLmdldEVudGl0eShlbnRpdHlJZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZW50aXR5KSB7XG4gICAgICAgICAgLy8gVXBkYXRlIHBvc2l0aW9uIHVzaW5nIGludGVycG9sYXRpb24gYnVmZmVyIGZvciByZW1vdGUgcGxheWVycyBvbmx5XG4gICAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gZW50aXR5LmdldENvbXBvbmVudChUcmFuc2Zvcm0pO1xuICAgICAgICAgIGNvbnN0IGludGVycG9sYXRpb25CdWZmZXIgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KEludGVycG9sYXRpb25CdWZmZXIpO1xuICAgICAgICAgIGlmICh0cmFuc2Zvcm0gJiYgaW50ZXJwb2xhdGlvbkJ1ZmZlcikge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHJvdGF0aW9uIHF1YXRlcm5pb24gZnJvbSBFdWxlciBhbmdsZXNcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTtcbiAgICAgICAgICAgIHJvdGF0aW9uLnNldEZyb21FdWxlcihuZXcgRXVsZXIoc2VydmVyUGxheWVyLnJvdGF0aW9uLngsIHNlcnZlclBsYXllci5yb3RhdGlvbi55LCBzZXJ2ZXJQbGF5ZXIucm90YXRpb24ueikpO1xuXG4gICAgICAgICAgICAvLyBBZGQgc2VydmVyIHN0YXRlIHRvIGludGVycG9sYXRpb24gYnVmZmVyIGZvciBzbW9vdGggcmVtb3RlIHBsYXllciBtb3ZlbWVudFxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgVmVjdG9yMyhzZXJ2ZXJQbGF5ZXIucG9zaXRpb24ueCwgc2VydmVyUGxheWVyLnBvc2l0aW9uLnksIHNlcnZlclBsYXllci5wb3NpdGlvbi56KTtcbiAgICAgICAgICAgIGludGVycG9sYXRpb25CdWZmZXIuYWRkU2VydmVyU3RhdGUocG9zaXRpb24sIHJvdGF0aW9uKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gZGlyZWN0IHBvc2l0aW9uIHVwZGF0ZSBpZiBpbnRlcnBvbGF0aW9uIGJ1ZmZlciBub3QgYXZhaWxhYmxlXG4gICAgICAgICAgICB0cmFuc2Zvcm0uc2V0UG9zaXRpb24oc2VydmVyUGxheWVyLnBvc2l0aW9uLngsIHNlcnZlclBsYXllci5wb3NpdGlvbi55LCBzZXJ2ZXJQbGF5ZXIucG9zaXRpb24ueik7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlc2V0IHZlbG9jaXR5IGZvciByZW1vdGUgcGxheWVycyB0byBwcmV2ZW50IGRyaWZ0IGZyb20gY29sbGlzaW9uIHJlc29sdXRpb25cbiAgICAgICAgICBjb25zdCBtb3ZlbWVudCA9IGVudGl0eS5nZXRDb21wb25lbnQoTW92ZW1lbnQpO1xuICAgICAgICAgIGlmIChtb3ZlbWVudCkge1xuICAgICAgICAgICAgbW92ZW1lbnQudmVsb2NpdHkuc2V0KDAsIDAsIDApOyAvLyBDbGVhciBhbnkgdmVsb2NpdHkgZnJvbSBjb2xsaXNpb24gcmVzb2x1dGlvblxuICAgICAgICAgICAgbW92ZW1lbnQuYWNjZWxlcmF0aW9uLnNldCgwLCAwLCAwKTsgLy8gQ2xlYXIgYWNjZWxlcmF0aW9uXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVwZGF0ZSBoZWFsdGhcbiAgICAgICAgICBjb25zdCBoZWFsdGggPSBlbnRpdHkuZ2V0Q29tcG9uZW50KEhlYWx0aCk7XG4gICAgICAgICAgaWYgKGhlYWx0aCkge1xuICAgICAgICAgICAgaGVhbHRoLm1heEhlYWx0aCA9IHNlcnZlclBsYXllci5tYXhIZWFsdGg7XG4gICAgICAgICAgICBoZWFsdGguY3VycmVudEhlYWx0aCA9IHNlcnZlclBsYXllci5oZWFsdGg7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIENvdWxkIG5vdCBmaW5kIGxvY2FsIEVDUyBlbnRpdHkgJHtlbnRpdHlJZH0gZm9yIFBWUCBwbGF5ZXIgJHtwbGF5ZXJJZH1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENsZWFuIHVwIGxvY2FsIGVudGl0aWVzIGZvciBwbGF5ZXJzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0XG4gICAgY29uc3QgY3VycmVudFBsYXllcklkcyA9IG5ldyBTZXQocGxheWVycy5rZXlzKCkpO1xuICAgIGNvbnN0IGVudGl0aWVzVG9SZW1vdmU6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgc2VydmVyUGxheWVyRW50aXRpZXMuY3VycmVudC5mb3JFYWNoKChlbnRpdHlJZCwgcGxheWVySWQpID0+IHtcbiAgICAgIGlmICghY3VycmVudFBsYXllcklkcy5oYXMocGxheWVySWQpIHx8IHBsYXllcklkID09PSBzb2NrZXQ/LmlkKSB7XG4gICAgICAgIGNvbnN0IGVudGl0eSA9IHdvcmxkLmdldEVudGl0eShlbnRpdHlJZCk7XG4gICAgICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgICAvLyBNYXJrIGVudGl0eSBhcyBkZWFkIGluc3RlYWQgb2YgcmVtb3ZpbmdcbiAgICAgICAgICBjb25zdCBoZWFsdGggPSBlbnRpdHkuZ2V0Q29tcG9uZW50KEhlYWx0aCk7XG4gICAgICAgICAgaWYgKGhlYWx0aCkge1xuICAgICAgICAgICAgaGVhbHRoLmN1cnJlbnRIZWFsdGggPSAwO1xuICAgICAgICAgICAgaGVhbHRoLmlzRGVhZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5KAIE1hcmtlZCBsb2NhbCBFQ1MgZW50aXR5ICR7ZW50aXR5SWR9IGFzIGRlYWQgZm9yIGRpc2Nvbm5lY3RlZCBwbGF5ZXIgJHtwbGF5ZXJJZH1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbnRpdGllc1RvUmVtb3ZlLnB1c2gocGxheWVySWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlbW92ZSBmcm9tIG1hcHBpbmdcbiAgICBlbnRpdGllc1RvUmVtb3ZlLmZvckVhY2gocGxheWVySWQgPT4ge1xuICAgICAgc2VydmVyUGxheWVyRW50aXRpZXMuY3VycmVudC5kZWxldGUocGxheWVySWQpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENyZWF0ZSBsb2NhbCBFQ1MgZW50aXRpZXMgZm9yIHRvd2Vyc1xuICAgIHRvd2Vycy5mb3JFYWNoKChzZXJ2ZXJUb3dlciwgdG93ZXJJZCkgPT4ge1xuICAgICAgaWYgKCFzZXJ2ZXJUb3dlckVudGl0aWVzLmN1cnJlbnQuaGFzKHRvd2VySWQpKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBsb2NhbCBFQ1MgZW50aXR5IGZvciB0aGlzIHNlcnZlciB0b3dlclxuICAgICAgICBjb25zdCBlbnRpdHkgPSB3b3JsZC5jcmVhdGVFbnRpdHkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBUcmFuc2Zvcm0gY29tcG9uZW50XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHdvcmxkLmNyZWF0ZUNvbXBvbmVudChUcmFuc2Zvcm0pO1xuICAgICAgICB0cmFuc2Zvcm0uc2V0UG9zaXRpb24oc2VydmVyVG93ZXIucG9zaXRpb24ueCwgc2VydmVyVG93ZXIucG9zaXRpb24ueSwgc2VydmVyVG93ZXIucG9zaXRpb24ueik7XG4gICAgICAgIGVudGl0eS5hZGRDb21wb25lbnQodHJhbnNmb3JtKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBUb3dlciBjb21wb25lbnRcbiAgICAgICAgY29uc3QgdG93ZXIgPSB3b3JsZC5jcmVhdGVDb21wb25lbnQoVG93ZXIpO1xuICAgICAgICB0b3dlci5vd25lcklkID0gc2VydmVyVG93ZXIub3duZXJJZDtcbiAgICAgICAgdG93ZXIudG93ZXJJbmRleCA9IHNlcnZlclRvd2VyLnRvd2VySW5kZXg7XG4gICAgICAgIGVudGl0eS5hZGRDb21wb25lbnQodG93ZXIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIEhlYWx0aCBjb21wb25lbnRcbiAgICAgICAgY29uc3QgaGVhbHRoID0gbmV3IEhlYWx0aChzZXJ2ZXJUb3dlci5tYXhIZWFsdGgpO1xuICAgICAgICBoZWFsdGguY3VycmVudEhlYWx0aCA9IHNlcnZlclRvd2VyLmhlYWx0aDtcbiAgICAgICAgZW50aXR5LmFkZENvbXBvbmVudChoZWFsdGgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIENvbGxpZGVyIGNvbXBvbmVudCBmb3IgdG93ZXIgZGFtYWdlIGRldGVjdGlvblxuICAgICAgICBjb25zdCBjb2xsaWRlciA9IHdvcmxkLmNyZWF0ZUNvbXBvbmVudChDb2xsaWRlcik7XG4gICAgICAgIGNvbGxpZGVyLnR5cGUgPSBDb2xsaWRlclR5cGUuQ1lMSU5ERVI7XG4gICAgICAgIGNvbGxpZGVyLnJhZGl1cyA9IDEuNTsgLy8gVG93ZXIgYmFzZSByYWRpdXNcbiAgICAgICAgY29sbGlkZXIuaGVpZ2h0ID0gNDsgLy8gVG93ZXIgaGVpZ2h0XG4gICAgICAgIGNvbGxpZGVyLmxheWVyID0gQ29sbGlzaW9uTGF5ZXIuRU5FTVk7IC8vIFVzZSBlbmVteSBsYXllciBzbyBwcm9qZWN0aWxlcyBjYW4gaGl0IHRvd2Vyc1xuICAgICAgICBjb2xsaWRlci5zZXRNYXNrKENvbGxpc2lvbkxheWVyLkVOVklST05NRU5UIHwgQ29sbGlzaW9uTGF5ZXIuUExBWUVSKTtcbiAgICAgICAgY29sbGlkZXIuc2V0T2Zmc2V0KDAsIDIsIDApOyAvLyBDZW50ZXIgdmVydGljYWxseVxuICAgICAgICBlbnRpdHkuYWRkQ29tcG9uZW50KGNvbGxpZGVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE5vdGlmeSBzeXN0ZW1zIHRoYXQgdGhlIGVudGl0eSBpcyByZWFkeVxuICAgICAgICB3b3JsZC5ub3RpZnlFbnRpdHlBZGRlZChlbnRpdHkpO1xuICAgICAgICBcbiAgICAgICAgLy8gU3RvcmUgdGhlIG1hcHBpbmdcbiAgICAgICAgc2VydmVyVG93ZXJFbnRpdGllcy5jdXJyZW50LnNldCh0b3dlcklkLCBlbnRpdHkuaWQpO1xuICAgICAgICBcbiAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgbG9jYWwgRUNTIGVudGl0eVxuICAgICAgICBjb25zdCBlbnRpdHlJZCA9IHNlcnZlclRvd2VyRW50aXRpZXMuY3VycmVudC5nZXQodG93ZXJJZCkhO1xuICAgICAgICBjb25zdCBlbnRpdHkgPSB3b3JsZC5nZXRFbnRpdHkoZW50aXR5SWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVudGl0eSkge1xuICAgICAgICAgIC8vIFVwZGF0ZSBoZWFsdGhcbiAgICAgICAgICBjb25zdCBoZWFsdGggPSBlbnRpdHkuZ2V0Q29tcG9uZW50KEhlYWx0aCk7XG4gICAgICAgICAgaWYgKGhlYWx0aCkge1xuICAgICAgICAgICAgaGVhbHRoLm1heEhlYWx0aCA9IHNlcnZlclRvd2VyLm1heEhlYWx0aDtcbiAgICAgICAgICAgIGhlYWx0aC5jdXJyZW50SGVhbHRoID0gc2VydmVyVG93ZXIuaGVhbHRoO1xuICAgICAgICAgICAgaWYgKHNlcnZlclRvd2VyLmlzRGVhZCAmJiAhaGVhbHRoLmlzRGVhZCkge1xuICAgICAgICAgICAgICBoZWFsdGguY3VycmVudEhlYWx0aCA9IDA7XG4gICAgICAgICAgICAgIGhlYWx0aC5pc0RlYWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgdG93ZXIgc3RhdGVcbiAgICAgICAgICBjb25zdCB0b3dlciA9IGVudGl0eS5nZXRDb21wb25lbnQoVG93ZXIpO1xuICAgICAgICAgIGlmICh0b3dlciAmJiBzZXJ2ZXJUb3dlci5pc0RlYWQgJiYgIXRvd2VyLmlzRGVhZCkge1xuICAgICAgICAgICAgdG93ZXIuZGllKERhdGUubm93KCkgLyAxMDAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gQ291bGQgbm90IGZpbmQgbG9jYWwgRUNTIGVudGl0eSAke2VudGl0eUlkfSBmb3IgdG93ZXIgJHt0b3dlcklkfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgbG9jYWwgZW50aXRpZXMgZm9yIHRvd2VycyB0aGF0IG5vIGxvbmdlciBleGlzdFxuICAgIGNvbnN0IGN1cnJlbnRUb3dlcklkcyA9IG5ldyBTZXQodG93ZXJzLmtleXMoKSk7XG4gICAgY29uc3QgdG93ZXJFbnRpdGllc1RvUmVtb3ZlOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIHNlcnZlclRvd2VyRW50aXRpZXMuY3VycmVudC5mb3JFYWNoKChlbnRpdHlJZCwgdG93ZXJJZCkgPT4ge1xuICAgICAgaWYgKCFjdXJyZW50VG93ZXJJZHMuaGFzKHRvd2VySWQpKSB7XG4gICAgICAgIGNvbnN0IGVudGl0eSA9IHdvcmxkLmdldEVudGl0eShlbnRpdHlJZCk7XG4gICAgICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgICAvLyBNYXJrIGVudGl0eSBhcyBkZWFkIGluc3RlYWQgb2YgcmVtb3ZpbmdcbiAgICAgICAgICBjb25zdCBoZWFsdGggPSBlbnRpdHkuZ2V0Q29tcG9uZW50KEhlYWx0aCk7XG4gICAgICAgICAgY29uc3QgdG93ZXIgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFRvd2VyKTtcbiAgICAgICAgICBpZiAoaGVhbHRoICYmIHRvd2VyKSB7XG4gICAgICAgICAgICBoZWFsdGguY3VycmVudEhlYWx0aCA9IDA7XG4gICAgICAgICAgICBoZWFsdGguaXNEZWFkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRvd2VyLmRpZShEYXRlLm5vdygpIC8gMTAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5KAIE1hcmtlZCBsb2NhbCBFQ1MgZW50aXR5ICR7ZW50aXR5SWR9IGFzIGRlYWQgZm9yIHJlbW92ZWQgdG93ZXIgJHt0b3dlcklkfWApO1xuICAgICAgICB9XG4gICAgICAgIHRvd2VyRW50aXRpZXNUb1JlbW92ZS5wdXNoKHRvd2VySWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlbW92ZSBmcm9tIG1hcHBpbmdcbiAgICB0b3dlckVudGl0aWVzVG9SZW1vdmUuZm9yRWFjaCh0b3dlcklkID0+IHtcbiAgICAgIHNlcnZlclRvd2VyRW50aXRpZXMuY3VycmVudC5kZWxldGUodG93ZXJJZCk7XG4gICAgfSk7XG4gIH0sIFtwbGF5ZXJzLCB0b3dlcnMsIGdhbWVTdGFydGVkLCBzb2NrZXQ/LmlkXSk7XG5cbiAgLy8gVXBkYXRlIHRvd2VyIHN5c3RlbSBwbGF5ZXIgbWFwcGluZyB3aGVuIHBsYXllcnMgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHRvd2VyU3lzdGVtUmVmLmN1cnJlbnQgJiYgc29ja2V0Py5pZCkge1xuICAgICAgdG93ZXJTeXN0ZW1SZWYuY3VycmVudC5zZXRQbGF5ZXJNYXBwaW5nKHNlcnZlclBsYXllckVudGl0aWVzLmN1cnJlbnQsIHNvY2tldC5pZCk7XG4gICAgfVxuICB9LCBbcGxheWVycywgc29ja2V0Py5pZF0pO1xuXG4gIC8vIEluaXRpYWxpemUgdGhlIFBWUCBnYW1lIGVuZ2luZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0luaXRpYWxpemVkLmN1cnJlbnQgfHwgIWdhbWVTdGFydGVkKSByZXR1cm47XG4gICAgaXNJbml0aWFsaXplZC5jdXJyZW50ID0gdHJ1ZTtcblxuXG4gICAgLy8gSW5pdGlhbGl6ZSBkYW1hZ2Ugc3lzdGVtIHdpdGggc29tZSB0ZXN0IHJ1bmVzIGZvciBkZW1vbnN0cmF0aW9uXG4gICAgc2V0R2xvYmFsQ3JpdGljYWxSdW5lQ291bnQoMCk7IC8vIDExJSArICgyICogMyUpID0gMTclIGNyaXQgY2hhbmNlXG4gICAgc2V0R2xvYmFsQ3JpdERhbWFnZVJ1bmVDb3VudCgwKTsgLy8gMi4wICsgKDEgKiAwLjE1KSA9IDIuMTV4IGNyaXQgZGFtYWdlXG4gICAgXG4gICAgLy8gQ3JlYXRlIGVuZ2luZVxuICAgIGNvbnN0IGVuZ2luZSA9IG5ldyBFbmdpbmUoeyBlbmFibGVEZWJ1ZzogdHJ1ZSB9KTtcbiAgICBlbmdpbmVSZWYuY3VycmVudCA9IGVuZ2luZTtcblxuICAgIC8vIEluaXRpYWxpemUgd2l0aCBjYW52YXNcbiAgICBjb25zdCBjYW52YXMgPSBnbC5kb21FbGVtZW50O1xuICAgIGVuZ2luZS5pbml0aWFsaXplKGNhbnZhcykudGhlbigoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgYSBQVlAgZGFtYWdlIGNhbGxiYWNrIHRoYXQgbWFwcyBsb2NhbCBFQ1MgZW50aXR5IElEcyBiYWNrIHRvIHNlcnZlciBwbGF5ZXIgSURzXG4gICAgICBjb25zdCBkYW1hZ2VQbGF5ZXJXaXRoTWFwcGluZyA9IChlbnRpdHlJZDogc3RyaW5nLCBkYW1hZ2U6IG51bWJlcikgPT4ge1xuICAgICAgICAvLyBGaW5kIHRoZSBzZXJ2ZXIgcGxheWVyIElEIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhpcyBsb2NhbCBFQ1MgZW50aXR5IElEXG4gICAgICAgIGNvbnN0IG51bWVyaWNFbnRpdHlJZCA9IHBhcnNlSW50KGVudGl0eUlkKTtcbiAgICAgICAgbGV0IHNlcnZlclBsYXllcklkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHNlcnZlclBsYXllckVudGl0aWVzLmN1cnJlbnQuZm9yRWFjaCgobG9jYWxFbnRpdHlJZCwgcGxheWVySWQpID0+IHtcbiAgICAgICAgICBpZiAobG9jYWxFbnRpdHlJZCA9PT0gbnVtZXJpY0VudGl0eUlkKSB7XG4gICAgICAgICAgICBzZXJ2ZXJQbGF5ZXJJZCA9IHBsYXllcklkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VydmVyUGxheWVySWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBNYXBwaW5nIGxvY2FsIGVudGl0eSAke2VudGl0eUlkfSB0byBzZXJ2ZXIgcGxheWVyICR7c2VydmVyUGxheWVySWR9IGZvciAke2RhbWFnZX0gUFZQIGRhbWFnZWApO1xuICAgICAgICAgIGJyb2FkY2FzdFBsYXllckRhbWFnZShzZXJ2ZXJQbGF5ZXJJZCwgZGFtYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBDb3VsZCBub3QgZmluZCBzZXJ2ZXIgcGxheWVyIElEIGZvciBsb2NhbCBlbnRpdHkgJHtlbnRpdHlJZH1gKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBwbGF5ZXIsIGNvbnRyb2xTeXN0ZW0sIHRvd2VyU3lzdGVtLCBzdW1tb25lZFVuaXRTeXN0ZW0gfSA9IHNldHVwUFZQR2FtZShlbmdpbmUsIHNjZW5lLCBjYW1lcmEgYXMgUGVyc3BlY3RpdmVDYW1lcmEsIGdsLCBkYW1hZ2VQbGF5ZXJXaXRoTWFwcGluZywgZGFtYWdlVG93ZXIpO1xuICAgICAgY29uc29sZS5sb2coJ/Cfjq4gUFZQIFBsYXllciBlbnRpdHkgY3JlYXRlZDonLCBwbGF5ZXIsICdJRDonLCBwbGF5ZXIuaWQpO1xuICAgICAgc2V0UGxheWVyRW50aXR5KHBsYXllcik7XG4gICAgICBwbGF5ZXJFbnRpdHlSZWYuY3VycmVudCA9IHBsYXllci5pZDtcbiAgICAgIGNvbnRyb2xTeXN0ZW1SZWYuY3VycmVudCA9IGNvbnRyb2xTeXN0ZW07XG4gICAgICB0b3dlclN5c3RlbVJlZi5jdXJyZW50ID0gdG93ZXJTeXN0ZW07XG4gICAgICBzdW1tb25lZFVuaXRTeXN0ZW1SZWYuY3VycmVudCA9IHN1bW1vbmVkVW5pdFN5c3RlbTtcbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIHRvd2VyIHN5c3RlbSB3aXRoIHBsYXllciBtYXBwaW5nXG4gICAgICBpZiAodG93ZXJTeXN0ZW0gJiYgc29ja2V0Py5pZCkge1xuICAgICAgICB0b3dlclN5c3RlbS5zZXRQbGF5ZXJNYXBwaW5nKHNlcnZlclBsYXllckVudGl0aWVzLmN1cnJlbnQsIHNvY2tldC5pZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCB1cCB3YXZlIGNvbXBsZXRpb24gY2FsbGJhY2sgZm9yIGV4cGVyaWVuY2UgYXdhcmRpbmdcbiAgICAgIGlmIChzdW1tb25lZFVuaXRTeXN0ZW0pIHtcbiAgICAgICAgc3VtbW9uZWRVbml0U3lzdGVtLnNldFdhdmVDb21wbGV0ZUNhbGxiYWNrKGhhbmRsZVdhdmVDb21wbGV0ZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFBhc3MgY29udHJvbFN5c3RlbSBiYWNrIHRvIHBhcmVudFxuICAgICAgaWYgKG9uQ29udHJvbFN5c3RlbVVwZGF0ZSkge1xuICAgICAgICBvbkNvbnRyb2xTeXN0ZW1VcGRhdGUoY29udHJvbFN5c3RlbSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBQVlAgY2FsbGJhY2tzIChBRlRFUiBwbGF5ZXJFbnRpdHkgaXMgc2V0KVxuICAgICAgY29udHJvbFN5c3RlbS5zZXRCb3dSZWxlYXNlQ2FsbGJhY2soKGZpbmFsUHJvZ3Jlc3MsIGlzUGVyZmVjdFNob3QpID0+IHtcbiAgICAgICAgXG4gICAgICAgIC8vIEJyb2FkY2FzdCBhdHRhY2sgdG8gb3RoZXIgcGxheWVyc1xuICAgICAgICBpZiAocGxheWVyRW50aXR5KSB7XG4gICAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gcGxheWVyRW50aXR5LmdldENvbXBvbmVudChUcmFuc2Zvcm0pO1xuICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgICAgICBjYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGRpcmVjdGlvbi5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYnJvYWRjYXN0UGxheWVyQXR0YWNrKCdib3dfcmVsZWFzZScsIHRyYW5zZm9ybS5wb3NpdGlvbiwgZGlyZWN0aW9uLCB7XG4gICAgICAgICAgICAgIGNoYXJnZVByb2dyZXNzOiBmaW5hbFByb2dyZXNzLFxuICAgICAgICAgICAgICBpc1BlcmZlY3RTaG90OiBpc1BlcmZlY3RTaG90XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFRyaWdnZXIgcGVyZmVjdCBzaG90IHZpc3VhbCBlZmZlY3QgaWYgaXQgd2FzIGEgcGVyZmVjdCBzaG90XG4gICAgICAgIGlmIChpc1BlcmZlY3RTaG90KSB7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IGN1cnJlbnQgcGxheWVyIHBvc2l0aW9uIGZyb20gdGhlIGVuZ2luZVxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRQbGF5ZXJFbnRpdHkgPSBlbmdpbmUuZ2V0V29ybGQoKS5nZXRFbnRpdHkocGxheWVyRW50aXR5UmVmLmN1cnJlbnQhKTtcbiAgICAgICAgICBpZiAoY3VycmVudFBsYXllckVudGl0eSkge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gY3VycmVudFBsYXllckVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgLy8gR2V0IGNhbWVyYSBkaXJlY3Rpb24gZm9yIGVmZmVjdCBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgY2FtZXJhLmdldFdvcmxkRGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgIGRpcmVjdGlvbi5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEFwcGx5IHNhbWUgZG93bndhcmQgY29tcGVuc2F0aW9uIGFzIHByb2plY3RpbGUgc3lzdGVtXG4gICAgICAgICAgICAgIGNvbnN0IGNvbXBlbnNhdGlvbkFuZ2xlID0gTWF0aC5QSSAvIDEyOyAvLyAzMCBkZWdyZWVzXG4gICAgICAgICAgICAgIGNvbnN0IGNhbWVyYVJpZ2h0ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgY2FtZXJhUmlnaHQuY3Jvc3NWZWN0b3JzKGRpcmVjdGlvbiwgbmV3IFZlY3RvcjMoMCwgMSwgMCkpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgICBjb25zdCByb3RhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgICAgICAgIHJvdGF0aW9uTWF0cml4Lm1ha2VSb3RhdGlvbkF4aXMoY2FtZXJhUmlnaHQsIGNvbXBlbnNhdGlvbkFuZ2xlKTtcbiAgICAgICAgICAgICAgZGlyZWN0aW9uLmFwcGx5TWF0cml4NChyb3RhdGlvbk1hdHJpeCk7XG4gICAgICAgICAgICAgIGRpcmVjdGlvbi5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENyZWF0ZSBwZXJmZWN0IHNob3QgZWZmZWN0XG4gICAgICAgICAgICAgIGNvbnN0IGVmZmVjdElkID0gY3JlYXRlUG93ZXJzaG90RWZmZWN0KFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybS5wb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICBjb250cm9sU3lzdGVtLmdldEN1cnJlbnRTdWJjbGFzcygpLFxuICAgICAgICAgICAgICAgIHRydWUsIC8vIGlzUGVyZmVjdFNob3RcbiAgICAgICAgICAgICAgICB0cnVlICAvLyBpc0VsZW1lbnRhbFNob3RzVW5sb2NrZWQgLSBmb3Igbm93IGFzc3VtZSB1bmxvY2tlZFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBEaXZpbmUgU3Rvcm0gY2FsbGJhY2tcbiAgICAgIGNvbnRyb2xTeXN0ZW0uc2V0RGl2aW5lU3Rvcm1DYWxsYmFjaygocG9zaXRpb24sIGRpcmVjdGlvbiwgZHVyYXRpb24pID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoSBQVlAgRGl2aW5lIFN0b3JtIGFjdGl2YXRlZCAtIGJyb2FkY2FzdGluZyB0byBvdGhlciBwbGF5ZXJzJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBUcmlnZ2VyIGxvY2FsIHZpc3VhbCBlZmZlY3QgaW1tZWRpYXRlbHkgd2l0aCBjb3JyZWN0IGR1cmF0aW9uXG4gICAgICAgIHRyaWdnZXJHbG9iYWxEaXZpbmVTdG9ybShwb3NpdGlvbiwgc29ja2V0Py5pZCwgZHVyYXRpb24pO1xuICAgICAgICBcbiAgICAgICAgLy8gQnJvYWRjYXN0IHRvIG90aGVyIHBsYXllcnMgd2l0aCBkdXJhdGlvbiBpbmZvXG4gICAgICAgIGJyb2FkY2FzdFBsYXllckFiaWxpdHkoJ2RpdmluZV9zdG9ybScsIHBvc2l0aW9uLCBkaXJlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBWaXBlciBTdGluZyBjYWxsYmFja1xuICAgICAgY29udHJvbFN5c3RlbS5zZXRWaXBlclN0aW5nQ2FsbGJhY2soKHBvc2l0aW9uLCBkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgYnJvYWRjYXN0UGxheWVyQWJpbGl0eSgndmlwZXJfc3RpbmcnLCBwb3NpdGlvbiwgZGlyZWN0aW9uKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTZXQgdXAgQmFycmFnZSBjYWxsYmFja1xuICAgICAgY29udHJvbFN5c3RlbS5zZXRCYXJyYWdlQ2FsbGJhY2soKHBvc2l0aW9uLCBkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgYnJvYWRjYXN0UGxheWVyQWJpbGl0eSgnYmFycmFnZScsIHBvc2l0aW9uLCBkaXJlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBGcm9zdCBOb3ZhIGNhbGxiYWNrXG4gICAgICBjb250cm9sU3lzdGVtLnNldEZyb3N0Tm92YUNhbGxiYWNrKChwb3NpdGlvbiwgZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgIGJyb2FkY2FzdFBsYXllckFiaWxpdHkoJ2Zyb3N0X25vdmEnLCBwb3NpdGlvbiwgZGlyZWN0aW9uKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTZXQgdXAgQ29icmEgU2hvdCBjYWxsYmFjayAoZm9yIGxvY2FsIHZpc3VhbCBlZmZlY3RzIG9ubHkgLSBwcm9qZWN0aWxlIGlzIGhhbmRsZWQgdmlhIG9uUHJvamVjdGlsZUNyZWF0ZWRDYWxsYmFjaylcbiAgICAgIGNvbnRyb2xTeXN0ZW0uc2V0Q29icmFTaG90Q2FsbGJhY2soKHBvc2l0aW9uLCBkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgLy8gRG9uJ3QgYnJvYWRjYXN0IGFzIGFiaWxpdHkgLSB0aGUgcHJvamVjdGlsZSBpcyBhbHJlYWR5IGJyb2FkY2FzdCB2aWEgb25Qcm9qZWN0aWxlQ3JlYXRlZENhbGxiYWNrXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIENoYXJnZSBjYWxsYmFja1xuICAgICAgY29udHJvbFN5c3RlbS5zZXRDaGFyZ2VDYWxsYmFjaygocG9zaXRpb24sIGRpcmVjdGlvbikgPT4ge1xuICAgICAgICAvLyBCcm9hZGNhc3QgYXMgYWJpbGl0eSBmb3Igc3RhdGUgbWFuYWdlbWVudFxuICAgICAgICBicm9hZGNhc3RQbGF5ZXJBYmlsaXR5KCdjaGFyZ2UnLCBwb3NpdGlvbiwgZGlyZWN0aW9uKTtcbiAgICAgICAgLy8gQWxzbyBicm9hZGNhc3QgYXMgYXR0YWNrIGZvciBhbmltYXRpb25cbiAgICAgICAgYnJvYWRjYXN0UGxheWVyQXR0YWNrKCdzd29yZF9jaGFyZ2Vfc3RhcnQnLCBwb3NpdGlvbiwgZGlyZWN0aW9uLCB7XG4gICAgICAgICAgaXNTd29yZENoYXJnaW5nOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBcbiAgIFxuICAgICAgXG4gICAgICAvLyBTZXQgdXAgU2t5ZmFsbCBjYWxsYmFja1xuICAgICAgY29udHJvbFN5c3RlbS5zZXRTa3lmYWxsQ2FsbGJhY2soKHBvc2l0aW9uLCBkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfjJ8gUFZQIFNreWZhbGwgdHJpZ2dlcmVkIC0gYnJvYWRjYXN0aW5nIHRvIG90aGVyIHBsYXllcnMnKTtcbiAgICAgICAgYnJvYWRjYXN0UGxheWVyQWJpbGl0eSgnc2t5ZmFsbCcsIHBvc2l0aW9uLCBkaXJlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBCYWNrc3RhYiBjYWxsYmFja1xuICAgICAgY29udHJvbFN5c3RlbS5zZXRCYWNrc3RhYkNhbGxiYWNrKChwb3NpdGlvbiwgZGlyZWN0aW9uLCBkYW1hZ2UsIGlzQmFja3N0YWIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYPCfl6HvuI8gUFZQIEJhY2tzdGFiIHRyaWdnZXJlZCAtIGJyb2FkY2FzdGluZyB0byBvdGhlciBwbGF5ZXJzIChkYW1hZ2U6ICR7ZGFtYWdlfSwgYmFja3N0YWI6ICR7aXNCYWNrc3RhYn0pYCk7XG4gICAgICAgIGJyb2FkY2FzdFBsYXllckFiaWxpdHkoJ2JhY2tzdGFiJywgcG9zaXRpb24sIGRpcmVjdGlvbik7XG4gICAgICAgIC8vIE5vdGU6IEFuaW1hdGlvbiBzdGF0ZSBpcyBub3cgYnJvYWRjYXN0ZWQgYXV0b21hdGljYWxseSBpbiB0aGUgZ2FtZSBsb29wXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIFN1bmRlciBjYWxsYmFja1xuICAgICAgY29udHJvbFN5c3RlbS5zZXRTdW5kZXJDYWxsYmFjaygocG9zaXRpb24sIGRpcmVjdGlvbiwgZGFtYWdlLCBzdGFja0NvdW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDimpTvuI8gUFZQIFN1bmRlciB0cmlnZ2VyZWQgLSBicm9hZGNhc3RpbmcgdG8gb3RoZXIgcGxheWVycyAoZGFtYWdlOiAke2RhbWFnZX0sIHN0YWNrczogJHtzdGFja0NvdW50fSlgKTtcbiAgICAgICAgYnJvYWRjYXN0UGxheWVyQWJpbGl0eSgnc3VuZGVyJywgcG9zaXRpb24sIGRpcmVjdGlvbik7XG4gICAgICAgIC8vIE5vdGU6IEFuaW1hdGlvbiBzdGF0ZSBpcyBub3cgYnJvYWRjYXN0ZWQgYXV0b21hdGljYWxseSBpbiB0aGUgZ2FtZSBsb29wXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIERlYnVmZiBjYWxsYmFjayBmb3IgYnJvYWRjYXN0aW5nIGZyZWV6ZS9zbG93IGVmZmVjdHNcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SnIERlYnVnOiBTZXR0aW5nIHVwIGRlYnVmZiBjYWxsYmFjayBmb3IgQ29udHJvbFN5c3RlbWApO1xuICAgICAgY29udHJvbFN5c3RlbS5zZXREZWJ1ZmZDYWxsYmFjaygodGFyZ2V0RW50aXR5SWQ6IG51bWJlciwgZGVidWZmVHlwZTogJ2Zyb3plbicgfCAnc2xvd2VkJyB8ICdzdHVubmVkJywgZHVyYXRpb246IG51bWJlciwgcG9zaXRpb246IFZlY3RvcjMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYPCfjq8gUFZQIERlYnVmZiBjYWxsYmFjayB0cmlnZ2VyZWQgLSAke2RlYnVmZlR5cGV9IGVmZmVjdCBvbiBlbnRpdHkgJHt0YXJnZXRFbnRpdHlJZH1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZpbmQgdGhlIHNlcnZlciBwbGF5ZXIgSUQgdGhhdCBjb3JyZXNwb25kcyB0byB0aGlzIGxvY2FsIEVDUyBlbnRpdHkgSURcbiAgICAgICAgbGV0IHRhcmdldFBsYXllcklkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgICAgc2VydmVyUGxheWVyRW50aXRpZXMuY3VycmVudC5mb3JFYWNoKChsb2NhbEVudGl0eUlkLCBwbGF5ZXJJZCkgPT4ge1xuICAgICAgICAgIGlmIChsb2NhbEVudGl0eUlkID09PSB0YXJnZXRFbnRpdHlJZCkge1xuICAgICAgICAgICAgdGFyZ2V0UGxheWVySWQgPSBwbGF5ZXJJZDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRhcmdldFBsYXllcklkICYmIGJyb2FkY2FzdFBsYXllckRlYnVmZikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn46vIEJyb2FkY2FzdGluZyAke2RlYnVmZlR5cGV9IGVmZmVjdCB0byBwbGF5ZXIgJHt0YXJnZXRQbGF5ZXJJZH1gKTtcbiAgICAgICAgICBicm9hZGNhc3RQbGF5ZXJEZWJ1ZmYodGFyZ2V0UGxheWVySWQsIGRlYnVmZlR5cGUsIGR1cmF0aW9uLCB7XG4gICAgICAgICAgICBwb3NpdGlvbjogeyB4OiBwb3NpdGlvbi54LCB5OiBwb3NpdGlvbi55LCB6OiBwb3NpdGlvbi56IH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBDb3VsZCBub3QgZmluZCBzZXJ2ZXIgcGxheWVyIElEIGZvciBsb2NhbCBlbnRpdHkgJHt0YXJnZXRFbnRpdHlJZH1gKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBwcm9qZWN0aWxlIGNyZWF0aW9uIGNhbGxiYWNrXG4gICAgICBjb250cm9sU3lzdGVtLnNldFByb2plY3RpbGVDcmVhdGVkQ2FsbGJhY2soKHByb2plY3RpbGVUeXBlLCBwb3NpdGlvbiwgZGlyZWN0aW9uLCBjb25maWcpID0+IHtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uRGF0YTogYW55ID0ge307XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY2hhcmdlIHByb2dyZXNzIGZvciBib3cgcHJvamVjdGlsZXNcbiAgICAgICAgaWYgKHByb2plY3RpbGVUeXBlLmluY2x1ZGVzKCdhcnJvdycpIHx8IHByb2plY3RpbGVUeXBlLmluY2x1ZGVzKCdib2x0JykpIHtcbiAgICAgICAgICBhbmltYXRpb25EYXRhLmNoYXJnZVByb2dyZXNzID0gY29udHJvbFN5c3RlbS5nZXRDaGFyZ2VQcm9ncmVzcygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBicm9hZGNhc3RQbGF5ZXJBdHRhY2socHJvamVjdGlsZVR5cGUsIHBvc2l0aW9uLCBkaXJlY3Rpb24sIGFuaW1hdGlvbkRhdGEpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBSZWFuaW1hdGUgY2FsbGJhY2tcbiAgICAgIGNvbnRyb2xTeXN0ZW0uc2V0UmVhbmltYXRlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBpZiAocmVhbmltYXRlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICByZWFuaW1hdGVSZWYuY3VycmVudC50cmlnZ2VySGVhbGluZ0VmZmVjdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQnJvYWRjYXN0IFJlYW5pbWF0ZSBhYmlsaXR5IHRvIG90aGVyIHBsYXllcnNcblxuICAgICAgICBpZiAocGxheWVyKSB7XG4gICAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gcGxheWVyLmdldENvbXBvbmVudChUcmFuc2Zvcm0pO1xuICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgICAgICBjYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGRpcmVjdGlvbi5ub3JtYWxpemUoKTtcblxuICAgICAgICAgICAgYnJvYWRjYXN0UGxheWVyQWJpbGl0eSgncmVhbmltYXRlJywgdHJhbnNmb3JtLnBvc2l0aW9uLCBkaXJlY3Rpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNldCB1cCBTbWl0ZSBjYWxsYmFja1xuICAgICAgY29udHJvbFN5c3RlbS5zZXRTbWl0ZUNhbGxiYWNrKChwb3NpdGlvbjogVmVjdG9yMywgZGlyZWN0aW9uOiBWZWN0b3IzLCBvbkRhbWFnZURlYWx0PzogKGRhbWFnZURlYWx0OiBib29sZWFuKSA9PiB2b2lkKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIERFQlVHOiBTbWl0ZSBjYWxsYmFjayB0cmlnZ2VyZWQgaW4gUFZQIG1vZGUnKTtcbiAgICAgICAgLy8gQ3JlYXRlIGxvY2FsIFNtaXRlIGVmZmVjdFxuICAgICAgICBjcmVhdGVQdnBTbWl0ZUVmZmVjdChzb2NrZXQ/LmlkIHx8ICcnLCBwb3NpdGlvbiwgb25EYW1hZ2VEZWFsdCk7XG5cbiAgICAgICAgLy8gQnJvYWRjYXN0IFNtaXRlIGFiaWxpdHkgdG8gb3RoZXIgcGxheWVyc1xuICAgICAgICBicm9hZGNhc3RQbGF5ZXJBYmlsaXR5KCdzbWl0ZScsIHBvc2l0aW9uLCBkaXJlY3Rpb24pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNldCB1cCBEZWF0aEdyYXNwIGNhbGxiYWNrXG4gICAgICBjb250cm9sU3lzdGVtLnNldERlYXRoR3Jhc3BDYWxsYmFjaygocG9zaXRpb246IFZlY3RvcjMsIGRpcmVjdGlvbjogVmVjdG9yMykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBERUJVRzogRGVhdGhHcmFzcCBjYWxsYmFjayB0cmlnZ2VyZWQgaW4gUFZQIG1vZGUnKTtcblxuICAgICAgICAvLyBDcmVhdGUgbG9jYWwgRGVhdGhHcmFzcCBwcm9qZWN0aWxlIGVmZmVjdFxuICAgICAgICBjcmVhdGVQdnBEZWF0aEdyYXNwRWZmZWN0KHNvY2tldD8uaWQgfHwgJycsIHBvc2l0aW9uLCBkaXJlY3Rpb24pO1xuXG4gICAgICAgIC8vIEJyb2FkY2FzdCBEZWF0aEdyYXNwIGFiaWxpdHkgdG8gb3RoZXIgcGxheWVyc1xuICAgICAgICBicm9hZGNhc3RQbGF5ZXJBYmlsaXR5KCdkZWF0aGdyYXNwJywgcG9zaXRpb24sIGRpcmVjdGlvbik7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2V0IHVwIG1hbmEgY2FsbGJhY2tzIGZvciBSdW5lYmxhZGVcbiAgICAgIGNvbnRyb2xTeXN0ZW0uc2V0Q29uc3VtZU1hbmFDYWxsYmFjayhjb25zdW1lTWFuYSk7XG4gICAgICBjb250cm9sU3lzdGVtLnNldENoZWNrTWFuYUNhbGxiYWNrKGhhc01hbmEpO1xuXG4gICAgICBlbmdpbmUuc3RhcnQoKTtcbiAgICB9KTtcblxuICAgIC8vIENsZWFudXAgb24gdW5tb3VudFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoZW5naW5lUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZW5naW5lUmVmLmN1cnJlbnQuZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgLy8gQ2xlYXIgYW55IHBlbmRpbmcgYmF0Y2hlZCB1cGRhdGVzXG4gICAgICBwdnBTdGF0ZUJhdGNoZXIuY2xlYXIoKTtcbiAgICB9O1xuICB9LCBbc2NlbmUsIGNhbWVyYSwgZ2wsIGdhbWVTdGFydGVkXSk7XG5cbiAgLy8gRXhwb3NlIFBWUCBwbGF5ZXIgZGF0YSBnbG9iYWxseSBmb3IgQ29udHJvbFN5c3RlbSBhY2Nlc3NcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAod2luZG93IGFzIGFueSkucHZwUGxheWVycyA9IHBsYXllcnM7XG4gICAgKHdpbmRvdyBhcyBhbnkpLmxvY2FsU29ja2V0SWQgPSBzb2NrZXQ/LmlkO1xuICAgICh3aW5kb3cgYXMgYW55KS5zZXJ2ZXJQbGF5ZXJFbnRpdGllcyA9IHNlcnZlclBsYXllckVudGl0aWVzO1xuICAgICh3aW5kb3cgYXMgYW55KS5tdWx0aXBsYXllciA9IHtcbiAgICAgIGJyb2FkY2FzdFBsYXllckVmZmVjdDogYnJvYWRjYXN0UGxheWVyRWZmZWN0XG4gICAgfTtcblxuICAgIC8vIEV4cG9zZSBpbnRlcnBvbGF0aW9uIHN5c3RlbSBmb3IgZGVidWdnaW5nXG4gICAgKHdpbmRvdyBhcyBhbnkpLmdldEludGVycG9sYXRpb25TdGF0cyA9ICgpID0+IHtcbiAgICAgIGlmICghZW5naW5lUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3I6ICdFbmdpbmUgbm90IGluaXRpYWxpemVkJyB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3b3JsZCA9IGVuZ2luZVJlZi5jdXJyZW50LmdldFdvcmxkKCk7XG4gICAgICBjb25zdCBpbnRlcnBvbGF0aW9uU3lzdGVtID0gd29ybGQuZ2V0U3lzdGVtKEludGVycG9sYXRpb25TeXN0ZW0pO1xuXG4gICAgICBpZiAoIWludGVycG9sYXRpb25TeXN0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3I6ICdJbnRlcnBvbGF0aW9uU3lzdGVtIG5vdCBmb3VuZCcgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhdHM6IGFueSA9IHt9O1xuICAgICAgc2VydmVyUGxheWVyRW50aXRpZXMuY3VycmVudC5mb3JFYWNoKChlbnRpdHlJZCwgcGxheWVySWQpID0+IHtcbiAgICAgICAgY29uc3QgZW50aXR5ID0gd29ybGQuZ2V0RW50aXR5KGVudGl0eUlkKTtcbiAgICAgICAgaWYgKGVudGl0eSkge1xuICAgICAgICAgIHN0YXRzW3BsYXllcklkXSA9IGludGVycG9sYXRpb25TeXN0ZW0uZ2V0SW50ZXJwb2xhdGlvblN0YXRzKGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc3RhdHM7XG4gICAgfTtcblxuICAgIC8vIEV4cG9zZSBhZHZhbmNlZCBpbnRlcnBvbGF0aW9uIG1ldGhvZHMgZm9yIHRlc3RpbmdcbiAgICAod2luZG93IGFzIGFueSkudGVzdEludGVycG9sYXRpb25NZXRob2RzID0gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ/Cfp64gQXZhaWxhYmxlIEludGVycG9sYXRpb24gTWV0aG9kczonKTtcbiAgICAgIGNvbnNvbGUubG9nKCcxLiBMaW5lYXIgSW50ZXJwb2xhdGlvbiAoTEVSUCkgLSBDdXJyZW50bHkgdXNlZCcpO1xuICAgICAgY29uc29sZS5sb2coJzIuIEhlcm1pdGUgU3BsaW5lIC0gU21vb3RoZXIgY3VydmVzIHdpdGggdmVsb2NpdHknKTtcbiAgICAgIGNvbnNvbGUubG9nKCczLiBDYXRtdWxsLVJvbSBTcGxpbmUgLSBTbW9vdGggY3VydmVzIHRocm91Z2ggd2F5cG9pbnRzJyk7XG4gICAgICBjb25zb2xlLmxvZygnNC4gQ3ViaWMgQmV6aWVyIC0gQ3VzdG9tIGNvbnRyb2wgcG9pbnQgY3VydmVzJyk7XG4gICAgICBjb25zb2xlLmxvZygnNS4gU21vb3RoIFN0ZXAgLSBFYXNpbmcgZnVuY3Rpb25zJyk7XG4gICAgICBjb25zb2xlLmxvZygnNi4gU21vb3RoZXIgU3RlcCAtIEV2ZW4gc21vb3RoZXIgZWFzaW5nJyk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdcXG7wn5OKIEN1cnJlbnQgSW50ZXJwb2xhdGlvbiBTdGF0czonKTtcbiAgICAgIGNvbnNvbGUubG9nKCh3aW5kb3cgYXMgYW55KS5nZXRJbnRlcnBvbGF0aW9uU3RhdHMoKSk7XG5cbiAgICAgIHJldHVybiAnSW50ZXJwb2xhdGlvbiBtZXRob2RzIGF2YWlsYWJsZSBpbiBJbnRlcnBvbGF0aW9uU3lzdGVtIGNsYXNzJztcbiAgICB9O1xuICB9LCBbcGxheWVycywgc29ja2V0Py5pZF0pO1xuXG4gIC8vIEdhbWUgbG9vcCBpbnRlZ3JhdGlvbiB3aXRoIFJlYWN0IFRocmVlIEZpYmVyXG4gIHVzZUZyYW1lKChzdGF0ZSwgZGVsdGFUaW1lKSA9PiB7XG4gICAgaWYgKGVuZ2luZVJlZi5jdXJyZW50ICYmIGVuZ2luZVJlZi5jdXJyZW50LmlzRW5naW5lUnVubmluZygpICYmIGdhbWVTdGFydGVkKSB7XG4gICAgICAvLyBVcGRhdGUgRlBTIGNvdW50ZXJcbiAgICAgIHVwZGF0ZUZQU0NvdW50ZXIoZW5naW5lUmVmLmN1cnJlbnQuZ2V0Q3VycmVudEZQUygpKTtcbiAgICAgIFxuICAgICAgLy8gUmVzZXQgb2JqZWN0IHBvb2wgdGVtcG9yYXJ5IG9iamVjdHMgZm9yIHRoaXMgZnJhbWVcbiAgICAgIHB2cE9iamVjdFBvb2wucmVzZXRGcmFtZVRlbXBvcmFyaWVzKCk7XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIHN0YXRlIHVwZGF0ZXMgdG8gYmF0Y2ggdGhlbVxuICAgICAgY29uc3Qgc3RhdGVVcGRhdGVzOiBBcnJheTx7XG4gICAgICAgIHNldHRlcjogUmVhY3QuRGlzcGF0Y2g8UmVhY3QuU2V0U3RhdGVBY3Rpb248YW55Pj47XG4gICAgICAgIHZhbHVlOiBhbnk7XG4gICAgICB9PiA9IFtdO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgcGxheWVyIHBvc2l0aW9uIGZvciBkcmFnb24gcmVuZGVyZXJcbiAgICAgIGlmIChwbGF5ZXJFbnRpdHkpIHtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gcGxheWVyRW50aXR5LmdldENvbXBvbmVudChUcmFuc2Zvcm0pO1xuICAgICAgICBpZiAodHJhbnNmb3JtICYmIHRyYW5zZm9ybS5wb3NpdGlvbikge1xuICAgICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gdHJhbnNmb3JtLnBvc2l0aW9uLmNsb25lKCk7XG4gICAgICAgICAgc3RhdGVVcGRhdGVzLnB1c2goe1xuICAgICAgICAgICAgc2V0dGVyOiBzZXRQbGF5ZXJQb3NpdGlvbixcbiAgICAgICAgICAgIHZhbHVlOiBuZXdQb3NpdGlvblxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVwZGF0ZSBWaXBlciBTdGluZyBwYXJlbnQgcmVmIHdpdGggY3VycmVudCBwb3NpdGlvbiBhbmQgY2FtZXJhIHJvdGF0aW9uXG4gICAgICAgICAgdmlwZXJTdGluZ1BhcmVudFJlZi5jdXJyZW50LnBvc2l0aW9uLmNvcHkobmV3UG9zaXRpb24pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENhbGN1bGF0ZSBxdWF0ZXJuaW9uIGZyb20gY2FtZXJhIGRpcmVjdGlvbiBmb3IgVmlwZXIgU3RpbmdcbiAgICAgICAgICBjb25zdCBjYW1lcmFEaXJlY3Rpb24gPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICAgIGNhbWVyYS5nZXRXb3JsZERpcmVjdGlvbihjYW1lcmFEaXJlY3Rpb24pO1xuICAgICAgICAgIGNvbnN0IGNhbWVyYUFuZ2xlID0gTWF0aC5hdGFuMihjYW1lcmFEaXJlY3Rpb24ueCwgY2FtZXJhRGlyZWN0aW9uLnopO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVwZGF0ZSBxdWF0ZXJuaW9uIGZvciBWaXBlciBTdGluZyBkaXJlY3Rpb25cbiAgICAgICAgICB2aXBlclN0aW5nUGFyZW50UmVmLmN1cnJlbnQucXVhdGVybmlvbiA9IHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiBNYXRoLnNpbihjYW1lcmFBbmdsZSAvIDIpLFxuICAgICAgICAgICAgejogMCxcbiAgICAgICAgICAgIHc6IE1hdGguY29zKGNhbWVyYUFuZ2xlIC8gMilcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNlbmQgcG9zaXRpb24gdXBkYXRlcyB0byBvdGhlciBwbGF5ZXJzIHdpdGggY2FtZXJhIHJvdGF0aW9uXG4gICAgICAgICAgY29uc3Qgcm90YXRpb24gPSB7IHg6IDAsIHk6IGNhbWVyYUFuZ2xlLCB6OiAwIH07XG4gICAgICAgICAgdXBkYXRlUGxheWVyUG9zaXRpb24odHJhbnNmb3JtLnBvc2l0aW9uLCByb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHdlYXBvbiBzdGF0ZSBmcm9tIGNvbnRyb2wgc3lzdGVtXG4gICAgICBpZiAoY29udHJvbFN5c3RlbVJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNvbnN0IG5ld1dlYXBvblN0YXRlID0ge1xuICAgICAgICAgIGN1cnJlbnRXZWFwb246IGNvbnRyb2xTeXN0ZW1SZWYuY3VycmVudC5nZXRDdXJyZW50V2VhcG9uKCksXG4gICAgICAgICAgY3VycmVudFN1YmNsYXNzOiBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQuZ2V0Q3VycmVudFN1YmNsYXNzKCksXG4gICAgICAgICAgaXNDaGFyZ2luZzogY29udHJvbFN5c3RlbVJlZi5jdXJyZW50LmlzV2VhcG9uQ2hhcmdpbmcoKSxcbiAgICAgICAgICBjaGFyZ2VQcm9ncmVzczogY29udHJvbFN5c3RlbVJlZi5jdXJyZW50LmdldENoYXJnZVByb2dyZXNzKCksXG4gICAgICAgICAgaXNTd2luZ2luZzogY29udHJvbFN5c3RlbVJlZi5jdXJyZW50LmlzV2VhcG9uU3dpbmdpbmcoKSxcbiAgICAgICAgICBpc1NwaW5uaW5nOiBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQuaXNXZWFwb25DaGFyZ2luZygpICYmIGNvbnRyb2xTeXN0ZW1SZWYuY3VycmVudC5nZXRDdXJyZW50V2VhcG9uKCkgPT09IFdlYXBvblR5cGUuU0NZVEhFLFxuICAgICAgICAgIHN3b3JkQ29tYm9TdGVwOiBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQuZ2V0U3dvcmRDb21ib1N0ZXAoKSxcbiAgICAgICAgICBpc0RpdmluZVN0b3JtaW5nOiBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQuaXNEaXZpbmVTdG9ybUFjdGl2ZSgpLFxuICAgICAgICAgIGlzU3dvcmRDaGFyZ2luZzogY29udHJvbFN5c3RlbVJlZi5jdXJyZW50LmlzQ2hhcmdlQWN0aXZlKCksXG4gICAgICAgICAgaXNEZWZsZWN0aW5nOiBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQuaXNEZWZsZWN0QWN0aXZlKCksXG4gICAgICAgICAgaXNWaXBlclN0aW5nQ2hhcmdpbmc6IGNvbnRyb2xTeXN0ZW1SZWYuY3VycmVudC5pc1ZpcGVyU3RpbmdDaGFyZ2luZ0FjdGl2ZSgpLFxuICAgICAgICAgIHZpcGVyU3RpbmdDaGFyZ2VQcm9ncmVzczogY29udHJvbFN5c3RlbVJlZi5jdXJyZW50LmdldFZpcGVyU3RpbmdDaGFyZ2VQcm9ncmVzcygpLFxuICAgICAgICAgIGlzQmFycmFnZUNoYXJnaW5nOiBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQuaXNCYXJyYWdlQ2hhcmdpbmdBY3RpdmUoKSxcbiAgICAgICAgICBiYXJyYWdlQ2hhcmdlUHJvZ3Jlc3M6IGNvbnRyb2xTeXN0ZW1SZWYuY3VycmVudC5nZXRCYXJyYWdlQ2hhcmdlUHJvZ3Jlc3MoKSxcbiAgICAgICAgICBpc0NvYnJhU2hvdENoYXJnaW5nOiBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQuaXNDb2JyYVNob3RDaGFyZ2luZ0FjdGl2ZSgpLFxuICAgICAgICAgIGNvYnJhU2hvdENoYXJnZVByb2dyZXNzOiBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQuZ2V0Q29icmFTaG90Q2hhcmdlUHJvZ3Jlc3MoKSxcbiAgICAgICAgICBpc1NreWZhbGxpbmc6IGNvbnRyb2xTeXN0ZW1SZWYuY3VycmVudC5pc1NreWZhbGxBY3RpdmUoKSxcbiAgICAgICAgICBpc0JhY2tzdGFiYmluZzogY29udHJvbFN5c3RlbVJlZi5jdXJyZW50LmlzQmFja3N0YWJBY3RpdmUoKSxcbiAgICAgICAgICBpc1N1bmRlcmluZzogY29udHJvbFN5c3RlbVJlZi5jdXJyZW50LmlzU3VuZGVyQWN0aXZlKClcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciB3ZWFwb24gY2hhbmdlcyBhbmQgYnJvYWRjYXN0IHRvIG90aGVyIHBsYXllcnNcbiAgICAgICAgY29uc3QgcHJldldlYXBvbiA9IHByZXZXZWFwb25SZWYuY3VycmVudDtcbiAgICAgICAgaWYgKG5ld1dlYXBvblN0YXRlLmN1cnJlbnRXZWFwb24gIT09IHByZXZXZWFwb24ud2VhcG9uIHx8IFxuICAgICAgICAgICAgbmV3V2VhcG9uU3RhdGUuY3VycmVudFN1YmNsYXNzICE9PSBwcmV2V2VhcG9uLnN1YmNsYXNzKSB7XG4gICAgICAgICAgdXBkYXRlUGxheWVyV2VhcG9uKG5ld1dlYXBvblN0YXRlLmN1cnJlbnRXZWFwb24sIG5ld1dlYXBvblN0YXRlLmN1cnJlbnRTdWJjbGFzcyk7XG4gICAgICAgICAgcHJldldlYXBvblJlZi5jdXJyZW50ID0ge1xuICAgICAgICAgICAgd2VhcG9uOiBuZXdXZWFwb25TdGF0ZS5jdXJyZW50V2VhcG9uLFxuICAgICAgICAgICAgc3ViY2xhc3M6IG5ld1dlYXBvblN0YXRlLmN1cnJlbnRTdWJjbGFzc1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHN0YXRlVXBkYXRlcy5wdXNoKHtcbiAgICAgICAgICBzZXR0ZXI6IHNldFdlYXBvblN0YXRlLFxuICAgICAgICAgIHZhbHVlOiBuZXdXZWFwb25TdGF0ZVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJyb2FkY2FzdCBhbmltYXRpb24gc3RhdGUgY2hhbmdlcyB0byBvdGhlciBwbGF5ZXJzICh0aHJvdHRsZWQgdG8gYXZvaWQgc3BhbSlcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKG5vdyAtIGxhc3RBbmltYXRpb25Ccm9hZGNhc3QuY3VycmVudCA+IDEwMCkgeyAvLyBUaHJvdHRsZSB0byAxMCB0aW1lcyBwZXIgc2Vjb25kXG4gICAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIHNjeXRoZSBpcyBzcGlubmluZyBiYXNlZCBvbiB3ZWFwb24gdHlwZSBhbmQgY2hhcmdpbmcgc3RhdGVcbiAgICAgICAgICBjb25zdCBpc1NjeXRoZVNwaW5uaW5nID0gbmV3V2VhcG9uU3RhdGUuY3VycmVudFdlYXBvbiA9PT0gV2VhcG9uVHlwZS5TQ1lUSEUgJiYgbmV3V2VhcG9uU3RhdGUuaXNDaGFyZ2luZztcbiAgICAgICAgICAvLyBEZXRlcm1pbmUgaWYgc3dvcmQgaXMgc3Bpbm5pbmcgZHVyaW5nIERpdmluZSBTdG9ybSBvciBDaGFyZ2VcbiAgICAgICAgICBjb25zdCBpc1N3b3JkU3Bpbm5pbmcgPSBuZXdXZWFwb25TdGF0ZS5pc0RpdmluZVN0b3JtaW5nIHx8IG5ld1dlYXBvblN0YXRlLmlzU3dvcmRDaGFyZ2luZztcbiAgICAgICAgICAvLyBDb21iaW5lIGFsbCBzcGlubmluZyBzdGF0ZXNcbiAgICAgICAgICBjb25zdCBpc1NwaW5uaW5nID0gaXNTY3l0aGVTcGlubmluZyB8fCBpc1N3b3JkU3Bpbm5pbmc7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ3JlYXRlIHRoZSBhbmltYXRpb24gc3RhdGUgb2JqZWN0XG4gICAgICAgICAgY29uc3QgYW5pbWF0aW9uU3RhdGVUb1NlbmQgPSB7XG4gICAgICAgICAgICBpc0NoYXJnaW5nOiBuZXdXZWFwb25TdGF0ZS5pc0NoYXJnaW5nLFxuICAgICAgICAgICAgY2hhcmdlUHJvZ3Jlc3M6IG5ld1dlYXBvblN0YXRlLmNoYXJnZVByb2dyZXNzLFxuICAgICAgICAgICAgaXNTd2luZ2luZzogbmV3V2VhcG9uU3RhdGUuaXNTd2luZ2luZyxcbiAgICAgICAgICAgIHN3b3JkQ29tYm9TdGVwOiBuZXdXZWFwb25TdGF0ZS5zd29yZENvbWJvU3RlcCxcbiAgICAgICAgICAgIGlzRGl2aW5lU3Rvcm1pbmc6IG5ld1dlYXBvblN0YXRlLmlzRGl2aW5lU3Rvcm1pbmcsXG4gICAgICAgICAgICBpc1NwaW5uaW5nOiBpc1NwaW5uaW5nLCAvLyBCcm9hZGNhc3Qgc3Bpbm5pbmcgZm9yIHNjeXRoZSwgRGl2aW5lIFN0b3JtLCBhbmQgc3dvcmQgY2hhcmdlXG4gICAgICAgICAgICBpc0RlZmxlY3Rpbmc6IG5ld1dlYXBvblN0YXRlLmlzRGVmbGVjdGluZyxcbiAgICAgICAgICAgIGlzU3dvcmRDaGFyZ2luZzogbmV3V2VhcG9uU3RhdGUuaXNTd29yZENoYXJnaW5nLCAvLyBCcm9hZGNhc3Qgc3dvcmQgY2hhcmdpbmcgc3RhdGVcbiAgICAgICAgICAgIGlzVmlwZXJTdGluZ0NoYXJnaW5nOiBuZXdXZWFwb25TdGF0ZS5pc1ZpcGVyU3RpbmdDaGFyZ2luZyxcbiAgICAgICAgICAgIHZpcGVyU3RpbmdDaGFyZ2VQcm9ncmVzczogbmV3V2VhcG9uU3RhdGUudmlwZXJTdGluZ0NoYXJnZVByb2dyZXNzLFxuICAgICAgICAgICAgaXNCYXJyYWdlQ2hhcmdpbmc6IG5ld1dlYXBvblN0YXRlLmlzQmFycmFnZUNoYXJnaW5nLFxuICAgICAgICAgICAgYmFycmFnZUNoYXJnZVByb2dyZXNzOiBuZXdXZWFwb25TdGF0ZS5iYXJyYWdlQ2hhcmdlUHJvZ3Jlc3MsXG4gICAgICAgICAgICBpc0JhY2tzdGFiYmluZzogbmV3V2VhcG9uU3RhdGUuaXNCYWNrc3RhYmJpbmcgLy8gQnJvYWRjYXN0IGJhY2tzdGFiIGFuaW1hdGlvbiBzdGF0ZVxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJvYWRjYXN0UGxheWVyQW5pbWF0aW9uU3RhdGUoYW5pbWF0aW9uU3RhdGVUb1NlbmQpO1xuICAgICAgICAgIGxhc3RBbmltYXRpb25Ccm9hZGNhc3QuY3VycmVudCA9IG5vdztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgZGFtYWdlIG51bWJlcnMgZnJvbSBjb21iYXQgc3lzdGVtXG4gICAgICBjb25zdCBjb21iYXRTeXN0ZW0gPSBlbmdpbmVSZWYuY3VycmVudC5nZXRXb3JsZCgpLmdldFN5c3RlbShDb21iYXRTeXN0ZW0pO1xuICAgICAgaWYgKGNvbWJhdFN5c3RlbSAmJiBvbkRhbWFnZU51bWJlcnNVcGRhdGUpIHtcbiAgICAgICAgb25EYW1hZ2VOdW1iZXJzVXBkYXRlKGNvbWJhdFN5c3RlbS5nZXREYW1hZ2VOdW1iZXJzKCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgY2FtZXJhIGluZm9ybWF0aW9uIGZvciBkYW1hZ2UgbnVtYmVyIHBvc2l0aW9uaW5nXG4gICAgICBpZiAob25DYW1lcmFVcGRhdGUpIHtcbiAgICAgICAgb25DYW1lcmFVcGRhdGUoY2FtZXJhLCBzaXplKTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9nIG9iamVjdCBwb29sIGFuZCBzdGF0ZSBiYXRjaGVyIHN0YXRpc3RpY3MgcGVyaW9kaWNhbGx5IChldmVyeSA1IHNlY29uZHMpXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgaWYgKG5vdyAlIDEwMDAwIDwgMTYpIHsgLy8gQXBwcm94aW1hdGVseSBldmVyeSA1IHNlY29uZHMgKGFjY291bnRpbmcgZm9yIGZyYW1lIHJhdGUpXG4gICAgICAgIGNvbnN0IHBvb2xTdGF0cyA9IGdldFBvb2xTdGF0cygpO1xuICAgICAgICBjb25zdCBiYXRjaGVyU3RhdHMgPSBwdnBTdGF0ZUJhdGNoZXIuZ2V0U3RhdHMoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflKcgUFZQIFBlcmZvcm1hbmNlIFN0YXRzOicsIHtcbiAgICAgICAgICBvYmplY3RQb29sOiBwb29sU3RhdHMsXG4gICAgICAgICAgc3RhdGVCYXRjaGVyOiBiYXRjaGVyU3RhdHNcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBnYW1lIHN0YXRlIGZvciBVSVxuICAgICAgaWYgKG9uR2FtZVN0YXRlVXBkYXRlICYmIHBsYXllckVudGl0eSAmJiBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgaGVhbHRoQ29tcG9uZW50ID0gcGxheWVyRW50aXR5LmdldENvbXBvbmVudChIZWFsdGgpO1xuICAgICAgICBjb25zdCBzaGllbGRDb21wb25lbnQgPSBwbGF5ZXJFbnRpdHkuZ2V0Q29tcG9uZW50KFNoaWVsZCk7XG4gICAgICAgIGlmIChoZWFsdGhDb21wb25lbnQpIHtcbiAgICAgICAgICBjb25zdCBnYW1lU3RhdGUgPSB7XG4gICAgICAgICAgICBwbGF5ZXJIZWFsdGg6IGhlYWx0aENvbXBvbmVudC5jdXJyZW50SGVhbHRoLFxuICAgICAgICAgICAgbWF4SGVhbHRoOiBoZWFsdGhDb21wb25lbnQubWF4SGVhbHRoLFxuICAgICAgICAgICAgcGxheWVyU2hpZWxkOiBzaGllbGRDb21wb25lbnQgPyBzaGllbGRDb21wb25lbnQuY3VycmVudFNoaWVsZCA6IDAsXG4gICAgICAgICAgICBtYXhTaGllbGQ6IHNoaWVsZENvbXBvbmVudCA/IHNoaWVsZENvbXBvbmVudC5tYXhTaGllbGQgOiAwLFxuICAgICAgICAgICAgY3VycmVudFdlYXBvbjogY29udHJvbFN5c3RlbVJlZi5jdXJyZW50LmdldEN1cnJlbnRXZWFwb24oKSxcbiAgICAgICAgICAgIGN1cnJlbnRTdWJjbGFzczogY29udHJvbFN5c3RlbVJlZi5jdXJyZW50LmdldEN1cnJlbnRTdWJjbGFzcygpLFxuICAgICAgICAgICAgLy8gQWRkIG1hbmEgaW5mb3JtYXRpb24gZm9yIHdlYXBvbnMgdGhhdCB1c2UgbWFuYVxuICAgICAgICAgICAgbWFuYTogKGN1cnJlbnRXZWFwb24gPT09IFdlYXBvblR5cGUuU0NZVEhFIHx8IGN1cnJlbnRXZWFwb24gPT09IFdlYXBvblR5cGUuUlVORUJMQURFKSA/IGN1cnJlbnRNYW5hIDogMCxcbiAgICAgICAgICAgIG1heE1hbmE6IChjdXJyZW50V2VhcG9uID09PSBXZWFwb25UeXBlLlNDWVRIRSB8fCBjdXJyZW50V2VhcG9uID09PSBXZWFwb25UeXBlLlJVTkVCTEFERSkgPyBtYXhNYW5hIDogMFxuICAgICAgICAgIH07XG4gICAgICAgICAgb25HYW1lU3RhdGVVcGRhdGUoZ2FtZVN0YXRlKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgbXVsdGlwbGF5ZXIgaGVhbHRoXG4gICAgICAgICAgdXBkYXRlUGxheWVySGVhbHRoKGhlYWx0aENvbXBvbmVudC5jdXJyZW50SGVhbHRoLCBoZWFsdGhDb21wb25lbnQubWF4SGVhbHRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBCYXRjaCBhbGwgY29sbGVjdGVkIHN0YXRlIHVwZGF0ZXMgYXQgdGhlIGVuZCBvZiB0aGUgZnJhbWVcbiAgICAgIGlmIChzdGF0ZVVwZGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBQVlBTdGF0ZVVwZGF0ZUhlbHBlcnMuYmF0Y2hHYW1lU3RhdGVVcGRhdGVzKHN0YXRlVXBkYXRlcyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBFeHBvc2UgZGFtYWdlIG51bWJlciBjb21wbGV0aW9uIGhhbmRsZXIgZm9yIHBhcmVudCBjb21wb25lbnRcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAob25EYW1hZ2VOdW1iZXJDb21wbGV0ZSkge1xuICAgICAgLy8gU3RvcmUgdGhlIGNvbXBsZXRpb24gaGFuZGxlciBpbiBhIHdheSB0aGUgcGFyZW50IGNhbiBhY2Nlc3MgaXRcbiAgICAgICh3aW5kb3cgYXMgYW55KS5oYW5kbGVEYW1hZ2VOdW1iZXJDb21wbGV0ZSA9IChpZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbWJhdFN5c3RlbSA9IGVuZ2luZVJlZi5jdXJyZW50Py5nZXRXb3JsZCgpLmdldFN5c3RlbShDb21iYXRTeXN0ZW0pO1xuICAgICAgICBpZiAoY29tYmF0U3lzdGVtKSB7XG4gICAgICAgICAgY29tYmF0U3lzdGVtLnJlbW92ZURhbWFnZU51bWJlcihpZCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LCBbb25EYW1hZ2VOdW1iZXJDb21wbGV0ZV0pO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHsvKiBEb24ndCByZW5kZXIgZ2FtZSB3b3JsZCBpZiBnYW1lIGhhc24ndCBzdGFydGVkICovfVxuICAgICAgeyFnYW1lU3RhcnRlZCA/IG51bGwgOiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgey8qIEVudmlyb25tZW50IChTa3ksIFBsYW5ldCwgTW91bnRhaW5zLCBQaWxsYXJzLCBQZWRlc3RhbCkgLSBObyBsZXZlbCBwcm9ncmVzc2lvbiBpbiBQVlAgKi99XG4gICAgICA8RW52aXJvbm1lbnQgbGV2ZWw9ezF9IHdvcmxkPXtlbmdpbmVSZWYuY3VycmVudD8uZ2V0V29ybGQoKX0gLz5cblxuICAgICAgey8qIExpZ2h0aW5nICovfVxuICAgICAgPGFtYmllbnRMaWdodCBpbnRlbnNpdHk9ezAuM30gLz5cbiAgICAgIDxkaXJlY3Rpb25hbExpZ2h0XG4gICAgICAgIHBvc2l0aW9uPXtbMTAsIDEwLCA1XX1cbiAgICAgICAgaW50ZW5zaXR5PXswLjV9XG4gICAgICAgIGNhc3RTaGFkb3dcbiAgICAgICAgc2hhZG93LW1hcFNpemUtd2lkdGg9ezIwNDh9XG4gICAgICAgIHNoYWRvdy1tYXBTaXplLWhlaWdodD17MjA0OH1cbiAgICAgICAgc2hhZG93LWNhbWVyYS1mYXI9ezUwfVxuICAgICAgICBzaGFkb3ctY2FtZXJhLWxlZnQ9ey0yMH1cbiAgICAgICAgc2hhZG93LWNhbWVyYS1yaWdodD17MjB9XG4gICAgICAgIHNoYWRvdy1jYW1lcmEtdG9wPXsyMH1cbiAgICAgICAgc2hhZG93LWNhbWVyYS1ib3R0b209ey0yMH1cbiAgICAgIC8+XG5cbiAgICAgIHsvKiBHcm91bmQgLSBtYXRjaGVzIDI5LXVuaXQgbWFwIGJvdW5kYXJ5ICovfVxuICAgICAgPG1lc2ggcmVjZWl2ZVNoYWRvdyBwb3NpdGlvbj17WzAsIC0wLjUsIDBdfT5cbiAgICAgICAgPGN5bGluZGVyR2VvbWV0cnkgYXJncz17WzI5LCAyOSwgMSwgNl19IC8+XG4gICAgICAgIDxtZXNoU3RhbmRhcmRNYXRlcmlhbCBjb2xvcj1cIiMyZDVhMmRcIiAvPlxuICAgICAgPC9tZXNoPlxuXG4gICAgICB7LyogTWFwIGJvdW5kYXJ5IHZpc3VhbCBpbmRpY2F0b3IgKi99XG4gICAgICA8bWVzaCBwb3NpdGlvbj17WzAsIDAuMDEsIDBdfSBzY2FsZT17WzIuNSwgMi41LCAyLjVdfT5cbiAgICAgICAgPHJpbmdHZW9tZXRyeSBhcmdzPXtbMjUsIDI5LCA2NF19IC8+XG4gICAgICAgIDxtZXNoU3RhbmRhcmRNYXRlcmlhbCBjb2xvcj1cIiNmZjZiNmJcIiB0cmFuc3BhcmVudCBvcGFjaXR5PXswLjN9IC8+XG4gICAgICA8L21lc2g+XG5cblxuXG5cblxuXG4gICAgICB7LyogTWFpbiBQbGF5ZXIgRHJhZ29uIFVuaXQgUmVuZGVyZXIgKi99XG4gICAgICB7KCgpID0+IHtcblxuICAgICAgICByZXR1cm4gcGxheWVyRW50aXR5ICYmIGVuZ2luZVJlZi5jdXJyZW50ICYmIHNvY2tldDtcbiAgICAgIH0pKCkgJiYgKFxuICAgICAgICA8RHJhZ29uUmVuZGVyZXJcbiAgICAgICAgICBlbnRpdHlJZD17cGxheWVyRW50aXR5LmlkfVxuICAgICAgICAgIHBvc2l0aW9uPXtwbGF5ZXJQb3NpdGlvbn1cbiAgICAgICAgICB3b3JsZD17ZW5naW5lUmVmLmN1cnJlbnQhLmdldFdvcmxkKCl9XG4gICAgICAgICAgY3VycmVudFdlYXBvbj17d2VhcG9uU3RhdGUuY3VycmVudFdlYXBvbn1cbiAgICAgICAgICBjdXJyZW50U3ViY2xhc3M9e3dlYXBvblN0YXRlLmN1cnJlbnRTdWJjbGFzc31cbiAgICAgICAgICBpc0NoYXJnaW5nPXt3ZWFwb25TdGF0ZS5pc0NoYXJnaW5nfVxuICAgICAgICAgIGNoYXJnZVByb2dyZXNzPXt3ZWFwb25TdGF0ZS5jaGFyZ2VQcm9ncmVzc31cbiAgICAgICAgICBpc1N3aW5naW5nPXt3ZWFwb25TdGF0ZS5pc1N3aW5naW5nfVxuICAgICAgICAgIGlzU3Bpbm5pbmc9e3dlYXBvblN0YXRlLmlzU3Bpbm5pbmd9XG4gICAgICAgICAgc3dvcmRDb21ib1N0ZXA9e3dlYXBvblN0YXRlLnN3b3JkQ29tYm9TdGVwfVxuICAgICAgICAgIGlzRGl2aW5lU3Rvcm1pbmc9e3dlYXBvblN0YXRlLmlzRGl2aW5lU3Rvcm1pbmd9XG4gICAgICAgICAgaXNTd29yZENoYXJnaW5nPXt3ZWFwb25TdGF0ZS5pc1N3b3JkQ2hhcmdpbmd9XG4gICAgICAgICAgaXNEZWZsZWN0aW5nPXt3ZWFwb25TdGF0ZS5pc0RlZmxlY3Rpbmd9XG4gICAgICAgICAgaXNWaXBlclN0aW5nQ2hhcmdpbmc9e3dlYXBvblN0YXRlLmlzVmlwZXJTdGluZ0NoYXJnaW5nfVxuICAgICAgICAgIHZpcGVyU3RpbmdDaGFyZ2VQcm9ncmVzcz17d2VhcG9uU3RhdGUudmlwZXJTdGluZ0NoYXJnZVByb2dyZXNzfVxuICAgICAgICAgIGlzQmFycmFnZUNoYXJnaW5nPXt3ZWFwb25TdGF0ZS5pc0JhcnJhZ2VDaGFyZ2luZ31cbiAgICAgICAgICBiYXJyYWdlQ2hhcmdlUHJvZ3Jlc3M9e3dlYXBvblN0YXRlLmJhcnJhZ2VDaGFyZ2VQcm9ncmVzc31cbiAgICAgICAgICBpc0NvYnJhU2hvdENoYXJnaW5nPXt3ZWFwb25TdGF0ZS5pc0NvYnJhU2hvdENoYXJnaW5nfVxuICAgICAgICAgIGNvYnJhU2hvdENoYXJnZVByb2dyZXNzPXt3ZWFwb25TdGF0ZS5jb2JyYVNob3RDaGFyZ2VQcm9ncmVzc31cbiAgICAgICAgICBpc1NreWZhbGxpbmc9e3dlYXBvblN0YXRlLmlzU2t5ZmFsbGluZ31cbiAgICAgICAgICBpc0JhY2tzdGFiYmluZz17d2VhcG9uU3RhdGUuaXNCYWNrc3RhYmJpbmd9XG4gICAgICAgICAgaXNTdW5kZXJpbmc9e3dlYXBvblN0YXRlLmlzU3VuZGVyaW5nfVxuICAgICAgICAgIGlzU21pdGluZz17Y29udHJvbFN5c3RlbVJlZi5jdXJyZW50Py5pc1NtaXRlQWN0aXZlKCkgfHwgZmFsc2V9XG4gICAgICAgICAgaXNEZWF0aEdyYXNwaW5nPXtjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQ/LmlzRGVhdGhHcmFzcEFjdGl2ZSgpIHx8IGZhbHNlfVxuICAgICAgICAgIHJlYW5pbWF0ZVJlZj17cmVhbmltYXRlUmVmfVxuICAgICAgICAgIGlzTG9jYWxQbGF5ZXI9e3RydWV9XG4gICAgICAgICAgb25Cb3dSZWxlYXNlPXsoKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGlzIGNhbGxiYWNrIGlzIG5vdyBoYW5kbGVkIGJ5IHRoZSBDb250cm9sU3lzdGVtIGRpcmVjdGx5XG4gICAgICAgICAgfX1cbiAgICAgICAgICBvblNjeXRoZVN3aW5nQ29tcGxldGU9eygpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgICAgICBjYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGRpcmVjdGlvbi5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIGJyb2FkY2FzdFBsYXllckF0dGFjaygnc2N5dGhlX3N3aW5nJywgcGxheWVyUG9zaXRpb24sIGRpcmVjdGlvbiwge1xuICAgICAgICAgICAgICBpc1NwaW5uaW5nOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uU3dvcmRTd2luZ0NvbXBsZXRlPXsoKSA9PiB7XG4gICAgICAgICAgICBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQ/Lm9uU3dvcmRTd2luZ0NvbXBsZXRlKCk7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICAgICAgY2FtZXJhLmdldFdvcmxkRGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgICAgICAgICBkaXJlY3Rpb24ubm9ybWFsaXplKCk7XG4gICAgICAgICAgICBicm9hZGNhc3RQbGF5ZXJBdHRhY2soJ3N3b3JkX3N3aW5nJywgcGxheWVyUG9zaXRpb24sIGRpcmVjdGlvbiwge1xuICAgICAgICAgICAgICBjb21ib1N0ZXA6IHdlYXBvblN0YXRlLnN3b3JkQ29tYm9TdGVwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uU2FicmVzU3dpbmdDb21wbGV0ZT17KCkgPT4ge1xuICAgICAgICAgICAgY29udHJvbFN5c3RlbVJlZi5jdXJyZW50Py5vblNhYnJlc1N3aW5nQ29tcGxldGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgICAgICBjYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGRpcmVjdGlvbi5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIGJyb2FkY2FzdFBsYXllckF0dGFjaygnc2FicmVzX3N3aW5nJywgcGxheWVyUG9zaXRpb24sIGRpcmVjdGlvbik7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkNoYXJnZUNvbXBsZXRlPXsoKSA9PiB7XG4gICAgICAgICAgICBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQ/Lm9uQ2hhcmdlQ29tcGxldGUoKTtcbiAgICAgICAgICAgIC8vIEJyb2FkY2FzdCBjaGFyZ2Ugc3BpbiBhbmltYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgICAgICBjYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGRpcmVjdGlvbi5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIGJyb2FkY2FzdFBsYXllckF0dGFjaygnc3dvcmRfY2hhcmdlX3NwaW4nLCBwbGF5ZXJQb3NpdGlvbiwgZGlyZWN0aW9uLCB7XG4gICAgICAgICAgICAgIGlzU3Bpbm5pbmc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH19XG4gICAgICAgICAgb25EZWZsZWN0Q29tcGxldGU9eygpID0+IHtcbiAgICAgICAgICAgIGNvbnRyb2xTeXN0ZW1SZWYuY3VycmVudD8ub25EZWZsZWN0Q29tcGxldGUoKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uQmFja3N0YWJDb21wbGV0ZT17KCkgPT4ge1xuICAgICAgICAgICAgLy8gQmFja3N0YWIgYW5pbWF0aW9uIGNvbXBsZXRlZCAtIG5vIG5lZWQgdG8gYnJvYWRjYXN0IGFzIGFuaW1hdGlvbiBzdGF0ZSBpcyBoYW5kbGVkIGF1dG9tYXRpY2FsbHlcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uU3VuZGVyQ29tcGxldGU9eygpID0+IHtcbiAgICAgICAgICAgIC8vIFN1bmRlciBhbmltYXRpb24gY29tcGxldGVkIC0gbm8gbmVlZCB0byBicm9hZGNhc3QgYXMgYW5pbWF0aW9uIHN0YXRlIGlzIGhhbmRsZWQgYXV0b21hdGljYWxseVxuICAgICAgICAgIH19XG4gICAgICAgICAgb25TbWl0ZUNvbXBsZXRlPXsoKSA9PiB7XG4gICAgICAgICAgICBjb250cm9sU3lzdGVtUmVmLmN1cnJlbnQ/Lm9uU21pdGVDb21wbGV0ZSgpO1xuICAgICAgICAgIH19XG4gICAgICAgICAgb25EZWF0aEdyYXNwQ29tcGxldGU9eygpID0+IHtcbiAgICAgICAgICAgIGNvbnRyb2xTeXN0ZW1SZWYuY3VycmVudD8ub25EZWF0aEdyYXNwQ29tcGxldGUoKTtcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgKX1cblxuICAgICAgey8qIE90aGVyIFBsYXllcnMgRHJhZ29uIFJlbmRlcmVycyAqL31cbiAgICAgIHtBcnJheS5mcm9tKHBsYXllcnMudmFsdWVzKCkpLm1hcChwbGF5ZXIgPT4ge1xuICAgICAgICBpZiAocGxheWVyLmlkID09PSBzb2NrZXQ/LmlkKSByZXR1cm4gbnVsbDsgLy8gRG9uJ3QgcmVuZGVyIG91ciBvd24gcGxheWVyIHR3aWNlXG4gICAgICAgIFxuICAgICAgICBjb25zdCBwbGF5ZXJTdGF0ZSA9IG11bHRpcGxheWVyUGxheWVyU3RhdGVzLmdldChwbGF5ZXIuaWQpIHx8IHtcbiAgICAgICAgICBpc0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICBjaGFyZ2VQcm9ncmVzczogMCxcbiAgICAgICAgICBpc1N3aW5naW5nOiBmYWxzZSxcbiAgICAgICAgICBzd29yZENvbWJvU3RlcDogMSBhcyAxIHwgMiB8IDMsXG4gICAgICAgICAgaXNEaXZpbmVTdG9ybWluZzogZmFsc2UsXG4gICAgICAgICAgaXNTcGlubmluZzogZmFsc2UsXG4gICAgICAgICAgaXNTd29yZENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICBpc0RlZmxlY3Rpbmc6IGZhbHNlLFxuICAgICAgICAgIGlzVmlwZXJTdGluZ0NoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICB2aXBlclN0aW5nQ2hhcmdlUHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgaXNCYXJyYWdlQ2hhcmdpbmc6IGZhbHNlLFxuICAgICAgICAgIGJhcnJhZ2VDaGFyZ2VQcm9ncmVzczogMCxcbiAgICAgICAgICBpc0NvYnJhU2hvdENoYXJnaW5nOiBmYWxzZSxcbiAgICAgICAgICBjb2JyYVNob3RDaGFyZ2VQcm9ncmVzczogMCxcbiAgICAgICAgICBpc1NreWZhbGxpbmc6IGZhbHNlLFxuICAgICAgICAgIGlzQmFja3N0YWJiaW5nOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8RHJhZ29uUmVuZGVyZXJcbiAgICAgICAgICAgIGtleT17cGxheWVyLmlkfVxuICAgICAgICAgICAgZW50aXR5SWQ9e3BhcnNlSW50KHBsYXllci5pZC5yZXBsYWNlKC9cXEQvZywgJzAnKSl9IC8vIENvbnZlcnQgc3RyaW5nIElEIHRvIG51bWJlclxuICAgICAgICAgICAgcG9zaXRpb249e25ldyBWZWN0b3IzKHBsYXllci5wb3NpdGlvbi54LCBwbGF5ZXIucG9zaXRpb24ueSwgcGxheWVyLnBvc2l0aW9uLnopfVxuICAgICAgICAgICAgd29ybGQ9e2VuZ2luZVJlZi5jdXJyZW50Py5nZXRXb3JsZCgpIHx8IG5ldyBXb3JsZCgpfSAvLyBVc2UgY3VycmVudCB3b3JsZCBvciBjcmVhdGUgbmV3IG9uZVxuICAgICAgICAgICAgY3VycmVudFdlYXBvbj17cGxheWVyLndlYXBvbn1cbiAgICAgICAgICAgIGN1cnJlbnRTdWJjbGFzcz17cGxheWVyLnN1YmNsYXNzfVxuICAgICAgICAgICAgaXNDaGFyZ2luZz17cGxheWVyU3RhdGUuaXNDaGFyZ2luZ31cbiAgICAgICAgICAgIGNoYXJnZVByb2dyZXNzPXtwbGF5ZXJTdGF0ZS5jaGFyZ2VQcm9ncmVzc31cbiAgICAgICAgICAgIGlzU3dpbmdpbmc9e3BsYXllclN0YXRlLmlzU3dpbmdpbmd9XG4gICAgICAgICAgICBpc1NwaW5uaW5nPXtwbGF5ZXJTdGF0ZS5pc1NwaW5uaW5nfVxuICAgICAgICAgICAgc3dvcmRDb21ib1N0ZXA9e3BsYXllclN0YXRlLnN3b3JkQ29tYm9TdGVwfVxuICAgICAgICAgICAgaXNEaXZpbmVTdG9ybWluZz17cGxheWVyU3RhdGUuaXNEaXZpbmVTdG9ybWluZ31cbiAgICAgICAgICAgIGlzU3dvcmRDaGFyZ2luZz17cGxheWVyU3RhdGUuaXNTd29yZENoYXJnaW5nfVxuICAgICAgICAgICAgaXNEZWZsZWN0aW5nPXtwbGF5ZXJTdGF0ZS5pc0RlZmxlY3Rpbmd9XG4gICAgICAgICAgICBpc1ZpcGVyU3RpbmdDaGFyZ2luZz17cGxheWVyU3RhdGUuaXNWaXBlclN0aW5nQ2hhcmdpbmd9XG4gICAgICAgICAgICB2aXBlclN0aW5nQ2hhcmdlUHJvZ3Jlc3M9e3BsYXllclN0YXRlLnZpcGVyU3RpbmdDaGFyZ2VQcm9ncmVzc31cbiAgICAgICAgICAgIGlzQmFycmFnZUNoYXJnaW5nPXtwbGF5ZXJTdGF0ZS5pc0JhcnJhZ2VDaGFyZ2luZ31cbiAgICAgICAgICAgIGJhcnJhZ2VDaGFyZ2VQcm9ncmVzcz17cGxheWVyU3RhdGUuYmFycmFnZUNoYXJnZVByb2dyZXNzfVxuICAgICAgICAgICAgaXNDb2JyYVNob3RDaGFyZ2luZz17cGxheWVyU3RhdGUuaXNDb2JyYVNob3RDaGFyZ2luZ31cbiAgICAgICAgICAgIGNvYnJhU2hvdENoYXJnZVByb2dyZXNzPXtwbGF5ZXJTdGF0ZS5jb2JyYVNob3RDaGFyZ2VQcm9ncmVzc31cbiAgICAgICAgICAgIGlzU2t5ZmFsbGluZz17cGxheWVyU3RhdGUuaXNTa3lmYWxsaW5nfVxuICAgICAgICAgICAgaXNCYWNrc3RhYmJpbmc9e3BsYXllclN0YXRlLmlzQmFja3N0YWJiaW5nfVxuICAgICAgICAgICAgcm90YXRpb249e3BsYXllci5yb3RhdGlvbn1cbiAgICAgICAgICAgIGlzTG9jYWxQbGF5ZXI9e2ZhbHNlfVxuICAgICAgICAgICAgb25Cb3dSZWxlYXNlPXsoKSA9PiB7fX1cbiAgICAgICAgICAgIG9uU2N5dGhlU3dpbmdDb21wbGV0ZT17KCkgPT4ge319XG4gICAgICAgICAgICBvblN3b3JkU3dpbmdDb21wbGV0ZT17KCkgPT4ge319XG4gICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICAgIH0pfVxuXG4gICAgICB7LyogVG93ZXJzICovfVxuICAgICAge0FycmF5LmZyb20odG93ZXJzLnZhbHVlcygpKS5tYXAodG93ZXIgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxUb3dlclJlbmRlcmVyXG4gICAgICAgICAgICBrZXk9e3Rvd2VyLmlkfVxuICAgICAgICAgICAgZW50aXR5SWQ9e3BhcnNlSW50KHRvd2VyLmlkLnJlcGxhY2UoL1xcRC9nLCAnMCcpKX0gLy8gQ29udmVydCBzdHJpbmcgSUQgdG8gbnVtYmVyXG4gICAgICAgICAgICB3b3JsZD17ZW5naW5lUmVmLmN1cnJlbnQ/LmdldFdvcmxkKCkgfHwgbmV3IFdvcmxkKCl9XG4gICAgICAgICAgICBwb3NpdGlvbj17bmV3IFZlY3RvcjModG93ZXIucG9zaXRpb24ueCwgdG93ZXIucG9zaXRpb24ueSwgdG93ZXIucG9zaXRpb24ueil9XG4gICAgICAgICAgICBvd25lcklkPXt0b3dlci5vd25lcklkfVxuICAgICAgICAgICAgdG93ZXJJbmRleD17dG93ZXIudG93ZXJJbmRleH1cbiAgICAgICAgICAgIGhlYWx0aD17dG93ZXIuaGVhbHRofVxuICAgICAgICAgICAgbWF4SGVhbHRoPXt0b3dlci5tYXhIZWFsdGh9XG4gICAgICAgICAgICBpc0RlYWQ9e3Rvd2VyLmlzRGVhZH1cbiAgICAgICAgICAgIGNhbWVyYT17Y2FtZXJhfVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICB9KX1cblxuICAgICAgey8qIFN1bW1vbmVkIFVuaXRzICovfVxuICAgICAge2VuZ2luZVJlZi5jdXJyZW50ICYmICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHdvcmxkID0gZW5naW5lUmVmLmN1cnJlbnQuZ2V0V29ybGQoKTtcbiAgICAgICAgY29uc3Qgc3VtbW9uZWRVbml0cyA9IHdvcmxkLnF1ZXJ5RW50aXRpZXMoW1RyYW5zZm9ybSwgU3VtbW9uZWRVbml0LCBIZWFsdGhdKTtcblxuICAgICAgICByZXR1cm4gc3VtbW9uZWRVbml0cy5tYXAoZW50aXR5ID0+IHtcbiAgICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSk7XG4gICAgICAgICAgY29uc3QgdW5pdCA9IGVudGl0eS5nZXRDb21wb25lbnQoU3VtbW9uZWRVbml0KTtcbiAgICAgICAgICBjb25zdCBoZWFsdGggPSBlbnRpdHkuZ2V0Q29tcG9uZW50KEhlYWx0aCk7XG5cbiAgICAgICAgICBpZiAoIXRyYW5zZm9ybSB8fCAhdW5pdCB8fCAhaGVhbHRoIHx8IHVuaXQuaXNEZWFkIHx8IGhlYWx0aC5pc0RlYWQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U3VtbW9uZWRVbml0UmVuZGVyZXJcbiAgICAgICAgICAgICAga2V5PXt1bml0LnVuaXRJZH1cbiAgICAgICAgICAgICAgZW50aXR5SWQ9e2VudGl0eS5pZH1cbiAgICAgICAgICAgICAgd29ybGQ9e3dvcmxkfVxuICAgICAgICAgICAgICBwb3NpdGlvbj17dHJhbnNmb3JtLnBvc2l0aW9ufVxuICAgICAgICAgICAgICBvd25lcklkPXt1bml0Lm93bmVySWR9XG4gICAgICAgICAgICAgIGhlYWx0aD17aGVhbHRoLmN1cnJlbnRIZWFsdGh9XG4gICAgICAgICAgICAgIG1heEhlYWx0aD17dW5pdC5tYXhIZWFsdGh9XG4gICAgICAgICAgICAgIGlzRGVhZD17dW5pdC5pc0RlYWR9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pLmZpbHRlcihCb29sZWFuKTsgLy8gUmVtb3ZlIG51bGwgZW50cmllc1xuICAgICAgfSkoKX1cblxuICAgICAgey8qIE90aGVyIFBsYXllcnMgSGVhbHRoIEJhcnMgKi99XG4gICAgICB7QXJyYXkuZnJvbShwbGF5ZXJzLnZhbHVlcygpKS5tYXAocGxheWVyID0+IHtcbiAgICAgICAgaWYgKHBsYXllci5pZCA9PT0gc29ja2V0Py5pZCkgcmV0dXJuIG51bGw7IC8vIERvbid0IHNob3cgaGVhbHRoIGJhciBmb3IgbG9jYWwgcGxheWVyXG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgc2hpZWxkIGluZm8gZnJvbSB0aGUgc2VydmVyIHBsYXllciBlbnRpdHkgaWYgaXQgZXhpc3RzXG4gICAgICAgIGNvbnN0IHNlcnZlclBsYXllckVudGl0eUlkID0gc2VydmVyUGxheWVyRW50aXRpZXMuY3VycmVudC5nZXQocGxheWVyLmlkKTtcbiAgICAgICAgbGV0IHNoaWVsZEFtb3VudCA9IDA7XG4gICAgICAgIGxldCBtYXhTaGllbGRBbW91bnQgPSAyMDA7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VydmVyUGxheWVyRW50aXR5SWQgJiYgZW5naW5lUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBjb25zdCBlbnRpdHkgPSBlbmdpbmVSZWYuY3VycmVudC5nZXRXb3JsZCgpLmdldEVudGl0eShzZXJ2ZXJQbGF5ZXJFbnRpdHlJZCk7XG4gICAgICAgICAgaWYgKGVudGl0eSkge1xuICAgICAgICAgICAgY29uc3Qgc2hpZWxkID0gZW50aXR5LmdldENvbXBvbmVudChTaGllbGQpO1xuICAgICAgICAgICAgaWYgKHNoaWVsZCkge1xuICAgICAgICAgICAgICBzaGllbGRBbW91bnQgPSBzaGllbGQuY3VycmVudFNoaWVsZDtcbiAgICAgICAgICAgICAgbWF4U2hpZWxkQW1vdW50ID0gc2hpZWxkLm1heFNoaWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPFBsYXllckhlYWx0aEJhclxuICAgICAgICAgICAga2V5PXtgaGVhbHRoYmFyLSR7cGxheWVyLmlkfWB9XG4gICAgICAgICAgICBwbGF5ZXJJZD17cGxheWVyLmlkfVxuICAgICAgICAgICAgcGxheWVyTmFtZT17cGxheWVyLm5hbWV9XG4gICAgICAgICAgICBwb3NpdGlvbj17bmV3IFZlY3RvcjMocGxheWVyLnBvc2l0aW9uLngsIHBsYXllci5wb3NpdGlvbi55LCBwbGF5ZXIucG9zaXRpb24ueil9XG4gICAgICAgICAgICBoZWFsdGg9e3BsYXllci5oZWFsdGh9XG4gICAgICAgICAgICBtYXhIZWFsdGg9e3BsYXllci5tYXhIZWFsdGh9XG4gICAgICAgICAgICBzaGllbGQ9e3NoaWVsZEFtb3VudH1cbiAgICAgICAgICAgIG1heFNoaWVsZD17bWF4U2hpZWxkQW1vdW50fVxuICAgICAgICAgICAgY2FtZXJhPXtjYW1lcmF9XG4gICAgICAgICAgICBzaG93RGlzdGFuY2U9ezM1fVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICB9KX1cblxuICAgICAgey8qIFVuaWZpZWQgTWFuYWdlcnMgLSBTaW5nbGUgcXVlcnkgb3B0aW1pemF0aW9uICovfVxuICAgICAge2VuZ2luZVJlZi5jdXJyZW50ICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8VW5pZmllZFByb2plY3RpbGVNYW5hZ2VyIHdvcmxkPXtlbmdpbmVSZWYuY3VycmVudC5nZXRXb3JsZCgpfSAvPlxuICAgICAgICAgIDxCb3dQb3dlcnNob3RNYW5hZ2VyIC8+XG4gICAgICAgICAgPEZyb3N0Tm92YU1hbmFnZXIgd29ybGQ9e2VuZ2luZVJlZi5jdXJyZW50LmdldFdvcmxkKCl9IC8+XG4gICAgICAgICAgPFN0dW5NYW5hZ2VyIHdvcmxkPXtlbmdpbmVSZWYuY3VycmVudC5nZXRXb3JsZCgpfSAvPlxuICAgICAgICAgIDxDb2JyYVNob3RNYW5hZ2VyIHdvcmxkPXtlbmdpbmVSZWYuY3VycmVudC5nZXRXb3JsZCgpfSAvPlxuICAgICAgICAgIDxEaXZpbmVTdG9ybU1hbmFnZXJcbiAgICAgICAgICAgIGVuZW15RGF0YT17QXJyYXkuZnJvbShwbGF5ZXJzLnZhbHVlcygpKS5maWx0ZXIocCA9PiBwLmlkICE9PSBzb2NrZXQ/LmlkKS5tYXAocCA9PiAoe1xuICAgICAgICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKHAucG9zaXRpb24ueCwgcC5wb3NpdGlvbi55LCBwLnBvc2l0aW9uLnopLFxuICAgICAgICAgICAgICBoZWFsdGg6IHAuaGVhbHRoXG4gICAgICAgICAgICB9KSl9XG4gICAgICAgICAgICBvbkhpdFRhcmdldD17KHRhcmdldElkOiBzdHJpbmcsIGRhbWFnZTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChicm9hZGNhc3RQbGF5ZXJEYW1hZ2UpIHtcbiAgICAgICAgICAgICAgICBicm9hZGNhc3RQbGF5ZXJEYW1hZ2UodGFyZ2V0SWQsIGRhbWFnZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBwbGF5ZXJJZD17c29ja2V0Py5pZH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxEZWZsZWN0U2hpZWxkTWFuYWdlciAvPlxuICAgICAgICAgIHsvKiBPcHRpbWl6ZWQgUFZQLXNwZWNpZmljIENvYnJhIFNob3QgTWFuYWdlciB3aXRoIE9iamVjdCBQb29saW5nICovfVxuICAgICAgICAgIDxPcHRpbWl6ZWRQVlBDb2JyYVNob3RNYW5hZ2VyIFxuICAgICAgICAgICAgd29ybGQ9e2VuZ2luZVJlZi5jdXJyZW50LmdldFdvcmxkKCl9XG4gICAgICAgICAgICBwbGF5ZXJzPXtBcnJheS5mcm9tKHBsYXllcnMudmFsdWVzKCkpfSAvLyBJbmNsdWRlIGFsbCBwbGF5ZXJzLCBmaWx0ZXJpbmcgaXMgZG9uZSBpbnNpZGUgdGhlIGNvbXBvbmVudFxuICAgICAgICAgICAgc2VydmVyUGxheWVyRW50aXRpZXM9e3NlcnZlclBsYXllckVudGl0aWVzfVxuICAgICAgICAgICAgbG9jYWxTb2NrZXRJZD17c29ja2V0Py5pZH1cbiAgICAgICAgICAgIG9uUGxheWVySGl0PXsocGxheWVySWQ6IHN0cmluZywgZGFtYWdlOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgLy8gQ1JJVElDQUwgRklYOiBOZXZlciBkYW1hZ2UgdGhlIGxvY2FsIHBsYXllclxuICAgICAgICAgICAgICBpZiAocGxheWVySWQgPT09IHNvY2tldD8uaWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4pqg77iPIFNraXBwaW5nIENvYnJhIFNob3QgZGFtYWdlIHRvIGxvY2FsIHBsYXllciAke3NvY2tldD8uaWR9YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoYnJvYWRjYXN0UGxheWVyRGFtYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfjq8gQnJvYWRjYXN0aW5nIENvYnJhIFNob3QgZGFtYWdlIHRvIHBsYXllciAke3BsYXllcklkfSAoTk9UIGxvY2FsIHBsYXllciAke3NvY2tldD8uaWR9KWApO1xuICAgICAgICAgICAgICAgIGJyb2FkY2FzdFBsYXllckRhbWFnZShwbGF5ZXJJZCwgZGFtYWdlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uUGxheWVyVmVub21lZD17KHBsYXllcklkOiBzdHJpbmcsIHBvc2l0aW9uOiBWZWN0b3IzKSA9PiB7XG4gICAgICAgICAgICAgIC8vIENSSVRJQ0FMIEZJWDogTmV2ZXIgYXBwbHkgdmVub20gZWZmZWN0IHRvIHRoZSBsb2NhbCBwbGF5ZXJcbiAgICAgICAgICAgICAgaWYgKHBsYXllcklkID09PSBzb2NrZXQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBTa2lwcGluZyBDb2JyYSBTaG90IHZlbm9tIGVmZmVjdCBvbiBsb2NhbCBwbGF5ZXIgJHtzb2NrZXQ/LmlkfWApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQ2xvbmUgdGhlIHBvc2l0aW9uIHNpbmNlIGl0IGNvbWVzIGZyb20gdGhlIHBvb2wgYW5kIHdpbGwgYmUgcmVsZWFzZWRcbiAgICAgICAgICAgICAgY29uc3QgY2xvbmVkUG9zaXRpb24gPSBwb3NpdGlvbi5jbG9uZSgpO1xuICAgICAgICAgICAgICBjcmVhdGVQdnBWZW5vbUVmZmVjdChwbGF5ZXJJZCwgY2xvbmVkUG9zaXRpb24pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQnJvYWRjYXN0IHZlbm9tIGVmZmVjdCB0byBhbGwgcGxheWVycyBzbyB0aGV5IGNhbiBzZWUgaXRcbiAgICAgICAgICAgICAgaWYgKGJyb2FkY2FzdFBsYXllckVmZmVjdCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn46vIEJyb2FkY2FzdGluZyBDb2JyYSBTaG90IHZlbm9tIGVmZmVjdCB0byBwbGF5ZXIgJHtwbGF5ZXJJZH0gKE5PVCBsb2NhbCBwbGF5ZXIgJHtzb2NrZXQ/LmlkfSlgKTtcbiAgICAgICAgICAgICAgICBicm9hZGNhc3RQbGF5ZXJFZmZlY3Qoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogJ3Zlbm9tJyxcbiAgICAgICAgICAgICAgICAgIHRhcmdldFBsYXllcklkOiBwbGF5ZXJJZCxcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7IHg6IGNsb25lZFBvc2l0aW9uLngsIHk6IGNsb25lZFBvc2l0aW9uLnksIHo6IGNsb25lZFBvc2l0aW9uLnogfSxcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA2MDAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgICBcbiAgICAgICAgICB7LyogT3B0aW1pemVkIFBWUC1zcGVjaWZpYyBCYXJyYWdlIE1hbmFnZXIgd2l0aCBPYmplY3QgUG9vbGluZyAqL31cbiAgICAgICAgICA8T3B0aW1pemVkUFZQQmFycmFnZU1hbmFnZXIgXG4gICAgICAgICAgICB3b3JsZD17ZW5naW5lUmVmLmN1cnJlbnQuZ2V0V29ybGQoKX1cbiAgICAgICAgICAgIHBsYXllcnM9e0FycmF5LmZyb20ocGxheWVycy52YWx1ZXMoKSl9XG4gICAgICAgICAgICBzZXJ2ZXJQbGF5ZXJFbnRpdGllcz17c2VydmVyUGxheWVyRW50aXRpZXN9XG4gICAgICAgICAgICBsb2NhbFNvY2tldElkPXtzb2NrZXQ/LmlkfVxuICAgICAgICAgICAgb25QbGF5ZXJIaXQ9eyhwbGF5ZXJJZDogc3RyaW5nLCBkYW1hZ2U6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAvLyBDUklUSUNBTCBGSVg6IE5ldmVyIGRhbWFnZSB0aGUgbG9jYWwgcGxheWVyXG4gICAgICAgICAgICAgIGlmIChwbGF5ZXJJZCA9PT0gc29ja2V0Py5pZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDimqDvuI8gU2tpcHBpbmcgQmFycmFnZSBkYW1hZ2UgdG8gbG9jYWwgcGxheWVyICR7c29ja2V0Py5pZH1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChicm9hZGNhc3RQbGF5ZXJEYW1hZ2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBCcm9hZGNhc3RpbmcgQmFycmFnZSBkYW1hZ2UgdG8gcGxheWVyICR7cGxheWVySWR9IChOT1QgbG9jYWwgcGxheWVyICR7c29ja2V0Py5pZH0pYCk7XG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0UGxheWVyRGFtYWdlKHBsYXllcklkLCBkYW1hZ2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25QbGF5ZXJTbG93ZWQ9eyhwbGF5ZXJJZDogc3RyaW5nLCBwb3NpdGlvbjogVmVjdG9yMykgPT4ge1xuICAgICAgICAgICAgICAvLyBDUklUSUNBTCBGSVg6IE5ldmVyIGFwcGx5IHNsb3cgZWZmZWN0IHRvIHRoZSBsb2NhbCBwbGF5ZXJcbiAgICAgICAgICAgICAgaWYgKHBsYXllcklkID09PSBzb2NrZXQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBTa2lwcGluZyBCYXJyYWdlIHNsb3cgZWZmZWN0IG9uIGxvY2FsIHBsYXllciAke3NvY2tldD8uaWR9YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBDbG9uZSB0aGUgcG9zaXRpb24gc2luY2UgaXQgY29tZXMgZnJvbSB0aGUgcG9vbCBhbmQgd2lsbCBiZSByZWxlYXNlZFxuICAgICAgICAgICAgICBjb25zdCBjbG9uZWRQb3NpdGlvbiA9IHBvc2l0aW9uLmNsb25lKCk7XG4gICAgICAgICAgICAgIGNyZWF0ZVB2cERlYnVmZkVmZmVjdChwbGF5ZXJJZCwgJ3Nsb3dlZCcsIGNsb25lZFBvc2l0aW9uLCA1MDAwKTsgLy8gNSBzZWNvbmQgc2xvd1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQnJvYWRjYXN0IGRlYnVmZiBlZmZlY3QgdG8gYWxsIHBsYXllcnMgc28gdGhleSBjYW4gc2VlIGl0XG4gICAgICAgICAgICAgIGlmIChicm9hZGNhc3RQbGF5ZXJEZWJ1ZmYpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBCcm9hZGNhc3RpbmcgQmFycmFnZSBzbG93IGVmZmVjdCB0byBwbGF5ZXIgJHtwbGF5ZXJJZH0gKE5PVCBsb2NhbCBwbGF5ZXIgJHtzb2NrZXQ/LmlkfSlgKTtcbiAgICAgICAgICAgICAgICBicm9hZGNhc3RQbGF5ZXJEZWJ1ZmYocGxheWVySWQsICdzbG93ZWQnLCA1MDAwLCB7XG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjogeyB4OiBjbG9uZWRQb3NpdGlvbi54LCB5OiBjbG9uZWRQb3NpdGlvbi55LCB6OiBjbG9uZWRQb3NpdGlvbi56IH0sXG4gICAgICAgICAgICAgICAgICBzcGVlZE11bHRpcGxpZXI6IDAuNVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgICAgXG4gICAgICAgICAgey8qIE9wdGltaXplZCBQVlAtc3BlY2lmaWMgRnJvc3ROb3ZhIE1hbmFnZXIgd2l0aCBPYmplY3QgUG9vbGluZyAqL31cbiAgICAgICAgICA8T3B0aW1pemVkUFZQRnJvc3ROb3ZhTWFuYWdlciBcbiAgICAgICAgICAgIHdvcmxkPXtlbmdpbmVSZWYuY3VycmVudC5nZXRXb3JsZCgpfVxuICAgICAgICAgICAgcGxheWVycz17QXJyYXkuZnJvbShwbGF5ZXJzLnZhbHVlcygpKX1cbiAgICAgICAgICAgIHNlcnZlclBsYXllckVudGl0aWVzPXtzZXJ2ZXJQbGF5ZXJFbnRpdGllc31cbiAgICAgICAgICAgIGxvY2FsU29ja2V0SWQ9e3NvY2tldD8uaWR9XG4gICAgICAgICAgICBvblBsYXllckhpdD17KHBsYXllcklkOiBzdHJpbmcsIGRhbWFnZTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgIC8vIENSSVRJQ0FMIEZJWDogTmV2ZXIgZGFtYWdlIHRoZSBsb2NhbCBwbGF5ZXJcbiAgICAgICAgICAgICAgaWYgKHBsYXllcklkID09PSBzb2NrZXQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBTa2lwcGluZyBGcm9zdCBOb3ZhIGRhbWFnZSB0byBsb2NhbCBwbGF5ZXIgJHtzb2NrZXQ/LmlkfWApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGJyb2FkY2FzdFBsYXllckRhbWFnZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn46vIEJyb2FkY2FzdGluZyBGcm9zdCBOb3ZhIGRhbWFnZSB0byBwbGF5ZXIgJHtwbGF5ZXJJZH0gKE5PVCBsb2NhbCBwbGF5ZXIgJHtzb2NrZXQ/LmlkfSlgKTtcbiAgICAgICAgICAgICAgICBicm9hZGNhc3RQbGF5ZXJEYW1hZ2UocGxheWVySWQsIGRhbWFnZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvblBsYXllckZyb3plbj17KHBsYXllcklkOiBzdHJpbmcsIHBvc2l0aW9uOiBWZWN0b3IzKSA9PiB7XG4gICAgICAgICAgICAgIC8vIENSSVRJQ0FMIEZJWDogTmV2ZXIgYXBwbHkgZnJvemVuIGVmZmVjdCB0byB0aGUgbG9jYWwgcGxheWVyXG4gICAgICAgICAgICAgIGlmIChwbGF5ZXJJZCA9PT0gc29ja2V0Py5pZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDimqDvuI8gU2tpcHBpbmcgRnJvc3QgTm92YSBmcm96ZW4gZWZmZWN0IG9uIGxvY2FsIHBsYXllciAke3NvY2tldD8uaWR9YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBDbG9uZSB0aGUgcG9zaXRpb24gc2luY2UgaXQgY29tZXMgZnJvbSB0aGUgcG9vbCBhbmQgd2lsbCBiZSByZWxlYXNlZFxuICAgICAgICAgICAgICBjb25zdCBjbG9uZWRQb3NpdGlvbiA9IHBvc2l0aW9uLmNsb25lKCk7XG4gICAgICAgICAgICAgIGNyZWF0ZVB2cEZyb3plbkVmZmVjdChwbGF5ZXJJZCwgY2xvbmVkUG9zaXRpb24pO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHsvKiBPcHRpbWl6ZWQgUFZQLXNwZWNpZmljIFZpcGVyU3RpbmcgTWFuYWdlciB3aXRoIE9iamVjdCBQb29saW5nICovfVxuICAgICAgICAgIDxPcHRpbWl6ZWRQVlBWaXBlclN0aW5nTWFuYWdlclxuICAgICAgICAgICAgd29ybGQ9e2VuZ2luZVJlZi5jdXJyZW50LmdldFdvcmxkKCl9XG4gICAgICAgICAgICBwbGF5ZXJzPXtBcnJheS5mcm9tKHBsYXllcnMudmFsdWVzKCkpfVxuICAgICAgICAgICAgc2VydmVyUGxheWVyRW50aXRpZXM9e3NlcnZlclBsYXllckVudGl0aWVzfVxuICAgICAgICAgICAgbG9jYWxTb2NrZXRJZD17c29ja2V0Py5pZH1cbiAgICAgICAgICAgIG9uUGxheWVySGl0PXsocGxheWVySWQ6IHN0cmluZywgZGFtYWdlOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgLy8gQ1JJVElDQUwgRklYOiBOZXZlciBkYW1hZ2UgdGhlIGxvY2FsIHBsYXllclxuICAgICAgICAgICAgICBpZiAocGxheWVySWQgPT09IHNvY2tldD8uaWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4pqg77iPIFNraXBwaW5nIFZpcGVyIFN0aW5nIGRhbWFnZSB0byBsb2NhbCBwbGF5ZXIgJHtzb2NrZXQ/LmlkfWApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChicm9hZGNhc3RQbGF5ZXJEYW1hZ2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBCcm9hZGNhc3RpbmcgVmlwZXIgU3RpbmcgZGFtYWdlIHRvIHBsYXllciAke3BsYXllcklkfSAoTk9UIGxvY2FsIHBsYXllciAke3NvY2tldD8uaWR9KWApO1xuICAgICAgICAgICAgICAgIGJyb2FkY2FzdFBsYXllckRhbWFnZShwbGF5ZXJJZCwgZGFtYWdlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uUGxheWVyVmVub21lZD17KHBsYXllcklkOiBzdHJpbmcsIHBvc2l0aW9uOiBWZWN0b3IzKSA9PiB7XG4gICAgICAgICAgICAgIC8vIENSSVRJQ0FMIEZJWDogTmV2ZXIgYXBwbHkgdmVub20gZWZmZWN0IHRvIHRoZSBsb2NhbCBwbGF5ZXJcbiAgICAgICAgICAgICAgaWYgKHBsYXllcklkID09PSBzb2NrZXQ/LmlkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBTa2lwcGluZyBWaXBlciBTdGluZyB2ZW5vbSBlZmZlY3Qgb24gbG9jYWwgcGxheWVyICR7c29ja2V0Py5pZH1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBDbG9uZSB0aGUgcG9zaXRpb24gc2luY2UgaXQgY29tZXMgZnJvbSB0aGUgcG9vbCBhbmQgd2lsbCBiZSByZWxlYXNlZFxuICAgICAgICAgICAgICBjb25zdCBjbG9uZWRQb3NpdGlvbiA9IHBvc2l0aW9uLmNsb25lKCk7XG4gICAgICAgICAgICAgIGNyZWF0ZVB2cFZlbm9tRWZmZWN0KHBsYXllcklkLCBjbG9uZWRQb3NpdGlvbik7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgICAgXG4gICAgICAgICAgey8qIFBWUCBSZWFuaW1hdGUgRWZmZWN0cyAqL31cbiAgICAgICAgICB7cHZwUmVhbmltYXRlRWZmZWN0cy5tYXAocmVhbmltYXRlRWZmZWN0ID0+IHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGFmZmVjdGVkIHBsYXllclxuICAgICAgICAgICAgY29uc3QgYWZmZWN0ZWRQbGF5ZXIgPSBwbGF5ZXJzLmdldChyZWFuaW1hdGVFZmZlY3QucGxheWVySWQpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gYWZmZWN0ZWRQbGF5ZXJcbiAgICAgICAgICAgICAgPyBuZXcgVmVjdG9yMyhhZmZlY3RlZFBsYXllci5wb3NpdGlvbi54LCBhZmZlY3RlZFBsYXllci5wb3NpdGlvbi55LCBhZmZlY3RlZFBsYXllci5wb3NpdGlvbi56KVxuICAgICAgICAgICAgICA6IHJlYW5pbWF0ZUVmZmVjdC5wb3NpdGlvbjtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPFBWUFJlYW5pbWF0ZUVmZmVjdFxuICAgICAgICAgICAgICAgIGtleT17cmVhbmltYXRlRWZmZWN0LmlkfVxuICAgICAgICAgICAgICAgIHBvc2l0aW9uPXtjdXJyZW50UG9zaXRpb259XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0UHZwUmVhbmltYXRlRWZmZWN0cyhwcmV2ID0+IHByZXYuZmlsdGVyKGVmZmVjdCA9PiBlZmZlY3QuaWQgIT09IHJlYW5pbWF0ZUVmZmVjdC5pZCkpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuXG4gICAgICAgICAgey8qIFBWUCBTbWl0ZSBFZmZlY3RzICovfVxuICAgICAgICAgIHtwdnBTbWl0ZUVmZmVjdHMubWFwKHNtaXRlRWZmZWN0ID0+IHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBlbmVteSBkYXRhIGZyb20gb3RoZXIgcGxheWVycyBmb3IgUFZQIHNtaXRlIGRhbWFnZVxuICAgICAgICAgICAgY29uc3Qgb3RoZXJQbGF5ZXJzRGF0YSA9IEFycmF5LmZyb20ocGxheWVycy5lbnRyaWVzKCkpXG4gICAgICAgICAgICAgIC5maWx0ZXIoKFtwbGF5ZXJJZF0pID0+IHBsYXllcklkICE9PSBzbWl0ZUVmZmVjdC5wbGF5ZXJJZClcbiAgICAgICAgICAgICAgLm1hcCgoW3BsYXllcklkLCBwbGF5ZXJdKSA9PiAoe1xuICAgICAgICAgICAgICAgIGlkOiBwbGF5ZXJJZCxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMocGxheWVyLnBvc2l0aW9uLngsIHBsYXllci5wb3NpdGlvbi55LCBwbGF5ZXIucG9zaXRpb24ueiksXG4gICAgICAgICAgICAgICAgaGVhbHRoOiBwbGF5ZXIuaGVhbHRoXG4gICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPFNtaXRlXG4gICAgICAgICAgICAgICAga2V5PXtzbWl0ZUVmZmVjdC5pZH1cbiAgICAgICAgICAgICAgICB3ZWFwb25UeXBlPXtXZWFwb25UeXBlLlJVTkVCTEFERX1cbiAgICAgICAgICAgICAgICBwb3NpdGlvbj17c21pdGVFZmZlY3QucG9zaXRpb259XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0UHZwU21pdGVFZmZlY3RzKHByZXYgPT4gcHJldi5maWx0ZXIoZWZmZWN0ID0+IGVmZmVjdC5pZCAhPT0gc21pdGVFZmZlY3QuaWQpKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIG9uSGl0PXsodGFyZ2V0SWQsIGRhbWFnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIFBWUCBkYW1hZ2UgdGhyb3VnaCBicm9hZGNhc3Qgc3lzdGVtXG4gICAgICAgICAgICAgICAgICBicm9hZGNhc3RQbGF5ZXJEYW1hZ2UodGFyZ2V0SWQsIGRhbWFnZSwgJ3NtaXRlJyk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBlbmVteURhdGE9e290aGVyUGxheWVyc0RhdGF9XG4gICAgICAgICAgICAgICAgb25EYW1hZ2VEZWFsdD17c21pdGVFZmZlY3Qub25EYW1hZ2VEZWFsdCB8fCAoKGRhbWFnZURlYWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBoZWFsaW5nIGlmIG5vIGNhbGxiYWNrIHByb3ZpZGVkXG4gICAgICAgICAgICAgICAgICBpZiAoZGFtYWdlRGVhbHQgJiYgcGxheWVyRW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWx0aENvbXBvbmVudCA9IHBsYXllckVudGl0eS5nZXRDb21wb25lbnQoSGVhbHRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWx0aENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEhlYWx0aCA9IGhlYWx0aENvbXBvbmVudC5jdXJyZW50SGVhbHRoO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpZEhlYWwgPSBoZWFsdGhDb21wb25lbnQuaGVhbCgyMCk7IC8vIFNtaXRlIGhlYWxpbmcgYW1vdW50XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZEhlYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDimqEgU21pdGUgKFBWUCB2aXN1YWwgZmFsbGJhY2spIGhlYWxlZCBwbGF5ZXIgZm9yIDIwIEhQISBIZWFsdGg6ICR7b2xkSGVhbHRofSAtPiAke2hlYWx0aENvbXBvbmVudC5jdXJyZW50SGVhbHRofS8ke2hlYWx0aENvbXBvbmVudC5tYXhIZWFsdGh9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuXG4gICAgICAgICAgey8qIFBWUCBEZWF0aEdyYXNwIEVmZmVjdHMgKi99XG4gICAgICAgICAge3B2cERlYXRoR3Jhc3BFZmZlY3RzLm1hcChkZWF0aEdyYXNwRWZmZWN0ID0+IHtcbiAgICAgICAgICAgIC8vIEZvciBsb2NhbCBwbGF5ZXIsIHVzZSBjdXJyZW50IHRyYW5zZm9ybSBwb3NpdGlvbiBpbnN0ZWFkIG9mIHBvdGVudGlhbGx5IHN0YWxlIHBsYXllcnMgbWFwIHBvc2l0aW9uXG4gICAgICAgICAgICBsZXQgY3VycmVudFN0YXJ0UG9zaXRpb246IFZlY3RvcjM7XG5cbiAgICAgICAgICAgIGlmIChkZWF0aEdyYXNwRWZmZWN0LnBsYXllcklkID09PSBzb2NrZXQ/LmlkICYmIHBsYXllckVudGl0eSkge1xuICAgICAgICAgICAgICAvLyBMb2NhbCBwbGF5ZXIgLSB1c2UgY3VycmVudCBFQ1MgcG9zaXRpb25cbiAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gcGxheWVyRW50aXR5LmdldENvbXBvbmVudChUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFN0YXJ0UG9zaXRpb24gPSB0cmFuc2Zvcm0ucG9zaXRpb24uY2xvbmUoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byBwbGF5ZXJzIG1hcCBpZiBFQ1MgcG9zaXRpb24gdW5hdmFpbGFibGVcbiAgICAgICAgICAgICAgICBjb25zdCBjYXN0aW5nUGxheWVyID0gcGxheWVycy5nZXQoZGVhdGhHcmFzcEVmZmVjdC5wbGF5ZXJJZCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFN0YXJ0UG9zaXRpb24gPSBjYXN0aW5nUGxheWVyXG4gICAgICAgICAgICAgICAgICA/IG5ldyBWZWN0b3IzKGNhc3RpbmdQbGF5ZXIucG9zaXRpb24ueCwgY2FzdGluZ1BsYXllci5wb3NpdGlvbi55LCBjYXN0aW5nUGxheWVyLnBvc2l0aW9uLnopXG4gICAgICAgICAgICAgICAgICA6IGRlYXRoR3Jhc3BFZmZlY3Quc3RhcnRQb3NpdGlvbjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmVtb3RlIHBsYXllciAtIHVzZSBwbGF5ZXJzIG1hcCBwb3NpdGlvblxuICAgICAgICAgICAgICBjb25zdCBjYXN0aW5nUGxheWVyID0gcGxheWVycy5nZXQoZGVhdGhHcmFzcEVmZmVjdC5wbGF5ZXJJZCk7XG4gICAgICAgICAgICAgIGN1cnJlbnRTdGFydFBvc2l0aW9uID0gY2FzdGluZ1BsYXllclxuICAgICAgICAgICAgICAgID8gbmV3IFZlY3RvcjMoY2FzdGluZ1BsYXllci5wb3NpdGlvbi54LCBjYXN0aW5nUGxheWVyLnBvc2l0aW9uLnksIGNhc3RpbmdQbGF5ZXIucG9zaXRpb24ueilcbiAgICAgICAgICAgICAgICA6IGRlYXRoR3Jhc3BFZmZlY3Quc3RhcnRQb3NpdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPERlYXRoR3Jhc3BQcm9qZWN0aWxlXG4gICAgICAgICAgICAgICAga2V5PXtkZWF0aEdyYXNwRWZmZWN0LmlkfVxuICAgICAgICAgICAgICAgIHN0YXJ0UG9zaXRpb249e2N1cnJlbnRTdGFydFBvc2l0aW9ufVxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbj17ZGVhdGhHcmFzcEVmZmVjdC5kaXJlY3Rpb259XG4gICAgICAgICAgICAgICAgY2FzdGVySWQ9e2RlYXRoR3Jhc3BFZmZlY3QucGxheWVySWR9XG4gICAgICAgICAgICAgICAgb25IaXQ9eyh0YXJnZXRJZDogc3RyaW5nLCBwb3NpdGlvbjogVmVjdG9yMykgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfjq8gRGVhdGhHcmFzcCBoaXQgdGFyZ2V0OiAke3RhcmdldElkfSBhdCBwb3NpdGlvbjpgLCBwb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBEZWF0aEdyYXNwIGNhc3RlciBwb3NpdGlvbjpgLCBjdXJyZW50U3RhcnRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBEZWF0aEdyYXNwIGNyZWF0aW5nIHB1bGwgZWZmZWN0IGZvciB0YXJnZXQgJHt0YXJnZXRJZH1gKTtcbiAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgcHVsbGluZyBlZmZlY3Qgd2hlbiBwcm9qZWN0aWxlIGhpdHNcbiAgICAgICAgICAgICAgICAgIGNyZWF0ZVB2cERlYXRoR3Jhc3BQdWxsKHRhcmdldElkLCBjdXJyZW50U3RhcnRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRQdnBEZWF0aEdyYXNwRWZmZWN0cyhwcmV2ID0+IHByZXYuZmlsdGVyKGVmZmVjdCA9PiBlZmZlY3QuaWQgIT09IGRlYXRoR3Jhc3BFZmZlY3QuaWQpKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHBsYXllcnM9e3BsYXllcnN9XG4gICAgICAgICAgICAgICAgbG9jYWxTb2NrZXRJZD17c29ja2V0Py5pZH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG5cbiAgICAgICAgICB7LyogUFZQIERlYXRoR3Jhc3AgUHVsbCBFZmZlY3RzICovfVxuICAgICAgICAgIHtwdnBEZWF0aEdyYXNwUHVsbHMubWFwKHB1bGwgPT4ge1xuICAgICAgICAgICAgaWYgKCFwdWxsLmlzQWN0aXZlKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPERlYXRoR3Jhc3BQdWxsXG4gICAgICAgICAgICAgICAga2V5PXtwdWxsLmlkfVxuICAgICAgICAgICAgICAgIHRhcmdldFBsYXllcklkPXtwdWxsLnRhcmdldFBsYXllcklkfVxuICAgICAgICAgICAgICAgIGNhc3RlclBvc2l0aW9uPXtwdWxsLmNhc3RlclBvc2l0aW9ufVxuICAgICAgICAgICAgICAgIGlzQWN0aXZlPXtwdWxsLmlzQWN0aXZlfVxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldFB2cERlYXRoR3Jhc3BQdWxscyhwcmV2ID0+IHByZXYubWFwKHAgPT5cbiAgICAgICAgICAgICAgICAgICAgcC5pZCA9PT0gcHVsbC5pZCA/IHsgLi4ucCwgaXNBY3RpdmU6IGZhbHNlIH0gOiBwXG4gICAgICAgICAgICAgICAgICApKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHBsYXllckVudGl0aWVzPXtzZXJ2ZXJQbGF5ZXJFbnRpdGllc31cbiAgICAgICAgICAgICAgICBnZXRFbnRpdHlQb3NpdGlvbj17KGVudGl0eUlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB3b3JsZCA9IGVuZ2luZVJlZi5jdXJyZW50Py5nZXRXb3JsZCgpO1xuICAgICAgICAgICAgICAgICAgaWYgKCF3b3JsZCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHdvcmxkLmdldEVudGl0eShlbnRpdHlJZCk7XG4gICAgICAgICAgICAgICAgICBpZiAoIWVudGl0eSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm0gPyB0cmFuc2Zvcm0ucG9zaXRpb24gOiBudWxsO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgdXBkYXRlRW50aXR5UG9zaXRpb249eyhlbnRpdHlJZCwgcG9zaXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmxkID0gZW5naW5lUmVmLmN1cnJlbnQ/LmdldFdvcmxkKCk7XG4gICAgICAgICAgICAgICAgICBpZiAoIXdvcmxkKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHdvcmxkLmdldEVudGl0eShlbnRpdHlJZCk7XG4gICAgICAgICAgICAgICAgICBpZiAoIWVudGl0eSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRQb3NpdGlvbihwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cblxuICAgICAgICAgIHsvKiBQVlAgRnJvc3QgTm92YSBFZmZlY3RzICovfVxuICAgICAgICAgIHtwdnBGcm9zdE5vdmFFZmZlY3RzLm1hcChmcm9zdE5vdmFFZmZlY3QgPT4ge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgY2FzdGluZyBwbGF5ZXJcbiAgICAgICAgICAgIGNvbnN0IGNhc3RpbmdQbGF5ZXIgPSBwbGF5ZXJzLmdldChmcm9zdE5vdmFFZmZlY3QucGxheWVySWQpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gY2FzdGluZ1BsYXllciBcbiAgICAgICAgICAgICAgPyBuZXcgVmVjdG9yMyhjYXN0aW5nUGxheWVyLnBvc2l0aW9uLngsIGNhc3RpbmdQbGF5ZXIucG9zaXRpb24ueSwgY2FzdGluZ1BsYXllci5wb3NpdGlvbi56KVxuICAgICAgICAgICAgICA6IGZyb3N0Tm92YUVmZmVjdC5wb3NpdGlvbjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPEZyb3N0Tm92YVxuICAgICAgICAgICAgICAgIGtleT17ZnJvc3ROb3ZhRWZmZWN0LmlkfVxuICAgICAgICAgICAgICAgIHBvc2l0aW9uPXtjdXJyZW50UG9zaXRpb259XG4gICAgICAgICAgICAgICAgZHVyYXRpb249e2Zyb3N0Tm92YUVmZmVjdC5kdXJhdGlvbn1cbiAgICAgICAgICAgICAgICBzdGFydFRpbWU9e2Zyb3N0Tm92YUVmZmVjdC5zdGFydFRpbWV9XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0UHZwRnJvc3ROb3ZhRWZmZWN0cyhwcmV2ID0+IHByZXYuZmlsdGVyKGVmZmVjdCA9PiBlZmZlY3QuaWQgIT09IGZyb3N0Tm92YUVmZmVjdC5pZCkpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuXG4gICAgICAgICAgey8qIFBWUCBWZW5vbSBFZmZlY3RzICovfVxuICAgICAgICAgIHtwdnBWZW5vbUVmZmVjdHMubWFwKHZlbm9tRWZmZWN0ID0+IHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGFmZmVjdGVkIHBsYXllclxuICAgICAgICAgICAgY29uc3QgYWZmZWN0ZWRQbGF5ZXIgPSBwbGF5ZXJzLmdldCh2ZW5vbUVmZmVjdC5wbGF5ZXJJZCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UG9zaXRpb24gPSBhZmZlY3RlZFBsYXllciBcbiAgICAgICAgICAgICAgPyBuZXcgVmVjdG9yMyhhZmZlY3RlZFBsYXllci5wb3NpdGlvbi54LCBhZmZlY3RlZFBsYXllci5wb3NpdGlvbi55LCBhZmZlY3RlZFBsYXllci5wb3NpdGlvbi56KVxuICAgICAgICAgICAgICA6IHZlbm9tRWZmZWN0LnBvc2l0aW9uO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8VmVub21FZmZlY3RcbiAgICAgICAgICAgICAgICBrZXk9e3Zlbm9tRWZmZWN0LmlkfVxuICAgICAgICAgICAgICAgIHBvc2l0aW9uPXtjdXJyZW50UG9zaXRpb259XG4gICAgICAgICAgICAgICAgZHVyYXRpb249e3Zlbm9tRWZmZWN0LmR1cmF0aW9ufVxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZT17dmVub21FZmZlY3Quc3RhcnRUaW1lfVxuICAgICAgICAgICAgICAgIGVuZW15SWQ9e3Zlbm9tRWZmZWN0LnBsYXllcklkfSAvLyBVc2UgcGxheWVySWQgYXMgZW5lbXlJZCBmb3IgdHJhY2tpbmdcbiAgICAgICAgICAgICAgICBlbmVteURhdGE9e0FycmF5LmZyb20ocGxheWVycy52YWx1ZXMoKSkuZmlsdGVyKHAgPT4gcC5pZCAhPT0gc29ja2V0Py5pZCkubWFwKHAgPT4gKHtcbiAgICAgICAgICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKHAucG9zaXRpb24ueCwgcC5wb3NpdGlvbi55LCBwLnBvc2l0aW9uLnopLFxuICAgICAgICAgICAgICAgICAgaGVhbHRoOiBwLmhlYWx0aCxcbiAgICAgICAgICAgICAgICAgIGlzRHlpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSkpfVxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldFB2cFZlbm9tRWZmZWN0cyhwcmV2ID0+IHByZXYuZmlsdGVyKGVmZmVjdCA9PiBlZmZlY3QuaWQgIT09IHZlbm9tRWZmZWN0LmlkKSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG5cbiAgICAgICAgICB7LyogUFZQIERlYnVmZiBFZmZlY3RzICovfVxuICAgICAgICAgIHtwdnBEZWJ1ZmZFZmZlY3RzLm1hcChkZWJ1ZmZFZmZlY3QgPT4ge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgYWZmZWN0ZWQgcGxheWVyXG4gICAgICAgICAgICBjb25zdCBhZmZlY3RlZFBsYXllciA9IHBsYXllcnMuZ2V0KGRlYnVmZkVmZmVjdC5wbGF5ZXJJZCk7XG4gICAgICAgICAgICBsZXQgY3VycmVudFBvc2l0aW9uOiBWZWN0b3IzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBsb2NhbCBwbGF5ZXIgdG8gdXNlIHRoZSBtb3N0IHVwLXRvLWRhdGUgcG9zaXRpb25cbiAgICAgICAgICAgIGlmIChkZWJ1ZmZFZmZlY3QucGxheWVySWQgPT09IHNvY2tldD8uaWQgJiYgcGxheWVyRW50aXR5KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHBsYXllckVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKHRyYW5zZm9ybS5wb3NpdGlvbi54LCB0cmFuc2Zvcm0ucG9zaXRpb24ueSArIDAuNSwgdHJhbnNmb3JtLnBvc2l0aW9uLnopO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKHBsYXllclBvc2l0aW9uLngsIHBsYXllclBvc2l0aW9uLnkgKyAwLjUsIHBsYXllclBvc2l0aW9uLnopO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFmZmVjdGVkUGxheWVyKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKGFmZmVjdGVkUGxheWVyLnBvc2l0aW9uLngsIGFmZmVjdGVkUGxheWVyLnBvc2l0aW9uLnkgKyAwLjUsIGFmZmVjdGVkUGxheWVyLnBvc2l0aW9uLnopO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY3VycmVudFBvc2l0aW9uID0gbmV3IFZlY3RvcjMoZGVidWZmRWZmZWN0LnBvc2l0aW9uLngsIGRlYnVmZkVmZmVjdC5wb3NpdGlvbi55ICsgMC41LCBkZWJ1ZmZFZmZlY3QucG9zaXRpb24ueik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVzZSBkaWZmZXJlbnQgZWZmZWN0cyBmb3IgZGlmZmVyZW50IGRlYnVmZiB0eXBlc1xuICAgICAgICAgICAgaWYgKGRlYnVmZkVmZmVjdC5kZWJ1ZmZUeXBlID09PSAnZnJvemVuJykge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxGcm96ZW5FZmZlY3RcbiAgICAgICAgICAgICAgICAgIGtleT17ZGVidWZmRWZmZWN0LmlkfVxuICAgICAgICAgICAgICAgICAgcG9zaXRpb249e2N1cnJlbnRQb3NpdGlvbn1cbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uPXtkZWJ1ZmZFZmZlY3QuZHVyYXRpb259XG4gICAgICAgICAgICAgICAgICBzdGFydFRpbWU9e2RlYnVmZkVmZmVjdC5zdGFydFRpbWV9XG4gICAgICAgICAgICAgICAgICBlbmVteUlkPXtkZWJ1ZmZFZmZlY3QucGxheWVySWR9XG4gICAgICAgICAgICAgICAgICBlbmVteURhdGE9e0FycmF5LmZyb20ocGxheWVycy52YWx1ZXMoKSkuZmlsdGVyKHAgPT4gcC5pZCAhPT0gc29ja2V0Py5pZCkubWFwKHAgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgbG9jYWwgcGxheWVyLCB1c2UgdGhlIG1vc3QgY3VycmVudCBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICBpZiAocC5pZCA9PT0gc29ja2V0Py5pZCAmJiBwbGF5ZXJFbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBwbGF5ZXJFbnRpdHkuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBvcyA9IHRyYW5zZm9ybSA/IHRyYW5zZm9ybS5wb3NpdGlvbiA6IHBsYXllclBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBjdXJyZW50UG9zLmNsb25lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFsdGg6IHAuaGVhbHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEeWluZzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMyhwLnBvc2l0aW9uLngsIHAucG9zaXRpb24ueSwgcC5wb3NpdGlvbi56KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWx0aDogcC5oZWFsdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0R5aW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRQdnBEZWJ1ZmZFZmZlY3RzKHByZXYgPT4gcHJldi5maWx0ZXIoZWZmZWN0ID0+IGVmZmVjdC5pZCAhPT0gZGVidWZmRWZmZWN0LmlkKSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlYnVmZkVmZmVjdC5kZWJ1ZmZUeXBlID09PSAnc3R1bm5lZCcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8U3R1bm5lZEVmZmVjdFxuICAgICAgICAgICAgICAgICAga2V5PXtkZWJ1ZmZFZmZlY3QuaWR9XG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbj17Y3VycmVudFBvc2l0aW9ufVxuICAgICAgICAgICAgICAgICAgZHVyYXRpb249e2RlYnVmZkVmZmVjdC5kdXJhdGlvbn1cbiAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZT17ZGVidWZmRWZmZWN0LnN0YXJ0VGltZX1cbiAgICAgICAgICAgICAgICAgIGVuZW15SWQ9e2RlYnVmZkVmZmVjdC5wbGF5ZXJJZH1cbiAgICAgICAgICAgICAgICAgIGVuZW15RGF0YT17QXJyYXkuZnJvbShwbGF5ZXJzLnZhbHVlcygpKS5maWx0ZXIocCA9PiBwLmlkICE9PSBzb2NrZXQ/LmlkKS5tYXAocCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBsb2NhbCBwbGF5ZXIsIHVzZSB0aGUgbW9zdCBjdXJyZW50IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmIChwLmlkID09PSBzb2NrZXQ/LmlkICYmIHBsYXllckVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHBsYXllckVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UG9zID0gdHJhbnNmb3JtID8gdHJhbnNmb3JtLnBvc2l0aW9uIDogcGxheWVyUG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGN1cnJlbnRQb3MuY2xvbmUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWx0aDogcC5oZWFsdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0R5aW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKHAucG9zaXRpb24ueCwgcC5wb3NpdGlvbi55LCBwLnBvc2l0aW9uLnopLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhbHRoOiBwLmhlYWx0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRHlpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFB2cERlYnVmZkVmZmVjdHMocHJldiA9PiBwcmV2LmZpbHRlcihlZmZlY3QgPT4gZWZmZWN0LmlkICE9PSBkZWJ1ZmZFZmZlY3QuaWQpKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPERlYnVmZkluZGljYXRvclxuICAgICAgICAgICAgICAgICAga2V5PXtkZWJ1ZmZFZmZlY3QuaWR9XG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbj17Y3VycmVudFBvc2l0aW9ufVxuICAgICAgICAgICAgICAgICAgZGVidWZmVHlwZT17ZGVidWZmRWZmZWN0LmRlYnVmZlR5cGV9XG4gICAgICAgICAgICAgICAgICBkdXJhdGlvbj17ZGVidWZmRWZmZWN0LmR1cmF0aW9ufVxuICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lPXtkZWJ1ZmZFZmZlY3Quc3RhcnRUaW1lfVxuICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRQdnBEZWJ1ZmZFZmZlY3RzKHByZXYgPT4gcHJldi5maWx0ZXIoZWZmZWN0ID0+IGVmZmVjdC5pZCAhPT0gZGVidWZmRWZmZWN0LmlkKSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvPlxuICAgICAgKX1cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgIDwvPlxuICApO1xufVxuXG5mdW5jdGlvbiBzZXR1cFBWUEdhbWUoXG4gIGVuZ2luZTogRW5naW5lLFxuICBzY2VuZTogU2NlbmUsXG4gIGNhbWVyYTogUGVyc3BlY3RpdmVDYW1lcmEsXG4gIHJlbmRlcmVyOiBXZWJHTFJlbmRlcmVyLFxuICBkYW1hZ2VQbGF5ZXJDYWxsYmFjazogKHBsYXllcklkOiBzdHJpbmcsIGRhbWFnZTogbnVtYmVyKSA9PiB2b2lkLFxuICBkYW1hZ2VUb3dlckNhbGxiYWNrOiAodG93ZXJJZDogc3RyaW5nLCBkYW1hZ2U6IG51bWJlcikgPT4gdm9pZFxuKTogeyBwbGF5ZXI6IGFueTsgY29udHJvbFN5c3RlbTogQ29udHJvbFN5c3RlbTsgdG93ZXJTeXN0ZW06IFRvd2VyU3lzdGVtOyBzdW1tb25lZFVuaXRTeXN0ZW06IFN1bW1vbmVkVW5pdFN5c3RlbSB9IHtcbiAgY29uc3Qgd29ybGQgPSBlbmdpbmUuZ2V0V29ybGQoKTtcbiAgY29uc3QgaW5wdXRNYW5hZ2VyID0gZW5naW5lLmdldElucHV0TWFuYWdlcigpO1xuXG4gIC8vIEVuYWJsZSBzaGFkb3dzXG4gIHJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gdHJ1ZTtcbiAgcmVuZGVyZXIuc2hhZG93TWFwLnR5cGUgPSBQQ0ZTb2Z0U2hhZG93TWFwO1xuXG4gIC8vIENyZWF0ZSBzeXN0ZW1zXG4gIGNvbnN0IHBoeXNpY3NTeXN0ZW0gPSBuZXcgUGh5c2ljc1N5c3RlbSgpO1xuICBjb25zdCBjb2xsaXNpb25TeXN0ZW0gPSBuZXcgQ29sbGlzaW9uU3lzdGVtKDUpOyAvLyA1IHVuaXQgY2VsbCBzaXplIGZvciBzcGF0aWFsIGhhc2hcbiAgY29uc3QgY29tYmF0U3lzdGVtID0gbmV3IENvbWJhdFN5c3RlbSh3b3JsZCk7XG4gIGNvbnN0IHJlbmRlclN5c3RlbSA9IG5ldyBSZW5kZXJTeXN0ZW0oc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIpO1xuICBjb25zdCBwcm9qZWN0aWxlU3lzdGVtID0gbmV3IFByb2plY3RpbGVTeXN0ZW0od29ybGQpO1xuICBjb25zdCB0b3dlclN5c3RlbSA9IG5ldyBUb3dlclN5c3RlbSh3b3JsZCk7XG4gIGNvbnN0IHN1bW1vbmVkVW5pdFN5c3RlbSA9IG5ldyBTdW1tb25lZFVuaXRTeXN0ZW0od29ybGQpO1xuICBjb25zdCBjb250cm9sU3lzdGVtID0gbmV3IENvbnRyb2xTeXN0ZW0oXG4gICAgY2FtZXJhIGFzIFBlcnNwZWN0aXZlQ2FtZXJhLFxuICAgIGlucHV0TWFuYWdlcixcbiAgICB3b3JsZCxcbiAgICBwcm9qZWN0aWxlU3lzdGVtXG4gICk7XG4gIGNvbnN0IGNhbWVyYVN5c3RlbSA9IG5ldyBDYW1lcmFTeXN0ZW0oXG4gICAgY2FtZXJhIGFzIFBlcnNwZWN0aXZlQ2FtZXJhLFxuICAgIGlucHV0TWFuYWdlcixcbiAgICB7XG4gICAgICBkaXN0YW5jZTogOCxcbiAgICAgIGhlaWdodDogMixcbiAgICAgIG1vdXNlU2Vuc2l0aXZpdHk6IDAuMDA1LFxuICAgICAgc21vb3RoaW5nOiAwLjE1LFxuICAgIH1cbiAgKTtcbiAgY29uc3QgaW50ZXJwb2xhdGlvblN5c3RlbSA9IG5ldyBJbnRlcnBvbGF0aW9uU3lzdGVtKCk7XG5cbiAgLy8gQ29ubmVjdCBzeXN0ZW1zXG4gIHByb2plY3RpbGVTeXN0ZW0uc2V0Q29tYmF0U3lzdGVtKGNvbWJhdFN5c3RlbSk7XG4gIHRvd2VyU3lzdGVtLnNldFByb2plY3RpbGVTeXN0ZW0ocHJvamVjdGlsZVN5c3RlbSk7XG4gIHN1bW1vbmVkVW5pdFN5c3RlbS5zZXRDb21iYXRTeXN0ZW0oY29tYmF0U3lzdGVtKTtcblxuICAvLyBTZXQgdXAgY29tYmF0IHN5c3RlbSB0byByb3V0ZSBwbGF5ZXIgZGFtYWdlIHRocm91Z2ggUFZQIHN5c3RlbVxuICBjb21iYXRTeXN0ZW0uc2V0UGxheWVyRGFtYWdlQ2FsbGJhY2soZGFtYWdlUGxheWVyQ2FsbGJhY2spO1xuICBcbiAgLy8gU2V0IHVwIHRvd2VyIHN5c3RlbSBjYWxsYmFjayBmb3IgdG93ZXIgZGFtYWdlXG4gIC8vIFRPRE86IEltcGxlbWVudCB0b3dlciBkYW1hZ2UgY2FsbGJhY2sgbWFwcGluZyBzaW1pbGFyIHRvIHBsYXllciBkYW1hZ2VcblxuICAvLyBBZGQgc3lzdGVtcyB0byB3b3JsZCAob3JkZXIgbWF0dGVycyBmb3IgZGVwZW5kZW5jaWVzKVxuICB3b3JsZC5hZGRTeXN0ZW0ocGh5c2ljc1N5c3RlbSk7XG4gIHdvcmxkLmFkZFN5c3RlbShjb2xsaXNpb25TeXN0ZW0pO1xuICB3b3JsZC5hZGRTeXN0ZW0oY29tYmF0U3lzdGVtKTtcbiAgd29ybGQuYWRkU3lzdGVtKGludGVycG9sYXRpb25TeXN0ZW0pOyAvLyBBZGQgaW50ZXJwb2xhdGlvbiBzeXN0ZW0gYmVmb3JlIHJlbmRlciBzeXN0ZW1cbiAgd29ybGQuYWRkU3lzdGVtKHJlbmRlclN5c3RlbSk7XG4gIHdvcmxkLmFkZFN5c3RlbShwcm9qZWN0aWxlU3lzdGVtKTtcbiAgd29ybGQuYWRkU3lzdGVtKHRvd2VyU3lzdGVtKTtcbiAgd29ybGQuYWRkU3lzdGVtKHN1bW1vbmVkVW5pdFN5c3RlbSk7XG4gIHdvcmxkLmFkZFN5c3RlbShjb250cm9sU3lzdGVtKTtcbiAgd29ybGQuYWRkU3lzdGVtKGNhbWVyYVN5c3RlbSk7XG5cbiAgLy8gQ3JlYXRlIHBsYXllciBlbnRpdHlcbiAgY29uc3QgcGxheWVyRW50aXR5ID0gY3JlYXRlUFZQUGxheWVyKHdvcmxkKTtcbiAgXG4gIC8vIFNldCBwbGF5ZXIgZm9yIGNvbnRyb2wgc3lzdGVtIGFuZCBjYW1lcmEgc3lzdGVtXG4gIGNvbnRyb2xTeXN0ZW0uc2V0UGxheWVyKHBsYXllckVudGl0eSk7XG4gIGNhbWVyYVN5c3RlbS5zZXRUYXJnZXQocGxheWVyRW50aXR5KTtcbiAgY2FtZXJhU3lzdGVtLnNuYXBUb1RhcmdldCgpO1xuICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn4yNIFRvdGFsIGVudGl0aWVzIGluIFBWUCB3b3JsZDonLCB3b3JsZC5nZXRBbGxFbnRpdGllcygpLmxlbmd0aCk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+RpCBQbGF5ZXIgZW50aXR5IGNyZWF0ZWQgd2l0aCBJRDogJHtwbGF5ZXJFbnRpdHkuaWR9YCk7XG5cbiAgcmV0dXJuIHsgcGxheWVyOiBwbGF5ZXJFbnRpdHksIGNvbnRyb2xTeXN0ZW0sIHRvd2VyU3lzdGVtLCBzdW1tb25lZFVuaXRTeXN0ZW0gfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUFZQUGxheWVyKHdvcmxkOiBXb3JsZCk6IGFueSB7XG4gIC8vIENyZWF0ZSBwbGF5ZXIgZW50aXR5XG4gIGNvbnN0IHBsYXllciA9IHdvcmxkLmNyZWF0ZUVudGl0eSgpO1xuXG4gIC8vIEFkZCBUcmFuc2Zvcm0gY29tcG9uZW50XG4gIGNvbnN0IHRyYW5zZm9ybSA9IHdvcmxkLmNyZWF0ZUNvbXBvbmVudChUcmFuc2Zvcm0pO1xuICB0cmFuc2Zvcm0uc2V0UG9zaXRpb24oMCwgMC41LCAwKTsgLy8gUG9zaXRpb24gc3BoZXJlIGNlbnRlciBhdCByYWRpdXMgaGVpZ2h0IGFib3ZlIGdyb3VuZFxuICBwbGF5ZXIuYWRkQ29tcG9uZW50KHRyYW5zZm9ybSk7XG5cbiAgLy8gTk9URTogTG9jYWwgcGxheWVycyBkbyBOT1QgZ2V0IGludGVycG9sYXRpb24gYnVmZmVyc1xuICAvLyBPbmx5IHJlbW90ZSBwbGF5ZXJzIHVzZSBpbnRlcnBvbGF0aW9uIGZvciBzbW9vdGggbW92ZW1lbnRcblxuICAvLyBBZGQgTW92ZW1lbnQgY29tcG9uZW50XG4gIGNvbnN0IG1vdmVtZW50ID0gd29ybGQuY3JlYXRlQ29tcG9uZW50KE1vdmVtZW50KTtcbiAgbW92ZW1lbnQubWF4U3BlZWQgPSAzLjc1OyAvLyBSZWR1Y2VkIGZyb20gOCB0byAzLjY1IGZvciBzbG93ZXIgbW92ZW1lbnRcbiAgbW92ZW1lbnQuanVtcEZvcmNlID0gODtcbiAgbW92ZW1lbnQuZnJpY3Rpb24gPSAwLjg1O1xuICBwbGF5ZXIuYWRkQ29tcG9uZW50KG1vdmVtZW50KTtcblxuICAvLyBBZGQgSGVhbHRoIGNvbXBvbmVudCB3aXRoIGxldmVsLWJhc2VkIG1heCBoZWFsdGhcbiAgY29uc3QgbWF4SGVhbHRoID0gRXhwZXJpZW5jZVN5c3RlbS5nZXRNYXhIZWFsdGhGb3JMZXZlbCgxKTsgLy8gU3RhcnQgYXQgbGV2ZWwgMVxuICBjb25zdCBoZWFsdGggPSBuZXcgSGVhbHRoKG1heEhlYWx0aCk7XG4gIGhlYWx0aC5lbmFibGVSZWdlbmVyYXRpb24oMiwgNSk7IC8vIFNsb3dlciByZWdlbiBpbiBQVlA6IDEgSFAgcGVyIHNlY29uZCBhZnRlciAxMCBzZWNvbmRzXG4gIHBsYXllci5hZGRDb21wb25lbnQoaGVhbHRoKTtcblxuICAvLyBBZGQgU2hpZWxkIGNvbXBvbmVudCB3aXRoIDEwMCBtYXggc2hpZWxkXG4gIGNvbnN0IHNoaWVsZCA9IG5ldyBTaGllbGQoMjUwLCAyMCwgMik7IC8vIDEwMCBtYXggc2hpZWxkLCAyMC9zIHJlZ2VuLCA1cyBkZWxheVxuICBwbGF5ZXIuYWRkQ29tcG9uZW50KHNoaWVsZCk7XG5cbiAgLy8gQWRkIENvbGxpZGVyIGNvbXBvbmVudCBmb3IgZW52aXJvbm1lbnQgY29sbGlzaW9uIGFuZCBQVlAgZGFtYWdlIGRldGVjdGlvblxuICBjb25zdCBjb2xsaWRlciA9IHdvcmxkLmNyZWF0ZUNvbXBvbmVudChDb2xsaWRlcik7XG4gIGNvbGxpZGVyLnR5cGUgPSBDb2xsaWRlclR5cGUuU1BIRVJFO1xuICBjb2xsaWRlci5yYWRpdXMgPSAxLjI7IC8vIFJlZHVjZWQgY29sbGlzaW9uIHJhZGl1cyBmb3IgYmV0dGVyIHBsYXllciBwcm94aW1pdHkgaW4gUFZQXG4gIGNvbGxpZGVyLmxheWVyID0gQ29sbGlzaW9uTGF5ZXIuUExBWUVSOyAvLyBVc2UgcGxheWVyIGxheWVyIGZvciBsb2NhbCBwbGF5ZXJcbiAgLy8gU2V0IGNvbGxpc2lvbiBtYXNrIHRvIGNvbGxpZGUgd2l0aCBlbnZpcm9ubWVudCBvbmx5IC0gTk8gcGxheWVyLXRvLXBsYXllciBjb2xsaXNpb24gaW4gUFZQXG4gIGNvbGxpZGVyLnNldE1hc2soQ29sbGlzaW9uTGF5ZXIuRU5WSVJPTk1FTlQpO1xuICBjb2xsaWRlci5zZXRPZmZzZXQoMCwgMC41LCAwKTsgLy8gQ2VudGVyIG9uIHBsYXllclxuICBwbGF5ZXIuYWRkQ29tcG9uZW50KGNvbGxpZGVyKTtcblxuICBjb25zb2xlLmxvZygn8J+RpCBQVlAgcGxheWVyIGVudGl0eSBjcmVhdGVkIHdpdGggY29tcG9uZW50czonLCB7XG4gICAgdHJhbnNmb3JtOiAhIXBsYXllci5nZXRDb21wb25lbnQoVHJhbnNmb3JtKSxcbiAgICBtb3ZlbWVudDogISFwbGF5ZXIuZ2V0Q29tcG9uZW50KE1vdmVtZW50KSxcbiAgICBoZWFsdGg6ICEhcGxheWVyLmdldENvbXBvbmVudChIZWFsdGgpLFxuICAgIHNoaWVsZDogISFwbGF5ZXIuZ2V0Q29tcG9uZW50KFNoaWVsZCksXG4gICAgY29sbGlkZXI6ICEhcGxheWVyLmdldENvbXBvbmVudChDb2xsaWRlciksXG4gIH0pO1xuICBcbiAgY29uc3QgbG9jYWxDb2xsaWRlciA9IHBsYXllci5nZXRDb21wb25lbnQoQ29sbGlkZXIpO1xuXG4gIHJldHVybiBwbGF5ZXI7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUZQU0NvdW50ZXIoZnBzOiBudW1iZXIpIHtcbiAgY29uc3QgZnBzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcHMtY291bnRlcicpO1xuICBpZiAoZnBzRWxlbWVudCkge1xuICAgIGZwc0VsZW1lbnQudGV4dENvbnRlbnQgPSBgRlBTOiAke2Zwc31gO1xuICB9XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlVGhyZWUiLCJ1c2VGcmFtZSIsIlZlY3RvcjMiLCJNYXRyaXg0IiwiUENGU29mdFNoYWRvd01hcCIsIlF1YXRlcm5pb24iLCJFdWxlciIsIkRyYWdvblJlbmRlcmVyIiwidXNlTXVsdGlwbGF5ZXIiLCJFbmdpbmUiLCJXb3JsZCIsIlRyYW5zZm9ybSIsIk1vdmVtZW50IiwiSGVhbHRoIiwiU2hpZWxkIiwiUmVuZGVyZXIiLCJDb2xsaWRlciIsIkNvbGxpc2lvbkxheWVyIiwiQ29sbGlkZXJUeXBlIiwiVG93ZXIiLCJTdW1tb25lZFVuaXQiLCJJbnRlcnBvbGF0aW9uQnVmZmVyIiwiUmVuZGVyU3lzdGVtIiwiQ29udHJvbFN5c3RlbSIsIkNhbWVyYVN5c3RlbSIsIlByb2plY3RpbGVTeXN0ZW0iLCJQaHlzaWNzU3lzdGVtIiwiQ29sbGlzaW9uU3lzdGVtIiwiQ29tYmF0U3lzdGVtIiwiVG93ZXJTeXN0ZW0iLCJTdW1tb25lZFVuaXRTeXN0ZW0iLCJJbnRlcnBvbGF0aW9uU3lzdGVtIiwiV2VhcG9uVHlwZSIsIldlYXBvblN1YmNsYXNzIiwiU21pdGUiLCJEZWF0aEdyYXNwUHJvamVjdGlsZSIsIkRlYXRoR3Jhc3BQdWxsIiwiVW5pZmllZFByb2plY3RpbGVNYW5hZ2VyIiwiQm93UG93ZXJzaG90TWFuYWdlciIsIkZyb3N0Tm92YU1hbmFnZXIiLCJTdHVuTWFuYWdlciIsIkZyb3N0Tm92YSIsIkNvYnJhU2hvdE1hbmFnZXIiLCJWZW5vbUVmZmVjdCIsIkRlYnVmZkluZGljYXRvciIsIkZyb3plbkVmZmVjdCIsIlN0dW5uZWRFZmZlY3QiLCJPcHRpbWl6ZWRQVlBDb2JyYVNob3RNYW5hZ2VyIiwiT3B0aW1pemVkUFZQQmFycmFnZU1hbmFnZXIiLCJPcHRpbWl6ZWRQVlBGcm9zdE5vdmFNYW5hZ2VyIiwiT3B0aW1pemVkUFZQVmlwZXJTdGluZ01hbmFnZXIiLCJ1c2VPcHRpbWl6ZWRQVlBFZmZlY3RzIiwicHZwT2JqZWN0UG9vbCIsInB2cFN0YXRlQmF0Y2hlciIsIlBWUFN0YXRlVXBkYXRlSGVscGVycyIsIkRpdmluZVN0b3JtTWFuYWdlciIsInRyaWdnZXJHbG9iYWxEaXZpbmVTdG9ybSIsIkRlZmxlY3RTaGllbGRNYW5hZ2VyIiwidHJpZ2dlckdsb2JhbERlZmxlY3RTaGllbGQiLCJQbGF5ZXJIZWFsdGhCYXIiLCJUb3dlclJlbmRlcmVyIiwiU3VtbW9uZWRVbml0UmVuZGVyZXIiLCJzZXRHbG9iYWxDcml0aWNhbFJ1bmVDb3VudCIsInNldEdsb2JhbENyaXREYW1hZ2VSdW5lQ291bnQiLCJFbnZpcm9ubWVudCIsInVzZUJvd1Bvd2Vyc2hvdCIsInRyaWdnZXJHbG9iYWxWaXBlclN0aW5nIiwidHJpZ2dlckdsb2JhbEJhcnJhZ2UiLCJFeHBlcmllbmNlU3lzdGVtIiwiUFZQUmVhbmltYXRlRWZmZWN0IiwibWVtbyIsInBvc2l0aW9uIiwib25Db21wbGV0ZSIsInRpbWUiLCJzZXRUaW1lIiwiZHVyYXRpb24iLCJfIiwiZGVsdGEiLCJwcmV2IiwibmV3VGltZSIsInByb2dyZXNzIiwib3BhY2l0eSIsIk1hdGgiLCJzaW4iLCJQSSIsInNjYWxlIiwiZ3JvdXAiLCJ0b0FycmF5IiwiQXJyYXkiLCJtYXAiLCJpIiwibWVzaCIsInJvdGF0aW9uIiwidG9ydXNHZW9tZXRyeSIsImFyZ3MiLCJtZXNoU3RhbmRhcmRNYXRlcmlhbCIsImNvbG9yIiwiZW1pc3NpdmUiLCJlbWlzc2l2ZUludGVuc2l0eSIsInRyYW5zcGFyZW50Iiwic3BoZXJlR2VvbWV0cnkiLCJhbmdsZSIsInJhZGl1cyIsInlPZmZzZXQiLCJjb3MiLCJwb2ludExpZ2h0IiwiaW50ZW5zaXR5IiwiZGlzdGFuY2UiLCJkZWNheSIsImRpc3BsYXlOYW1lIiwiUFZQR2FtZVNjZW5lIiwib25EYW1hZ2VOdW1iZXJzVXBkYXRlIiwib25EYW1hZ2VOdW1iZXJDb21wbGV0ZSIsIm9uQ2FtZXJhVXBkYXRlIiwib25HYW1lU3RhdGVVcGRhdGUiLCJvbkNvbnRyb2xTeXN0ZW1VcGRhdGUiLCJvbkV4cGVyaWVuY2VVcGRhdGUiLCJlbmdpbmVSZWYiLCJjb250cm9sU3lzdGVtUmVmIiwic2NlbmUiLCJjYW1lcmEiLCJnbCIsInNpemUiLCJwbGF5ZXJzIiwidG93ZXJzIiwiZ2FtZVN0YXJ0ZWQiLCJpc0luUm9vbSIsInVwZGF0ZVBsYXllclBvc2l0aW9uIiwidXBkYXRlUGxheWVyV2VhcG9uIiwidXBkYXRlUGxheWVySGVhbHRoIiwiYnJvYWRjYXN0UGxheWVyQXR0YWNrIiwiYnJvYWRjYXN0UGxheWVyQWJpbGl0eSIsImJyb2FkY2FzdFBsYXllckFuaW1hdGlvblN0YXRlIiwiYnJvYWRjYXN0UGxheWVyRGFtYWdlIiwiYnJvYWRjYXN0UGxheWVyRWZmZWN0IiwiYnJvYWRjYXN0UGxheWVyRGVidWZmIiwiZGFtYWdlVG93ZXIiLCJzb2NrZXQiLCJwbGF5ZXJFbnRpdHlSZWYiLCJ0b3dlclN5c3RlbVJlZiIsInN1bW1vbmVkVW5pdFN5c3RlbVJlZiIsInJlYW5pbWF0ZVJlZiIsImlzSW5pdGlhbGl6ZWQiLCJsYXN0QW5pbWF0aW9uQnJvYWRjYXN0IiwicGxheWVyUG9zaXRpb24iLCJzZXRQbGF5ZXJQb3NpdGlvbiIsInBsYXllckVudGl0eSIsInNldFBsYXllckVudGl0eSIsInZpcGVyU3RpbmdQYXJlbnRSZWYiLCJxdWF0ZXJuaW9uIiwieCIsInkiLCJ6IiwidyIsInNlcnZlclBsYXllckVudGl0aWVzIiwiTWFwIiwic2VydmVyVG93ZXJFbnRpdGllcyIsInNlcnZlclN1bW1vbmVkVW5pdEVudGl0aWVzIiwicGxheWVyRXhwZXJpZW5jZSIsInNldFBsYXllckV4cGVyaWVuY2UiLCJwbGF5ZXJMZXZlbCIsInNldFBsYXllckxldmVsIiwiY3VycmVudE1hbmEiLCJzZXRDdXJyZW50TWFuYSIsIm1heE1hbmEiLCJzZXRNYXhNYW5hIiwiY3VycmVudFdlYXBvbiIsInNldEN1cnJlbnRXZWFwb24iLCJCT1ciLCJwdnBSZWFuaW1hdGVFZmZlY3RzIiwic2V0UHZwUmVhbmltYXRlRWZmZWN0cyIsIm5leHRSZWFuaW1hdGVFZmZlY3RJZCIsInB2cFNtaXRlRWZmZWN0cyIsInNldFB2cFNtaXRlRWZmZWN0cyIsIm5leHRTbWl0ZUVmZmVjdElkIiwicHZwRGVhdGhHcmFzcEVmZmVjdHMiLCJzZXRQdnBEZWF0aEdyYXNwRWZmZWN0cyIsIm5leHREZWF0aEdyYXNwRWZmZWN0SWQiLCJwdnBEZWF0aEdyYXNwUHVsbHMiLCJzZXRQdnBEZWF0aEdyYXNwUHVsbHMiLCJuZXh0RGVhdGhHcmFzcFB1bGxJZCIsInB2cFZlbm9tRWZmZWN0cyIsInNldFB2cFZlbm9tRWZmZWN0cyIsIm5leHRWZW5vbUVmZmVjdElkIiwicHZwRGVidWZmRWZmZWN0cyIsInNldFB2cERlYnVmZkVmZmVjdHMiLCJuZXh0RGVidWZmRWZmZWN0SWQiLCJwdnBGcm9zdE5vdmFFZmZlY3RzIiwic2V0UHZwRnJvc3ROb3ZhRWZmZWN0cyIsIm5leHRGcm9zdE5vdmFFZmZlY3RJZCIsImNyZWF0ZVB2cERlYnVmZkVmZmVjdCIsInBsYXllcklkIiwiZGVidWZmVHlwZSIsImlzTG9jYWxQbGF5ZXIiLCJpZCIsImRlYnVmZkVmZmVjdCIsImN1cnJlbnQiLCJjbG9uZSIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJiYXRjaEVmZmVjdFVwZGF0ZXMiLCJ0eXBlIiwiZWZmZWN0VHlwZSIsInNldHRlciIsImRhdGEiLCJwbGF5ZXJNb3ZlbWVudCIsImdldENvbXBvbmVudCIsImZyZWV6ZSIsInNsb3ciLCJzZXRUaW1lb3V0IiwiZmlsdGVySWQiLCJjcmVhdGVQdnBGcm96ZW5FZmZlY3QiLCJjcmVhdGVQdnBSZWFuaW1hdGVFZmZlY3QiLCJyZWFuaW1hdGVFZmZlY3QiLCJjcmVhdGVQdnBTbWl0ZUVmZmVjdCIsIm9uRGFtYWdlRGVhbHQiLCJzbWl0ZUVmZmVjdCIsImNyZWF0ZVB2cERlYXRoR3Jhc3BFZmZlY3QiLCJzdGFydFBvc2l0aW9uIiwiZGlyZWN0aW9uIiwiZGVhdGhHcmFzcEVmZmVjdCIsInB1bGxUcmlnZ2VyZWQiLCJjcmVhdGVQdnBEZWF0aEdyYXNwUHVsbCIsInRhcmdldFBsYXllcklkIiwiY2FzdGVyUG9zaXRpb24iLCJjb25zb2xlIiwibG9nIiwiZGVhdGhHcmFzcFB1bGwiLCJpc0FjdGl2ZSIsImNyZWF0ZVB2cEZyb3N0Tm92YUVmZmVjdCIsImZyb3N0Tm92YUVmZmVjdCIsImNyZWF0ZVB2cFZlbm9tRWZmZWN0IiwidmVub21FZmZlY3QiLCJ2ZW5vbURhbWFnZVBlclNlY29uZCIsInRpY2tJbnRlcnZhbCIsInRpY2tDb3VudCIsIm1heFRpY2tzIiwidmVub21JbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImhhbmRsZVdhdmVDb21wbGV0ZSIsImFsbFBsYXllcklkcyIsImZyb20iLCJrZXlzIiwiZm9yRWFjaCIsIm5ld0V4cCIsIm5ld0xldmVsIiwiZ2V0TGV2ZWxGcm9tRXhwZXJpZW5jZSIsImhlYWx0aCIsIm5ld01heEhlYWx0aCIsImdldE1heEhlYWx0aEZvckxldmVsIiwib2xkTWF4SGVhbHRoIiwibWF4SGVhbHRoIiwic2V0TWF4SGVhbHRoIiwiY3VycmVudEhlYWx0aCIsIndlYXBvblN0YXRlIiwic2V0V2VhcG9uU3RhdGUiLCJjdXJyZW50U3ViY2xhc3MiLCJFTEVNRU5UQUwiLCJpc0NoYXJnaW5nIiwiY2hhcmdlUHJvZ3Jlc3MiLCJpc1N3aW5naW5nIiwiaXNTcGlubmluZyIsInN3b3JkQ29tYm9TdGVwIiwiaXNEaXZpbmVTdG9ybWluZyIsImlzU3dvcmRDaGFyZ2luZyIsImlzRGVmbGVjdGluZyIsImlzVmlwZXJTdGluZ0NoYXJnaW5nIiwidmlwZXJTdGluZ0NoYXJnZVByb2dyZXNzIiwiaXNCYXJyYWdlQ2hhcmdpbmciLCJiYXJyYWdlQ2hhcmdlUHJvZ3Jlc3MiLCJpc0NvYnJhU2hvdENoYXJnaW5nIiwiY29icmFTaG90Q2hhcmdlUHJvZ3Jlc3MiLCJpc1NreWZhbGxpbmciLCJpc0JhY2tzdGFiYmluZyIsImlzU3VuZGVyaW5nIiwicHJldldlYXBvblJlZiIsIndlYXBvbiIsInN1YmNsYXNzIiwibXVsdGlwbGF5ZXJQbGF5ZXJTdGF0ZXMiLCJzZXRNdWx0aXBsYXllclBsYXllclN0YXRlcyIsImNyZWF0ZVBvd2Vyc2hvdEVmZmVjdCIsImNyZWF0ZU9wdGltaXplZFZlbm9tRWZmZWN0IiwiY3JlYXRlT3B0aW1pemVkRGVidWZmRWZmZWN0IiwiZ2V0UG9vbFN0YXRzIiwiU0NZVEhFIiwiUlVORUJMQURFIiwicmVnZW5SYXRlIiwiaW50ZXJ2YWwiLCJtaW4iLCJuZXdNYXhNYW5hIiwiY29uc3VtZU1hbmEiLCJhbW91bnQiLCJuZXdWYWx1ZSIsIm1heCIsImhhc01hbmEiLCJyZXN1bHQiLCJoYW5kbGVQbGF5ZXJBdHRhY2siLCJhdHRhY2tUeXBlIiwiYW5pbWF0aW9uRGF0YSIsImlzUGVyZmVjdFNob3QiLCJwbGF5ZXIiLCJnZXQiLCJwcm9qZWN0aWxlU3lzdGVtIiwiZ2V0V29ybGQiLCJnZXRTeXN0ZW0iLCJhdHRhY2tlckVudGl0eUlkIiwiYWJzIiwibGVuZ3RoIiwiY3JlYXRlUHJvamVjdGlsZSIsInNwZWVkIiwiZGFtYWdlIiwibGlmZXRpbWUiLCJwaWVyY2luZyIsInByb2plY3RpbGVUeXBlIiwicmVxdWlyZSIsIm9yaWdpbmFsUG9zaXRpb24iLCJvcmlnaW5hbFF1YXRlcm5pb24iLCJjb3B5IiwiYXRhbjIiLCJ0cmlnZ2VyR2xvYmFsQ29icmFTaG90IiwidGFyZ2V0SWQiLCJ0YXJnZXRFbnRpdHlJZCIsInByb2plY3RpbGVUeXBlcyIsImluY2x1ZGVzIiwiYWNxdWlyZVZlY3RvcjMiLCJtYXhEaXN0YW5jZSIsImNyZWF0ZUNoYXJnZWRBcnJvd1Byb2plY3RpbGUiLCJjcmVhdGVFbnRyb3BpY0JvbHRQcm9qZWN0aWxlIiwiY3JlYXRlQ3Jvc3NlbnRyb3B5Qm9sdFByb2plY3RpbGUiLCJiYXJyYWdlRW50aXR5IiwicmVuZGVyZXIiLCJ1c2VyRGF0YSIsImlzQmFycmFnZUFycm93IiwiaXNSZWd1bGFyQXJyb3ciLCJyZWxlYXNlVmVjdG9yMyIsImFuaW1hdGlvblVwZGF0ZVRpbWUiLCJiYXRjaFBsYXllclN0YXRlVXBkYXRlcyIsInN0YXRlVXBkYXRlIiwiY29tYm9TdGVwIiwibGFzdEF0dGFja1R5cGUiLCJsYXN0QXR0YWNrVGltZSIsImxhc3RBbmltYXRpb25VcGRhdGUiLCJwbGF5ZXJXZWFwb24iLCJwbGF5ZXJTdWJjbGFzcyIsInJlc2V0RHVyYXRpb24iLCJBQllTU0FMIiwiU1dPUkQiLCJTQUJSRVMiLCJoYW5kbGVQbGF5ZXJBYmlsaXR5IiwiYWJpbGl0eVR5cGUiLCJzdWNjZXNzIiwidXBkYXRlZCIsImN1cnJlbnRTdGF0ZSIsInNldCIsInN0YXRlIiwidW5kZWZpbmVkIiwidGFyZ2V0UG9zaXRpb24iLCJhZGQiLCJtdWx0aXBseVNjYWxhciIsImNsb3Nlc3RUYXJnZXQiLCJwbGF5ZXJQb3MiLCJkaXN0YW5jZVRvIiwidG9QbGF5ZXIiLCJzdWIiLCJub3JtYWxpemUiLCJkb3RQcm9kdWN0IiwiZG90IiwidGFyZ2V0IiwiYXR0YWNrZXJQb3NpdGlvbiIsImF0dGFja2VyRGlyZWN0aW9uIiwiYXR0YWNrZXJQbGF5ZXIiLCJsb2NhbFBsYXllciIsImxvY2FsUGxheWVyUG9zIiwiZGlyZWN0aW9uVG9Mb2NhbCIsInN1YlZlY3RvcnMiLCJhbmdsZVRocmVzaG9sZCIsImlzQmFja3N0YWIiLCJsb2NhbEZhY2luZ0RpcmVjdGlvbiIsImF0dGFja2VyRGlyZWN0aW9uRnJvbUxvY2FsIiwiYmVoaW5kRG90UHJvZHVjdCIsImhhbmRsZVBsYXllckRhbWFnZWQiLCJzaGllbGQiLCJ0YWtlRGFtYWdlIiwiaGFuZGxlUGxheWVyQW5pbWF0aW9uU3RhdGUiLCJuZXdTdGF0ZSIsImFuaW1hdGlvblN0YXRlIiwiaGFuZGxlUGxheWVyRWZmZWN0IiwiZWZmZWN0IiwidmVub21Qb3NpdGlvbiIsImNhc3RlcklkIiwicHVsbFBvc2l0aW9uIiwidHJhbnNmb3JtIiwic2V0UG9zaXRpb24iLCJoYW5kbGVQbGF5ZXJEZWJ1ZmYiLCJlZmZlY3REYXRhIiwidGFyZ2V0UGxheWVyIiwib24iLCJvZmYiLCJjbGVhbnVwSW50ZXJ2YWwiLCJoYXNDaGFuZ2VzIiwid29ybGQiLCJzZXJ2ZXJQbGF5ZXIiLCJoYXMiLCJlbnRpdHkiLCJjcmVhdGVFbnRpdHkiLCJjcmVhdGVDb21wb25lbnQiLCJhZGRDb21wb25lbnQiLCJpbnRlcnBvbGF0aW9uQnVmZmVyIiwibW92ZW1lbnQiLCJtYXhTcGVlZCIsImp1bXBGb3JjZSIsImZyaWN0aW9uIiwiY2FuTW92ZSIsImNvbGxpZGVyIiwiU1BIRVJFIiwibGF5ZXIiLCJFTkVNWSIsInNldE1hc2siLCJFTlZJUk9OTUVOVCIsInNldE9mZnNldCIsIm5vdGlmeUVudGl0eUFkZGVkIiwiZW50aXR5SWQiLCJnZXRFbnRpdHkiLCJzZXRGcm9tRXVsZXIiLCJhZGRTZXJ2ZXJTdGF0ZSIsInZlbG9jaXR5IiwiYWNjZWxlcmF0aW9uIiwid2FybiIsImN1cnJlbnRQbGF5ZXJJZHMiLCJTZXQiLCJlbnRpdGllc1RvUmVtb3ZlIiwiaXNEZWFkIiwicHVzaCIsImRlbGV0ZSIsInNlcnZlclRvd2VyIiwidG93ZXJJZCIsInRvd2VyIiwib3duZXJJZCIsInRvd2VySW5kZXgiLCJDWUxJTkRFUiIsImhlaWdodCIsIlBMQVlFUiIsImRpZSIsImN1cnJlbnRUb3dlcklkcyIsInRvd2VyRW50aXRpZXNUb1JlbW92ZSIsInNldFBsYXllck1hcHBpbmciLCJlbmdpbmUiLCJlbmFibGVEZWJ1ZyIsImNhbnZhcyIsImRvbUVsZW1lbnQiLCJpbml0aWFsaXplIiwidGhlbiIsImRhbWFnZVBsYXllcldpdGhNYXBwaW5nIiwibnVtZXJpY0VudGl0eUlkIiwicGFyc2VJbnQiLCJzZXJ2ZXJQbGF5ZXJJZCIsImxvY2FsRW50aXR5SWQiLCJjb250cm9sU3lzdGVtIiwidG93ZXJTeXN0ZW0iLCJzdW1tb25lZFVuaXRTeXN0ZW0iLCJzZXR1cFBWUEdhbWUiLCJzZXRXYXZlQ29tcGxldGVDYWxsYmFjayIsInNldEJvd1JlbGVhc2VDYWxsYmFjayIsImZpbmFsUHJvZ3Jlc3MiLCJnZXRXb3JsZERpcmVjdGlvbiIsImN1cnJlbnRQbGF5ZXJFbnRpdHkiLCJjb21wZW5zYXRpb25BbmdsZSIsImNhbWVyYVJpZ2h0IiwiY3Jvc3NWZWN0b3JzIiwicm90YXRpb25NYXRyaXgiLCJtYWtlUm90YXRpb25BeGlzIiwiYXBwbHlNYXRyaXg0IiwiZWZmZWN0SWQiLCJnZXRDdXJyZW50U3ViY2xhc3MiLCJzZXREaXZpbmVTdG9ybUNhbGxiYWNrIiwic2V0VmlwZXJTdGluZ0NhbGxiYWNrIiwic2V0QmFycmFnZUNhbGxiYWNrIiwic2V0RnJvc3ROb3ZhQ2FsbGJhY2siLCJzZXRDb2JyYVNob3RDYWxsYmFjayIsInNldENoYXJnZUNhbGxiYWNrIiwic2V0U2t5ZmFsbENhbGxiYWNrIiwic2V0QmFja3N0YWJDYWxsYmFjayIsInNldFN1bmRlckNhbGxiYWNrIiwic3RhY2tDb3VudCIsInNldERlYnVmZkNhbGxiYWNrIiwic2V0UHJvamVjdGlsZUNyZWF0ZWRDYWxsYmFjayIsImNvbmZpZyIsImdldENoYXJnZVByb2dyZXNzIiwic2V0UmVhbmltYXRlQ2FsbGJhY2siLCJ0cmlnZ2VySGVhbGluZ0VmZmVjdCIsInNldFNtaXRlQ2FsbGJhY2siLCJzZXREZWF0aEdyYXNwQ2FsbGJhY2siLCJzZXRDb25zdW1lTWFuYUNhbGxiYWNrIiwic2V0Q2hlY2tNYW5hQ2FsbGJhY2siLCJzdGFydCIsImRlc3Ryb3kiLCJjbGVhciIsIndpbmRvdyIsInB2cFBsYXllcnMiLCJsb2NhbFNvY2tldElkIiwibXVsdGlwbGF5ZXIiLCJnZXRJbnRlcnBvbGF0aW9uU3RhdHMiLCJlcnJvciIsImludGVycG9sYXRpb25TeXN0ZW0iLCJzdGF0cyIsInRlc3RJbnRlcnBvbGF0aW9uTWV0aG9kcyIsImRlbHRhVGltZSIsImlzRW5naW5lUnVubmluZyIsInVwZGF0ZUZQU0NvdW50ZXIiLCJnZXRDdXJyZW50RlBTIiwicmVzZXRGcmFtZVRlbXBvcmFyaWVzIiwic3RhdGVVcGRhdGVzIiwibmV3UG9zaXRpb24iLCJ2YWx1ZSIsImNhbWVyYURpcmVjdGlvbiIsImNhbWVyYUFuZ2xlIiwibmV3V2VhcG9uU3RhdGUiLCJnZXRDdXJyZW50V2VhcG9uIiwiaXNXZWFwb25DaGFyZ2luZyIsImlzV2VhcG9uU3dpbmdpbmciLCJnZXRTd29yZENvbWJvU3RlcCIsImlzRGl2aW5lU3Rvcm1BY3RpdmUiLCJpc0NoYXJnZUFjdGl2ZSIsImlzRGVmbGVjdEFjdGl2ZSIsImlzVmlwZXJTdGluZ0NoYXJnaW5nQWN0aXZlIiwiZ2V0VmlwZXJTdGluZ0NoYXJnZVByb2dyZXNzIiwiaXNCYXJyYWdlQ2hhcmdpbmdBY3RpdmUiLCJnZXRCYXJyYWdlQ2hhcmdlUHJvZ3Jlc3MiLCJpc0NvYnJhU2hvdENoYXJnaW5nQWN0aXZlIiwiZ2V0Q29icmFTaG90Q2hhcmdlUHJvZ3Jlc3MiLCJpc1NreWZhbGxBY3RpdmUiLCJpc0JhY2tzdGFiQWN0aXZlIiwiaXNTdW5kZXJBY3RpdmUiLCJwcmV2V2VhcG9uIiwiaXNTY3l0aGVTcGlubmluZyIsImlzU3dvcmRTcGlubmluZyIsImFuaW1hdGlvblN0YXRlVG9TZW5kIiwiY29tYmF0U3lzdGVtIiwiZ2V0RGFtYWdlTnVtYmVycyIsInBvb2xTdGF0cyIsImJhdGNoZXJTdGF0cyIsImdldFN0YXRzIiwib2JqZWN0UG9vbCIsInN0YXRlQmF0Y2hlciIsImhlYWx0aENvbXBvbmVudCIsInNoaWVsZENvbXBvbmVudCIsImdhbWVTdGF0ZSIsInBsYXllckhlYWx0aCIsInBsYXllclNoaWVsZCIsImN1cnJlbnRTaGllbGQiLCJtYXhTaGllbGQiLCJtYW5hIiwiYmF0Y2hHYW1lU3RhdGVVcGRhdGVzIiwiaGFuZGxlRGFtYWdlTnVtYmVyQ29tcGxldGUiLCJyZW1vdmVEYW1hZ2VOdW1iZXIiLCJsZXZlbCIsImFtYmllbnRMaWdodCIsImRpcmVjdGlvbmFsTGlnaHQiLCJjYXN0U2hhZG93Iiwic2hhZG93LW1hcFNpemUtd2lkdGgiLCJzaGFkb3ctbWFwU2l6ZS1oZWlnaHQiLCJzaGFkb3ctY2FtZXJhLWZhciIsInNoYWRvdy1jYW1lcmEtbGVmdCIsInNoYWRvdy1jYW1lcmEtcmlnaHQiLCJzaGFkb3ctY2FtZXJhLXRvcCIsInNoYWRvdy1jYW1lcmEtYm90dG9tIiwicmVjZWl2ZVNoYWRvdyIsImN5bGluZGVyR2VvbWV0cnkiLCJyaW5nR2VvbWV0cnkiLCJpc1NtaXRpbmciLCJpc1NtaXRlQWN0aXZlIiwiaXNEZWF0aEdyYXNwaW5nIiwiaXNEZWF0aEdyYXNwQWN0aXZlIiwib25Cb3dSZWxlYXNlIiwib25TY3l0aGVTd2luZ0NvbXBsZXRlIiwib25Td29yZFN3aW5nQ29tcGxldGUiLCJvblNhYnJlc1N3aW5nQ29tcGxldGUiLCJvbkNoYXJnZUNvbXBsZXRlIiwib25EZWZsZWN0Q29tcGxldGUiLCJvbkJhY2tzdGFiQ29tcGxldGUiLCJvblN1bmRlckNvbXBsZXRlIiwib25TbWl0ZUNvbXBsZXRlIiwib25EZWF0aEdyYXNwQ29tcGxldGUiLCJ2YWx1ZXMiLCJwbGF5ZXJTdGF0ZSIsInJlcGxhY2UiLCJzdW1tb25lZFVuaXRzIiwicXVlcnlFbnRpdGllcyIsInVuaXQiLCJ1bml0SWQiLCJmaWx0ZXIiLCJCb29sZWFuIiwic2VydmVyUGxheWVyRW50aXR5SWQiLCJzaGllbGRBbW91bnQiLCJtYXhTaGllbGRBbW91bnQiLCJwbGF5ZXJOYW1lIiwibmFtZSIsInNob3dEaXN0YW5jZSIsImVuZW15RGF0YSIsInAiLCJvbkhpdFRhcmdldCIsIm9uUGxheWVySGl0Iiwib25QbGF5ZXJWZW5vbWVkIiwiY2xvbmVkUG9zaXRpb24iLCJvblBsYXllclNsb3dlZCIsInNwZWVkTXVsdGlwbGllciIsIm9uUGxheWVyRnJvemVuIiwiYWZmZWN0ZWRQbGF5ZXIiLCJjdXJyZW50UG9zaXRpb24iLCJvdGhlclBsYXllcnNEYXRhIiwiZW50cmllcyIsIndlYXBvblR5cGUiLCJvbkhpdCIsImRhbWFnZURlYWx0Iiwib2xkSGVhbHRoIiwiZGlkSGVhbCIsImhlYWwiLCJjdXJyZW50U3RhcnRQb3NpdGlvbiIsImNhc3RpbmdQbGF5ZXIiLCJwdWxsIiwicGxheWVyRW50aXRpZXMiLCJnZXRFbnRpdHlQb3NpdGlvbiIsInVwZGF0ZUVudGl0eVBvc2l0aW9uIiwiZW5lbXlJZCIsImlzRHlpbmciLCJjdXJyZW50UG9zIiwiZGFtYWdlUGxheWVyQ2FsbGJhY2siLCJkYW1hZ2VUb3dlckNhbGxiYWNrIiwiaW5wdXRNYW5hZ2VyIiwiZ2V0SW5wdXRNYW5hZ2VyIiwic2hhZG93TWFwIiwiZW5hYmxlZCIsInBoeXNpY3NTeXN0ZW0iLCJjb2xsaXNpb25TeXN0ZW0iLCJyZW5kZXJTeXN0ZW0iLCJjYW1lcmFTeXN0ZW0iLCJtb3VzZVNlbnNpdGl2aXR5Iiwic21vb3RoaW5nIiwic2V0Q29tYmF0U3lzdGVtIiwic2V0UHJvamVjdGlsZVN5c3RlbSIsInNldFBsYXllckRhbWFnZUNhbGxiYWNrIiwiYWRkU3lzdGVtIiwiY3JlYXRlUFZQUGxheWVyIiwic2V0UGxheWVyIiwic2V0VGFyZ2V0Iiwic25hcFRvVGFyZ2V0IiwiZ2V0QWxsRW50aXRpZXMiLCJlbmFibGVSZWdlbmVyYXRpb24iLCJsb2NhbENvbGxpZGVyIiwiZnBzIiwiZnBzRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0ZXh0Q29udGVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/PVPGameScene.tsx\n"));

/***/ })

});